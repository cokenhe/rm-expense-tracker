function rO(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function aI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sy={exports:{}},Cu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function iO(){if(aT)return Cu;aT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:c,ref:s!==void 0?s:null,props:o}}return Cu.Fragment=e,Cu.jsx=t,Cu.jsxs=t,Cu}var oT;function sO(){return oT||(oT=1,Sy.exports=iO()),Sy.exports}var R=sO(),Ay={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function aO(){if(lT)return Ue;lT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,I={};function x(F,ae,ve){this.props=F,this.context=ae,this.refs=I,this.updater=ve||b}x.prototype.isReactComponent={},x.prototype.setState=function(F,ae){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ae,"setState")},x.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function C(){}C.prototype=x.prototype;function M(F,ae,ve){this.props=F,this.context=ae,this.refs=I,this.updater=ve||b}var k=M.prototype=new C;k.constructor=M,A(k,x.prototype),k.isPureReactComponent=!0;var $=Array.isArray,G={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function V(F,ae,ve,he,ee,fe){return ve=fe.ref,{$$typeof:n,type:F,key:ae,ref:ve!==void 0?ve:null,props:fe}}function P(F,ae){return V(F.type,ae,void 0,void 0,void 0,F.props)}function D(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function U(F){var ae={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ve){return ae[ve]})}var B=/\/+/g;function z(F,ae){return typeof F=="object"&&F!==null&&F.key!=null?U(""+F.key):ae.toString(36)}function L(){}function le(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(L,L):(F.status="pending",F.then(function(ae){F.status==="pending"&&(F.status="fulfilled",F.value=ae)},function(ae){F.status==="pending"&&(F.status="rejected",F.reason=ae)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Ee(F,ae,ve,he,ee){var fe=typeof F;(fe==="undefined"||fe==="boolean")&&(F=null);var we=!1;if(F===null)we=!0;else switch(fe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(F.$$typeof){case n:case e:we=!0;break;case y:return we=F._init,Ee(we(F._payload),ae,ve,he,ee)}}if(we)return ee=ee(F),we=he===""?"."+z(F,0):he,$(ee)?(ve="",we!=null&&(ve=we.replace(B,"$&/")+"/"),Ee(ee,ae,ve,"",function(Be){return Be})):ee!=null&&(D(ee)&&(ee=P(ee,ve+(ee.key==null||F&&F.key===ee.key?"":(""+ee.key).replace(B,"$&/")+"/")+we)),ae.push(ee)),1;we=0;var pe=he===""?".":he+":";if($(F))for(var be=0;be<F.length;be++)he=F[be],fe=pe+z(he,be),we+=Ee(he,ae,ve,fe,ee);else if(be=w(F),typeof be=="function")for(F=be.call(F),be=0;!(he=F.next()).done;)he=he.value,fe=pe+z(he,be++),we+=Ee(he,ae,ve,fe,ee);else if(fe==="object"){if(typeof F.then=="function")return Ee(le(F),ae,ve,he,ee);throw ae=String(F),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return we}function Z(F,ae,ve){if(F==null)return F;var he=[],ee=0;return Ee(F,he,"","",function(fe){return ae.call(ve,fe,ee++)}),he}function de(F){if(F._status===-1){var ae=F._result;ae=ae(),ae.then(function(ve){(F._status===0||F._status===-1)&&(F._status=1,F._result=ve)},function(ve){(F._status===0||F._status===-1)&&(F._status=2,F._result=ve)}),F._status===-1&&(F._status=0,F._result=ae)}if(F._status===1)return F._result.default;throw F._result}var se=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function ye(){}return Ue.Children={map:Z,forEach:function(F,ae,ve){Z(F,function(){ae.apply(this,arguments)},ve)},count:function(F){var ae=0;return Z(F,function(){ae++}),ae},toArray:function(F){return Z(F,function(ae){return ae})||[]},only:function(F){if(!D(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ue.Component=x,Ue.Fragment=t,Ue.Profiler=s,Ue.PureComponent=M,Ue.StrictMode=r,Ue.Suspense=f,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Ue.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ue.cache=function(F){return function(){return F.apply(null,arguments)}},Ue.cloneElement=function(F,ae,ve){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var he=A({},F.props),ee=F.key,fe=void 0;if(ae!=null)for(we in ae.ref!==void 0&&(fe=void 0),ae.key!==void 0&&(ee=""+ae.key),ae)!Y.call(ae,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ae.ref===void 0||(he[we]=ae[we]);var we=arguments.length-2;if(we===1)he.children=ve;else if(1<we){for(var pe=Array(we),be=0;be<we;be++)pe[be]=arguments[be+2];he.children=pe}return V(F.type,ee,void 0,void 0,fe,he)},Ue.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},Ue.createElement=function(F,ae,ve){var he,ee={},fe=null;if(ae!=null)for(he in ae.key!==void 0&&(fe=""+ae.key),ae)Y.call(ae,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ee[he]=ae[he]);var we=arguments.length-2;if(we===1)ee.children=ve;else if(1<we){for(var pe=Array(we),be=0;be<we;be++)pe[be]=arguments[be+2];ee.children=pe}if(F&&F.defaultProps)for(he in we=F.defaultProps,we)ee[he]===void 0&&(ee[he]=we[he]);return V(F,fe,void 0,void 0,null,ee)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(F){return{$$typeof:d,render:F}},Ue.isValidElement=D,Ue.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:de}},Ue.memo=function(F,ae){return{$$typeof:m,type:F,compare:ae===void 0?null:ae}},Ue.startTransition=function(F){var ae=G.T,ve={};G.T=ve;try{var he=F(),ee=G.S;ee!==null&&ee(ve,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ye,se)}catch(fe){se(fe)}finally{G.T=ae}},Ue.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Ue.use=function(F){return G.H.use(F)},Ue.useActionState=function(F,ae,ve){return G.H.useActionState(F,ae,ve)},Ue.useCallback=function(F,ae){return G.H.useCallback(F,ae)},Ue.useContext=function(F){return G.H.useContext(F)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(F,ae){return G.H.useDeferredValue(F,ae)},Ue.useEffect=function(F,ae){return G.H.useEffect(F,ae)},Ue.useId=function(){return G.H.useId()},Ue.useImperativeHandle=function(F,ae,ve){return G.H.useImperativeHandle(F,ae,ve)},Ue.useInsertionEffect=function(F,ae){return G.H.useInsertionEffect(F,ae)},Ue.useLayoutEffect=function(F,ae){return G.H.useLayoutEffect(F,ae)},Ue.useMemo=function(F,ae){return G.H.useMemo(F,ae)},Ue.useOptimistic=function(F,ae){return G.H.useOptimistic(F,ae)},Ue.useReducer=function(F,ae,ve){return G.H.useReducer(F,ae,ve)},Ue.useRef=function(F){return G.H.useRef(F)},Ue.useState=function(F){return G.H.useState(F)},Ue.useSyncExternalStore=function(F,ae,ve){return G.H.useSyncExternalStore(F,ae,ve)},Ue.useTransition=function(){return G.H.useTransition()},Ue.version="19.0.0",Ue}var cT;function f_(){return cT||(cT=1,Ay.exports=aO()),Ay.exports}var E=f_();const Fs=aI(E),oO=rO({__proto__:null,default:Fs},[E]);var uT={},lO="@vercel/analytics",cO="1.5.0",uO=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function oI(){return typeof window<"u"}function lI(){try{const n="production"}catch{}return"production"}function dO(n="auto"){if(n==="auto"){window.vam=lI();return}window.vam=n}function fO(){return(oI()?window.vam:lI())||"production"}function ov(){return fO()==="development"}function hO(n){return n.scriptSrc?n.scriptSrc:ov()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function mO(n={debug:!0}){var e;if(!oI())return;dO(n.mode),uO(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const t=hO(n);if(document.head.querySelector(`script[src*="${t}"]`))return;const r=document.createElement("script");r.src=t,r.defer=!0,r.dataset.sdkn=lO+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=cO,n.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(r.dataset.dsn=n.dsn),r.onerror=()=>{const s=ov()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},ov()&&n.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function pO({route:n,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:n,path:e})}function gO(){if(!(typeof process>"u"||typeof uT>"u"))return uT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function yO(n){return E.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),E.useEffect(()=>{mO({framework:n.framework||"react",basePath:n.basePath??gO(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),E.useEffect(()=>{n.route&&n.path&&pO({route:n.route,path:n.path})},[n.route,n.path]),null}var dT={},vO="@vercel/speed-insights",_O="1.2.0",wO=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function EO(){return typeof window<"u"}function bO(){try{const n="production"}catch{}return"production"}function cI(){return bO()==="development"}function TO(n){return n.scriptSrc?n.scriptSrc:cI()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":n.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":n.basePath?`${n.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function SO(n={}){var e;if(!EO()||n.route===null)return null;wO();const t=TO(n);if(document.head.querySelector(`script[src*="${t}"]`))return null;n.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",n.beforeSend));const r=document.createElement("script");return r.src=t,r.defer=!0,r.dataset.sdkn=vO+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=_O,n.sampleRate&&(r.dataset.sampleRate=n.sampleRate.toString()),n.route&&(r.dataset.route=n.route),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/speed-insights/vitals`),n.dsn&&(r.dataset.dsn=n.dsn),cI()&&n.debug===!1&&(r.dataset.debug="false"),r.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${t}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(r),{setRoute:s=>{r.dataset.route=s??void 0}}}function AO(){if(!(typeof process>"u"||typeof dT>"u"))return dT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function IO(n){E.useEffect(()=>{var t;n.beforeSend&&((t=window.si)==null||t.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]);const e=E.useRef(null);return E.useEffect(()=>{if(e.current)n.route&&e.current(n.route);else{const t=SO({framework:n.framework??"react",basePath:n.basePath??AO(),...n});t&&(e.current=t.setRoute)}},[n.route]),null}var Iy={exports:{}},Nu={},Ry={exports:{}},xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function RO(){return fT||(fT=1,function(n){function e(Z,de){var se=Z.length;Z.push(de);e:for(;0<se;){var ye=se-1>>>1,F=Z[ye];if(0<s(F,de))Z[ye]=de,Z[se]=F,se=ye;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var de=Z[0],se=Z.pop();if(se!==de){Z[0]=se;e:for(var ye=0,F=Z.length,ae=F>>>1;ye<ae;){var ve=2*(ye+1)-1,he=Z[ve],ee=ve+1,fe=Z[ee];if(0>s(he,se))ee<F&&0>s(fe,he)?(Z[ye]=fe,Z[ee]=se,ye=ee):(Z[ye]=he,Z[ve]=se,ye=ve);else if(ee<F&&0>s(fe,se))Z[ye]=fe,Z[ee]=se,ye=ee;else break e}}return de}function s(Z,de){var se=Z.sortIndex-de.sortIndex;return se!==0?se:Z.id-de.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],m=[],y=1,v=null,w=3,b=!1,A=!1,I=!1,x=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function k(Z){for(var de=t(m);de!==null;){if(de.callback===null)r(m);else if(de.startTime<=Z)r(m),de.sortIndex=de.expirationTime,e(f,de);else break;de=t(m)}}function $(Z){if(I=!1,k(Z),!A)if(t(f)!==null)A=!0,le();else{var de=t(m);de!==null&&Ee($,de.startTime-Z)}}var G=!1,Y=-1,V=5,P=-1;function D(){return!(n.unstable_now()-P<V)}function U(){if(G){var Z=n.unstable_now();P=Z;var de=!0;try{e:{A=!1,I&&(I=!1,C(Y),Y=-1),b=!0;var se=w;try{t:{for(k(Z),v=t(f);v!==null&&!(v.expirationTime>Z&&D());){var ye=v.callback;if(typeof ye=="function"){v.callback=null,w=v.priorityLevel;var F=ye(v.expirationTime<=Z);if(Z=n.unstable_now(),typeof F=="function"){v.callback=F,k(Z),de=!0;break t}v===t(f)&&r(f),k(Z)}else r(f);v=t(f)}if(v!==null)de=!0;else{var ae=t(m);ae!==null&&Ee($,ae.startTime-Z),de=!1}}break e}finally{v=null,w=se,b=!1}de=void 0}}finally{de?B():G=!1}}}var B;if(typeof M=="function")B=function(){M(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,L=z.port2;z.port1.onmessage=U,B=function(){L.postMessage(null)}}else B=function(){x(U,0)};function le(){G||(G=!0,B())}function Ee(Z,de){Y=x(function(){Z(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){A||b||(A=!0,le())},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(Z){switch(w){case 1:case 2:case 3:var de=3;break;default:de=w}var se=w;w=de;try{return Z()}finally{w=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,de){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var se=w;w=Z;try{return de()}finally{w=se}},n.unstable_scheduleCallback=function(Z,de,se){var ye=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ye+se:ye):se=ye,Z){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=se+F,Z={id:y++,callback:de,priorityLevel:Z,startTime:se,expirationTime:F,sortIndex:-1},se>ye?(Z.sortIndex=se,e(m,Z),t(f)===null&&Z===t(m)&&(I?(C(Y),Y=-1):I=!0,Ee($,se-ye))):(Z.sortIndex=F,e(f,Z),A||b||(A=!0,le())),Z},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(Z){var de=w;return function(){var se=w;w=de;try{return Z.apply(this,arguments)}finally{w=se}}}}(xy)),xy}var hT;function xO(){return hT||(hT=1,Ry.exports=RO()),Ry.exports}var Cy={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT;function CO(){if(mT)return un;mT=1;var n=f_();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:f,containerInfo:m,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,un.createPortal=function(f,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(f,m,null,y)},un.flushSync=function(f){var m=c.T,y=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=m,r.p=y,r.d.f()}},un.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(f,m))},un.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},un.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?r.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:b}):y==="script"&&r.d.X(f,{crossOrigin:v,integrity:w,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},un.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);r.d.M(f,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(f)},un.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin);r.d.L(f,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},un.preloadModule=function(f,m){if(typeof f=="string")if(m){var y=d(m.as,m.crossOrigin);r.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(f)},un.requestFormReset=function(f){r.d.r(f)},un.unstable_batchedUpdates=function(f,m){return f(m)},un.useFormState=function(f,m,y){return c.H.useFormState(f,m,y)},un.useFormStatus=function(){return c.H.useHostTransitionStatus()},un.version="19.0.0",un}var pT;function uI(){if(pT)return Cy.exports;pT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cy.exports=CO(),Cy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT;function NO(){if(gT)return Nu;gT=1;var n=xO(),e=f_(),t=uI();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),b=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),$=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function Y(i){return i===null||typeof i!="object"?null:(i=G&&i[G]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function P(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case f:return"Fragment";case d:return"Portal";case y:return"Profiler";case m:return"StrictMode";case I:return"Suspense";case x:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case b:return(i.displayName||"Context")+".Provider";case w:return(i._context.displayName||"Context")+".Consumer";case A:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return a=i.displayName||null,a!==null?a:P(i.type)||"Memo";case M:a=i._payload,i=i._init;try{return P(i(a))}catch{}}return null}var D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=Object.assign,B,z;function L(i){if(B===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||"",z=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+B+i+z}var le=!1;function Ee(i,a){if(!i||le)return"";le=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ne){var J=ne}Reflect.construct(i,[],ce)}else{try{ce.call()}catch(ne){J=ne}i.call(ce.prototype)}}else{try{throw Error()}catch(ne){J=ne}(ce=i())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ne){if(ne&&J&&typeof ne.stack=="string")return[ne.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),S=g[0],N=g[1];if(S&&N){var j=S.split(`
`),H=N.split(`
`);for(p=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;p<H.length&&!H[p].includes("DetermineComponentFrameRoot");)p++;if(u===j.length||p===H.length)for(u=j.length-1,p=H.length-1;1<=u&&0<=p&&j[u]!==H[p];)p--;for(;1<=u&&0<=p;u--,p--)if(j[u]!==H[p]){if(u!==1||p!==1)do if(u--,p--,0>p||j[u]!==H[p]){var ie=`
`+j[u].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=u&&0<=p);break}}}finally{le=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?L(l):""}function Z(i){switch(i.tag){case 26:case 27:case 5:return L(i.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 15:return i=Ee(i.type,!1),i;case 11:return i=Ee(i.type.render,!1),i;case 1:return i=Ee(i.type,!0),i;default:return""}}function de(i){try{var a="";do a+=Z(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function se(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function ye(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function F(i){if(se(i)!==i)throw Error(r(188))}function ae(i){var a=i.alternate;if(!a){if(a=se(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,u=a;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return F(p),i;if(g===u)return F(p),a;g=g.sibling}throw Error(r(188))}if(l.return!==u.return)l=p,u=g;else{for(var S=!1,N=p.child;N;){if(N===l){S=!0,l=p,u=g;break}if(N===u){S=!0,u=p,l=g;break}N=N.sibling}if(!S){for(N=g.child;N;){if(N===l){S=!0,l=g,u=p;break}if(N===u){S=!0,u=g,l=p;break}N=N.sibling}if(!S)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function ve(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=ve(i),a!==null)return a;i=i.sibling}return null}var he=Array.isArray,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},we=[],pe=-1;function be(i){return{current:i}}function Be(i){0>pe||(i.current=we[pe],we[pe]=null,pe--)}function Ce(i,a){pe++,we[pe]=i.current,i.current=a}var Ve=be(null),qe=be(null),ft=be(null),Ut=be(null);function xn(i,a){switch(Ce(ft,a),Ce(qe,i),Ce(Ve,null),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?V0(a):0;break;default:if(i=i===8?a.parentNode:a,a=i.tagName,i=i.namespaceURI)i=V0(i),a=k0(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Be(Ve),Ce(Ve,a)}function vn(){Be(Ve),Be(qe),Be(ft)}function vr(i){i.memoizedState!==null&&Ce(Ut,i);var a=Ve.current,l=k0(a,i.type);a!==l&&(Ce(qe,i),Ce(Ve,l))}function es(i){qe.current===i&&(Be(Ve),Be(qe)),Ut.current===i&&(Be(Ut),Su._currentValue=fe)}var _r=Object.prototype.hasOwnProperty,va=n.unstable_scheduleCallback,Lo=n.unstable_cancelCallback,Ip=n.unstable_shouldYield,Ac=n.unstable_requestPaint,Cn=n.unstable_now,Fd=n.unstable_getCurrentPriorityLevel,jt=n.unstable_ImmediatePriority,Kt=n.unstable_UserBlockingPriority,hi=n.unstable_NormalPriority,zd=n.unstable_LowPriority,Ic=n.unstable_IdlePriority,Rp=n.log,_a=n.unstable_setDisableYieldValue,ts=null,ln=null;function Rc(i){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(ts,i,void 0,(i.current.flags&128)===128)}catch{}}function Ur(i){if(typeof Rp=="function"&&_a(i),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(ts,i)}catch{}}var _n=Math.clz32?Math.clz32:Hd,xc=Math.log,qd=Math.LN2;function Hd(i){return i>>>=0,i===0?32:31-(xc(i)/qd|0)|0}var jr=128,ns=4194304;function wr(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Wn(i,a){var l=i.pendingLanes;if(l===0)return 0;var u=0,p=i.suspendedLanes,g=i.pingedLanes,S=i.warmLanes;i=i.finishedLanes!==0;var N=l&134217727;return N!==0?(l=N&~p,l!==0?u=wr(l):(g&=N,g!==0?u=wr(g):i||(S=N&~S,S!==0&&(u=wr(S))))):(N=l&~p,N!==0?u=wr(N):g!==0?u=wr(g):i||(S=l&~S,S!==0&&(u=wr(S)))),u===0?0:a!==0&&a!==u&&(a&p)===0&&(p=u&-u,S=a&-a,p>=S||p===32&&(S&4194176)!==0)?a:u}function rs(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Uo(i,a){switch(i){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cc(){var i=jr;return jr<<=1,(jr&4194176)===0&&(jr=128),i}function is(){var i=ns;return ns<<=1,(ns&62914560)===0&&(ns=4194304),i}function jo(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Nt(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Gd(i,a,l,u,p,g){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var N=i.entanglements,j=i.expirationTimes,H=i.hiddenUpdates;for(l=S&~l;0<l;){var ie=31-_n(l),ce=1<<ie;N[ie]=0,j[ie]=-1;var J=H[ie];if(J!==null)for(H[ie]=null,ie=0;ie<J.length;ie++){var ne=J[ie];ne!==null&&(ne.lane&=-536870913)}l&=~ce}u!==0&&ss(i,u,0),g!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=g&~(S&~a))}function ss(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var u=31-_n(a);i.entangledLanes|=a,i.entanglements[u]=i.entanglements[u]|1073741824|l&4194218}function as(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var u=31-_n(l),p=1<<u;p&a|i[u]&a&&(i[u]|=a),l&=~p}}function $d(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Kd(){var i=ee.p;return i!==0?i:(i=window.event,i===void 0?32:eT(i.type))}function os(i,a){var l=ee.p;try{return ee.p=i,a()}finally{ee.p=l}}var Br=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Br,Bt="__reactProps$"+Br,mi="__reactContainer$"+Br,wa="__reactEvents$"+Br,Bo="__reactListeners$"+Br,Fr="__reactHandles$"+Br,Nc="__reactResources$"+Br,ls="__reactMarker$"+Br;function Ea(i){delete i[Yt],delete i[Bt],delete i[wa],delete i[Bo],delete i[Fr]}function Er(i){var a=i[Yt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[mi]||l[Yt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=j0(i);i!==null;){if(l=i[Yt])return l;i=j0(i)}return a}i=l,l=i.parentNode}return null}function pi(i){if(i=i[Yt]||i[mi]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function cs(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function us(i){var a=i[Nc];return a||(a=i[Nc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function wt(i){i[ls]=!0}var Dc=new Set,Fo={};function kn(i,a){Nn(i,a),Nn(i+"Capture",a)}function Nn(i,a){for(Fo[i]=a,i=0;i<a.length;i++)Dc.add(a[i])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pc={},Oc={};function Yd(i){return _r.call(Oc,i)?!0:_r.call(Pc,i)?!1:xp.test(i)?Oc[i]=!0:(Pc[i]=!0,!1)}function ds(i,a,l){if(Yd(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function fs(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Xn(i,a,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+u)}}function wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Qd(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Cp(i){var a=Qd(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),u=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,g=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(S){u=""+S,g.call(this,S)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function ba(i){i._valueTracker||(i._valueTracker=Cp(i))}function Mc(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return i&&(u=Qd(i)?i.checked?"true":"false":i.value),i=u,i!==l?(a.setValue(i),!0):!1}function zo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var gi=/[\n"\\]/g;function St(i){return i.replace(gi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function hs(i,a,l,u,p,g,S,N){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),a!=null?S==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+wn(a)):i.value!==""+wn(a)&&(i.value=""+wn(a)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),a!=null?qo(i,S,wn(a)):l!=null?qo(i,S,wn(l)):u!=null&&i.removeAttribute("value"),p==null&&g!=null&&(i.defaultChecked=!!g),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?i.name=""+wn(N):i.removeAttribute("name")}function Ta(i,a,l,u,p,g,S,N){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;l=l!=null?""+wn(l):"",a=a!=null?""+wn(a):l,N||a===i.value||(i.value=a),i.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=N?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S)}function qo(i,a,l){a==="number"&&zo(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function tt(i,a,l,u){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&u&&(i[l].defaultSelected=!0)}else{for(l=""+wn(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,u&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function Sa(i,a,l){if(a!=null&&(a=""+wn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+wn(l):""}function ms(i,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(r(92));if(he(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=wn(a),i.defaultValue=l,u=i.textContent,u===l&&u!==""&&u!==null&&(i.value=u)}function Zn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Np=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vc(i,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":u?i.setProperty(a,l):typeof l!="number"||l===0||Np.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Wd(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&l[p]!==u&&Vc(i,p,u)}else for(var g in a)a.hasOwnProperty(g)&&Vc(i,g,a[g])}function kc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zr(i){return Pp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Jn=null;function Ho(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yi=null,vi=null;function _i(i){var a=pi(i);if(a&&(i=a.stateNode)){var l=i[Bt]||null;e:switch(i=a.stateNode,a.type){case"input":if(hs(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+St(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==i&&u.form===i.form){var p=u[Bt]||null;if(!p)throw Error(r(90));hs(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===i.form&&Mc(u)}break e;case"textarea":Sa(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&tt(i,!!l.multiple,a,!1)}}}var Lc=!1;function Xd(i,a,l){if(Lc)return i(a,l);Lc=!0;try{var u=i(a);return u}finally{if(Lc=!1,(yi!==null||vi!==null)&&(qf(),yi&&(a=yi,i=vi,vi=yi=null,_i(a),i)))for(a=0;a<i.length;a++)_i(i[a])}}function Aa(i,a){var l=i.stateNode;if(l===null)return null;var u=l[Bt]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var er=!1;if(Ln)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){er=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{er=!1}var qr=null,ps=null,wi=null;function Uc(){if(wi)return wi;var i,a=ps,l=a.length,u,p="value"in qr?qr.value:qr.textContent,g=p.length;for(i=0;i<l&&a[i]===p[i];i++);var S=l-i;for(u=1;u<=S&&a[l-u]===p[g-u];u++);return wi=p.slice(i,1<u?1-u:void 0)}function Hr(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Gr(){return!0}function jc(){return!1}function Qt(i){function a(l,u,p,g,S){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(l=i[N],this[N]=l?l(g):g[N]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Gr:jc,this.isPropagationStopped=jc,this}return U(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){},isPersistent:Gr}),a}var st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=Qt(st),Ra=U({},st,{view:0,detail:0}),Zd=Qt(Ra),$o,Ko,$r,xa=U({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==$r&&($r&&i.type==="mousemove"?($o=i.screenX-$r.screenX,Ko=i.screenY-$r.screenY):Ko=$o=0,$r=i),$o)},movementY:function(i){return"movementY"in i?i.movementY:Ko}}),tr=Qt(xa),Jd=U({},xa,{dataTransfer:0}),Op=Qt(Jd),Ca=U({},Ra,{relatedTarget:0}),Yo=Qt(Ca),Bc=U({},st,{animationName:0,elapsedTime:0,pseudoElement:0}),Qo=Qt(Bc),ef=U({},st,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Wo=Qt(ef),Mp=U({},st,{data:0}),Fc=Qt(Mp),Na={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zc(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=nf[i])?!!a[i]:!1}function Da(){return zc}var rf=U({},Ra,{key:function(i){if(i.key){var a=Na[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Hr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(i){return i.type==="keypress"?Hr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Hr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Xo=Qt(rf),sf=U({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=Qt(sf),Ei=U({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),af=Qt(Ei),of=U({},st,{propertyName:0,elapsedTime:0,pseudoElement:0}),lf=Qt(of),cf=U({},xa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zo=Qt(cf),En=U({},st,{newState:0,oldState:0}),uf=Qt(En),df=[9,13,27,32],Kr=Ln&&"CompositionEvent"in window,h=null;Ln&&"documentMode"in document&&(h=document.documentMode);var _=Ln&&"TextEvent"in window&&!h,T=Ln&&(!Kr||h&&8<h&&11>=h),O=" ",Q=!1;function te(i,a){switch(i){case"keyup":return df.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function me(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var We=!1;function Ft(i,a){switch(i){case"compositionend":return me(a);case"keypress":return a.which!==32?null:(Q=!0,O);case"textInput":return i=a.data,i===O&&Q?null:i;default:return null}}function Xe(i,a){if(We)return i==="compositionend"||!Kr&&te(i,a)?(i=Uc(),wi=ps=qr=null,We=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return T&&a.locale!=="ko"?null:a.data;default:return null}}var Wt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zt(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Wt[i.type]:a==="textarea"}function bi(i,a,l,u){yi?vi?vi.push(u):vi=[u]:yi=u,a=Yf(a,"onChange"),0<a.length&&(l=new Go("onChange","change",null,l,u),i.push({event:l,listeners:a}))}var nn=null,Yr=null;function Hc(i){N0(i,0)}function ff(i){var a=cs(i);if(Mc(a))return i}function sE(i,a){if(i==="change")return a}var aE=!1;if(Ln){var Vp;if(Ln){var kp="oninput"in document;if(!kp){var oE=document.createElement("div");oE.setAttribute("oninput","return;"),kp=typeof oE.oninput=="function"}Vp=kp}else Vp=!1;aE=Vp&&(!document.documentMode||9<document.documentMode)}function lE(){nn&&(nn.detachEvent("onpropertychange",cE),Yr=nn=null)}function cE(i){if(i.propertyName==="value"&&ff(Yr)){var a=[];bi(a,Yr,i,Ho(i)),Xd(Hc,a)}}function OD(i,a,l){i==="focusin"?(lE(),nn=a,Yr=l,nn.attachEvent("onpropertychange",cE)):i==="focusout"&&lE()}function MD(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ff(Yr)}function VD(i,a){if(i==="click")return ff(a)}function kD(i,a){if(i==="input"||i==="change")return ff(a)}function LD(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Un=typeof Object.is=="function"?Object.is:LD;function Gc(i,a){if(Un(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!_r.call(a,p)||!Un(i[p],a[p]))return!1}return!0}function uE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function dE(i,a){var l=uE(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=a&&u>=a)return{node:l,offset:a-i};i=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=uE(l)}}function fE(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?fE(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function hE(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=zo(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=zo(i.document)}return a}function Lp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function UD(i,a){var l=hE(a);a=i.focusedElem;var u=i.selectionRange;if(l!==a&&a&&a.ownerDocument&&fE(a.ownerDocument.documentElement,a)){if(u!==null&&Lp(a)){if(i=u.start,l=u.end,l===void 0&&(l=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(l,a.value.length);else if(l=(i=a.ownerDocument||document)&&i.defaultView||window,l.getSelection){l=l.getSelection();var p=a.textContent.length,g=Math.min(u.start,p);u=u.end===void 0?g:Math.min(u.end,p),!l.extend&&g>u&&(p=u,u=g,g=p),p=dE(a,g);var S=dE(a,u);p&&S&&(l.rangeCount!==1||l.anchorNode!==p.node||l.anchorOffset!==p.offset||l.focusNode!==S.node||l.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),l.removeAllRanges(),g>u?(l.addRange(i),l.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),l.addRange(i)))}}for(i=[],l=a;l=l.parentNode;)l.nodeType===1&&i.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)l=i[a],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var jD=Ln&&"documentMode"in document&&11>=document.documentMode,Jo=null,Up=null,$c=null,jp=!1;function mE(i,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jp||Jo==null||Jo!==zo(u)||(u=Jo,"selectionStart"in u&&Lp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$c&&Gc($c,u)||($c=u,u=Yf(Up,"onSelect"),0<u.length&&(a=new Go("onSelect","select",null,a,l),i.push({event:a,listeners:u}),a.target=Jo)))}function Pa(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var el={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionrun:Pa("Transition","TransitionRun"),transitionstart:Pa("Transition","TransitionStart"),transitioncancel:Pa("Transition","TransitionCancel"),transitionend:Pa("Transition","TransitionEnd")},Bp={},pE={};Ln&&(pE=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function Oa(i){if(Bp[i])return Bp[i];if(!el[i])return i;var a=el[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in pE)return Bp[i]=a[l];return i}var gE=Oa("animationend"),yE=Oa("animationiteration"),vE=Oa("animationstart"),BD=Oa("transitionrun"),FD=Oa("transitionstart"),zD=Oa("transitioncancel"),_E=Oa("transitionend"),wE=new Map,EE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function br(i,a){wE.set(i,a),kn(a,[i])}var nr=[],tl=0,Fp=0;function hf(){for(var i=tl,a=Fp=tl=0;a<i;){var l=nr[a];nr[a++]=null;var u=nr[a];nr[a++]=null;var p=nr[a];nr[a++]=null;var g=nr[a];if(nr[a++]=null,u!==null&&p!==null){var S=u.pending;S===null?p.next=p:(p.next=S.next,S.next=p),u.pending=p}g!==0&&bE(l,p,g)}}function mf(i,a,l,u){nr[tl++]=i,nr[tl++]=a,nr[tl++]=l,nr[tl++]=u,Fp|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function zp(i,a,l,u){return mf(i,a,l,u),pf(i)}function gs(i,a){return mf(i,null,null,a),pf(i)}function bE(i,a,l){i.lanes|=l;var u=i.alternate;u!==null&&(u.lanes|=l);for(var p=!1,g=i.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(p=!0)),i=g,g=g.return;p&&a!==null&&i.tag===3&&(g=i.stateNode,p=31-_n(l),g=g.hiddenUpdates,i=g[p],i===null?g[p]=[a]:i.push(a),a.lane=l|536870912)}function pf(i){if(50<yu)throw yu=0,Yg=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var nl={},TE=new WeakMap;function rr(i,a){if(typeof i=="object"&&i!==null){var l=TE.get(i);return l!==void 0?l:(a={value:i,source:a,stack:de(a)},TE.set(i,a),a)}return{value:i,source:a,stack:de(a)}}var rl=[],il=0,gf=null,yf=0,ir=[],sr=0,Ma=null,Ti=1,Si="";function Va(i,a){rl[il++]=yf,rl[il++]=gf,gf=i,yf=a}function SE(i,a,l){ir[sr++]=Ti,ir[sr++]=Si,ir[sr++]=Ma,Ma=i;var u=Ti;i=Si;var p=32-_n(u)-1;u&=~(1<<p),l+=1;var g=32-_n(a)+p;if(30<g){var S=p-p%5;g=(u&(1<<S)-1).toString(32),u>>=S,p-=S,Ti=1<<32-_n(a)+p|l<<p|u,Si=g+i}else Ti=1<<g|l<<p|u,Si=i}function qp(i){i.return!==null&&(Va(i,1),SE(i,1,0))}function Hp(i){for(;i===gf;)gf=rl[--il],rl[il]=null,yf=rl[--il],rl[il]=null;for(;i===Ma;)Ma=ir[--sr],ir[sr]=null,Si=ir[--sr],ir[sr]=null,Ti=ir[--sr],ir[sr]=null}var bn=null,rn=null,nt=!1,Tr=null,Qr=!1,Gp=Error(r(519));function ka(i){var a=Error(r(418,""));throw Qc(rr(a,i)),Gp}function AE(i){var a=i.stateNode,l=i.type,u=i.memoizedProps;switch(a[Yt]=i,a[Bt]=u,l){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(l=0;l<_u.length;l++)Qe(_u[l],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),Ta(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ba(a);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),ms(a,u.value,u.defaultValue,u.children),ba(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||M0(a.textContent,l)?(u.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),u.onScroll!=null&&Qe("scroll",a),u.onScrollEnd!=null&&Qe("scrollend",a),u.onClick!=null&&(a.onclick=Qf),a=!0):a=!1,a||ka(i)}function IE(i){for(bn=i.return;bn;)switch(bn.tag){case 3:case 27:Qr=!0;return;case 5:case 13:Qr=!1;return;default:bn=bn.return}}function Kc(i){if(i!==bn)return!1;if(!nt)return IE(i),nt=!0,!1;var a=!1,l;if((l=i.tag!==3&&i.tag!==27)&&((l=i.tag===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||dy(i.type,i.memoizedProps)),l=!l),l&&(a=!0),a&&rn&&ka(i),IE(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){rn=Ar(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}rn=null}}else rn=bn?Ar(i.stateNode.nextSibling):null;return!0}function Yc(){rn=bn=null,nt=!1}function Qc(i){Tr===null?Tr=[i]:Tr.push(i)}var Wc=Error(r(460)),RE=Error(r(474)),$p={then:function(){}};function xE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function vf(){}function CE(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(vf,vf),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===Wc?Error(r(483)):i;default:if(typeof a.status=="string")a.then(vf,vf);else{if(i=ht,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===Wc?Error(r(483)):i}throw Xc=a,Wc}}var Xc=null;function NE(){if(Xc===null)throw Error(r(459));var i=Xc;return Xc=null,i}var sl=null,Zc=0;function _f(i){var a=Zc;return Zc+=1,sl===null&&(sl=[]),CE(sl,i,a)}function Jc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function wf(i,a){throw a.$$typeof===o?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function DE(i){var a=i._init;return a(i._payload)}function PE(i){function a(K,q){if(i){var X=K.deletions;X===null?(K.deletions=[q],K.flags|=16):X.push(q)}}function l(K,q){if(!i)return null;for(;q!==null;)a(K,q),q=q.sibling;return null}function u(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function p(K,q){return K=xs(K,q),K.index=0,K.sibling=null,K}function g(K,q,X){return K.index=X,i?(X=K.alternate,X!==null?(X=X.index,X<q?(K.flags|=33554434,q):X):(K.flags|=33554434,q)):(K.flags|=1048576,q)}function S(K){return i&&K.alternate===null&&(K.flags|=33554434),K}function N(K,q,X,oe){return q===null||q.tag!==6?(q=Bg(X,K.mode,oe),q.return=K,q):(q=p(q,X),q.return=K,q)}function j(K,q,X,oe){var Te=X.type;return Te===f?ie(K,q,X.props.children,oe,X.key):q!==null&&(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===M&&DE(Te)===q.type)?(q=p(q,X.props),Jc(q,X),q.return=K,q):(q=Uf(X.type,X.key,X.props,null,K.mode,oe),Jc(q,X),q.return=K,q)}function H(K,q,X,oe){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=Fg(X,K.mode,oe),q.return=K,q):(q=p(q,X.children||[]),q.return=K,q)}function ie(K,q,X,oe,Te){return q===null||q.tag!==7?(q=$a(X,K.mode,oe,Te),q.return=K,q):(q=p(q,X),q.return=K,q)}function ce(K,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Bg(""+q,K.mode,X),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case c:return X=Uf(q.type,q.key,q.props,null,K.mode,X),Jc(X,q),X.return=K,X;case d:return q=Fg(q,K.mode,X),q.return=K,q;case M:var oe=q._init;return q=oe(q._payload),ce(K,q,X)}if(he(q)||Y(q))return q=$a(q,K.mode,X,null),q.return=K,q;if(typeof q.then=="function")return ce(K,_f(q),X);if(q.$$typeof===b)return ce(K,Vf(K,q),X);wf(K,q)}return null}function J(K,q,X,oe){var Te=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Te!==null?null:N(K,q,""+X,oe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case c:return X.key===Te?j(K,q,X,oe):null;case d:return X.key===Te?H(K,q,X,oe):null;case M:return Te=X._init,X=Te(X._payload),J(K,q,X,oe)}if(he(X)||Y(X))return Te!==null?null:ie(K,q,X,oe,null);if(typeof X.then=="function")return J(K,q,_f(X),oe);if(X.$$typeof===b)return J(K,q,Vf(K,X),oe);wf(K,X)}return null}function ne(K,q,X,oe,Te){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return K=K.get(X)||null,N(q,K,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case c:return K=K.get(oe.key===null?X:oe.key)||null,j(q,K,oe,Te);case d:return K=K.get(oe.key===null?X:oe.key)||null,H(q,K,oe,Te);case M:var He=oe._init;return oe=He(oe._payload),ne(K,q,X,oe,Te)}if(he(oe)||Y(oe))return K=K.get(X)||null,ie(q,K,oe,Te,null);if(typeof oe.then=="function")return ne(K,q,X,_f(oe),Te);if(oe.$$typeof===b)return ne(K,q,X,Vf(q,oe),Te);wf(q,oe)}return null}function Re(K,q,X,oe){for(var Te=null,He=null,Ne=q,Pe=q=0,Jt=null;Ne!==null&&Pe<X.length;Pe++){Ne.index>Pe?(Jt=Ne,Ne=null):Jt=Ne.sibling;var rt=J(K,Ne,X[Pe],oe);if(rt===null){Ne===null&&(Ne=Jt);break}i&&Ne&&rt.alternate===null&&a(K,Ne),q=g(rt,q,Pe),He===null?Te=rt:He.sibling=rt,He=rt,Ne=Jt}if(Pe===X.length)return l(K,Ne),nt&&Va(K,Pe),Te;if(Ne===null){for(;Pe<X.length;Pe++)Ne=ce(K,X[Pe],oe),Ne!==null&&(q=g(Ne,q,Pe),He===null?Te=Ne:He.sibling=Ne,He=Ne);return nt&&Va(K,Pe),Te}for(Ne=u(Ne);Pe<X.length;Pe++)Jt=ne(Ne,K,Pe,X[Pe],oe),Jt!==null&&(i&&Jt.alternate!==null&&Ne.delete(Jt.key===null?Pe:Jt.key),q=g(Jt,q,Pe),He===null?Te=Jt:He.sibling=Jt,He=Jt);return i&&Ne.forEach(function(Vs){return a(K,Vs)}),nt&&Va(K,Pe),Te}function ke(K,q,X,oe){if(X==null)throw Error(r(151));for(var Te=null,He=null,Ne=q,Pe=q=0,Jt=null,rt=X.next();Ne!==null&&!rt.done;Pe++,rt=X.next()){Ne.index>Pe?(Jt=Ne,Ne=null):Jt=Ne.sibling;var Vs=J(K,Ne,rt.value,oe);if(Vs===null){Ne===null&&(Ne=Jt);break}i&&Ne&&Vs.alternate===null&&a(K,Ne),q=g(Vs,q,Pe),He===null?Te=Vs:He.sibling=Vs,He=Vs,Ne=Jt}if(rt.done)return l(K,Ne),nt&&Va(K,Pe),Te;if(Ne===null){for(;!rt.done;Pe++,rt=X.next())rt=ce(K,rt.value,oe),rt!==null&&(q=g(rt,q,Pe),He===null?Te=rt:He.sibling=rt,He=rt);return nt&&Va(K,Pe),Te}for(Ne=u(Ne);!rt.done;Pe++,rt=X.next())rt=ne(Ne,K,Pe,rt.value,oe),rt!==null&&(i&&rt.alternate!==null&&Ne.delete(rt.key===null?Pe:rt.key),q=g(rt,q,Pe),He===null?Te=rt:He.sibling=rt,He=rt);return i&&Ne.forEach(function(nO){return a(K,nO)}),nt&&Va(K,Pe),Te}function Rt(K,q,X,oe){if(typeof X=="object"&&X!==null&&X.type===f&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case c:e:{for(var Te=X.key;q!==null;){if(q.key===Te){if(Te=X.type,Te===f){if(q.tag===7){l(K,q.sibling),oe=p(q,X.props.children),oe.return=K,K=oe;break e}}else if(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===M&&DE(Te)===q.type){l(K,q.sibling),oe=p(q,X.props),Jc(oe,X),oe.return=K,K=oe;break e}l(K,q);break}else a(K,q);q=q.sibling}X.type===f?(oe=$a(X.props.children,K.mode,oe,X.key),oe.return=K,K=oe):(oe=Uf(X.type,X.key,X.props,null,K.mode,oe),Jc(oe,X),oe.return=K,K=oe)}return S(K);case d:e:{for(Te=X.key;q!==null;){if(q.key===Te)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){l(K,q.sibling),oe=p(q,X.children||[]),oe.return=K,K=oe;break e}else{l(K,q);break}else a(K,q);q=q.sibling}oe=Fg(X,K.mode,oe),oe.return=K,K=oe}return S(K);case M:return Te=X._init,X=Te(X._payload),Rt(K,q,X,oe)}if(he(X))return Re(K,q,X,oe);if(Y(X)){if(Te=Y(X),typeof Te!="function")throw Error(r(150));return X=Te.call(X),ke(K,q,X,oe)}if(typeof X.then=="function")return Rt(K,q,_f(X),oe);if(X.$$typeof===b)return Rt(K,q,Vf(K,X),oe);wf(K,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(l(K,q.sibling),oe=p(q,X),oe.return=K,K=oe):(l(K,q),oe=Bg(X,K.mode,oe),oe.return=K,K=oe),S(K)):l(K,q)}return function(K,q,X,oe){try{Zc=0;var Te=Rt(K,q,X,oe);return sl=null,Te}catch(Ne){if(Ne===Wc)throw Ne;var He=cr(29,Ne,null,K.mode);return He.lanes=oe,He.return=K,He}finally{}}}var La=PE(!0),OE=PE(!1),al=be(null),Ef=be(0);function ME(i,a){i=Vi,Ce(Ef,i),Ce(al,a),Vi=i|a.baseLanes}function Kp(){Ce(Ef,Vi),Ce(al,al.current)}function Yp(){Vi=Ef.current,Be(al),Be(Ef)}var ar=be(null),Wr=null;function ys(i){var a=i.alternate;Ce(qt,qt.current&1),Ce(ar,i),Wr===null&&(a===null||al.current!==null||a.memoizedState!==null)&&(Wr=i)}function VE(i){if(i.tag===22){if(Ce(qt,qt.current),Ce(ar,i),Wr===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Wr=i)}}else vs()}function vs(){Ce(qt,qt.current),Ce(ar,ar.current)}function Ai(i){Be(ar),Wr===i&&(Wr=null),Be(qt)}var qt=be(0);function bf(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var qD=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,u){i.push(u)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},HD=n.unstable_scheduleCallback,GD=n.unstable_NormalPriority,Ht={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qp(){return{controller:new qD,data:new Map,refCount:0}}function eu(i){i.refCount--,i.refCount===0&&HD(GD,function(){i.controller.abort()})}var tu=null,Wp=0,ol=0,ll=null;function $D(i,a){if(tu===null){var l=tu=[];Wp=0,ol=ny(),ll={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Wp++,a.then(kE,kE),a}function kE(){if(--Wp===0&&tu!==null){ll!==null&&(ll.status="fulfilled");var i=tu;tu=null,ol=0,ll=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function KD(i,a){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var LE=D.S;D.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&$D(i,a),LE!==null&&LE(i,a)};var Ua=be(null);function Xp(){var i=Ua.current;return i!==null?i:ht.pooledCache}function Tf(i,a){a===null?Ce(Ua,Ua.current):Ce(Ua,a.pool)}function UE(){var i=Xp();return i===null?null:{parent:Ht._currentValue,pool:i}}var _s=0,Fe=null,ct=null,Pt=null,Sf=!1,cl=!1,ja=!1,Af=0,nu=0,ul=null,YD=0;function Dt(){throw Error(r(321))}function Zp(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!Un(i[l],a[l]))return!1;return!0}function Jp(i,a,l,u,p,g){return _s=g,Fe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,D.H=i===null||i.memoizedState===null?Ba:ws,ja=!1,g=l(u,p),ja=!1,cl&&(g=BE(a,l,u,p)),jE(i),g}function jE(i){D.H=Xr;var a=ct!==null&&ct.next!==null;if(_s=0,Pt=ct=Fe=null,Sf=!1,nu=0,ul=null,a)throw Error(r(300));i===null||Xt||(i=i.dependencies,i!==null&&Mf(i)&&(Xt=!0))}function BE(i,a,l,u){Fe=i;var p=0;do{if(cl&&(ul=null),nu=0,cl=!1,25<=p)throw Error(r(301));if(p+=1,Pt=ct=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}D.H=Fa,g=a(l,u)}while(cl);return g}function QD(){var i=D.H,a=i.useState()[0];return a=typeof a.then=="function"?ru(a):a,i=i.useState()[0],(ct!==null?ct.memoizedState:null)!==i&&(Fe.flags|=1024),a}function eg(){var i=Af!==0;return Af=0,i}function tg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function ng(i){if(Sf){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Sf=!1}_s=0,Pt=ct=Fe=null,cl=!1,nu=Af=0,ul=null}function Dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Fe.memoizedState=Pt=i:Pt=Pt.next=i,Pt}function Ot(){if(ct===null){var i=Fe.alternate;i=i!==null?i.memoizedState:null}else i=ct.next;var a=Pt===null?Fe.memoizedState:Pt.next;if(a!==null)Pt=a,ct=i;else{if(i===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));ct=i,i={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Pt===null?Fe.memoizedState=Pt=i:Pt=Pt.next=i}return Pt}var If;If=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ru(i){var a=nu;return nu+=1,ul===null&&(ul=[]),i=CE(ul,i,a),a=Fe,(Pt===null?a.memoizedState:Pt.next)===null&&(a=a.alternate,D.H=a===null||a.memoizedState===null?Ba:ws),i}function Rf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ru(i);if(i.$$typeof===b)return cn(i)}throw Error(r(438,String(i)))}function rg(i){var a=null,l=Fe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=Fe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=If(),Fe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),u=0;u<i;u++)l[u]=$;return a.index++,l}function Ii(i,a){return typeof a=="function"?a(i):a}function xf(i){var a=Ot();return ig(a,ct,i)}function ig(i,a,l){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var p=i.baseQueue,g=u.pending;if(g!==null){if(p!==null){var S=p.next;p.next=g.next,g.next=S}a.baseQueue=p=g,u.pending=null}if(g=i.baseState,p===null)i.memoizedState=g;else{a=p.next;var N=S=null,j=null,H=a,ie=!1;do{var ce=H.lane&-536870913;if(ce!==H.lane?(Ze&ce)===ce:(_s&ce)===ce){var J=H.revertLane;if(J===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ce===ol&&(ie=!0);else if((_s&J)===J){H=H.next,J===ol&&(ie=!0);continue}else ce={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(N=j=ce,S=g):j=j.next=ce,Fe.lanes|=J,Cs|=J;ce=H.action,ja&&l(g,ce),g=H.hasEagerState?H.eagerState:l(g,ce)}else J={lane:ce,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(N=j=J,S=g):j=j.next=J,Fe.lanes|=ce,Cs|=ce;H=H.next}while(H!==null&&H!==a);if(j===null?S=g:j.next=N,!Un(g,i.memoizedState)&&(Xt=!0,ie&&(l=ll,l!==null)))throw l;i.memoizedState=g,i.baseState=S,i.baseQueue=j,u.lastRenderedState=g}return p===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function sg(i){var a=Ot(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var u=l.dispatch,p=l.pending,g=a.memoizedState;if(p!==null){l.pending=null;var S=p=p.next;do g=i(g,S.action),S=S.next;while(S!==p);Un(g,a.memoizedState)||(Xt=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,u]}function FE(i,a,l){var u=Fe,p=Ot(),g=nt;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=a();var S=!Un((ct||p).memoizedState,l);if(S&&(p.memoizedState=l,Xt=!0),p=p.queue,lg(HE.bind(null,u,p,i),[i]),p.getSnapshot!==a||S||Pt!==null&&Pt.memoizedState.tag&1){if(u.flags|=2048,dl(9,qE.bind(null,u,p,l,a),{destroy:void 0},null),ht===null)throw Error(r(349));g||(_s&60)!==0||zE(u,a,l)}return l}function zE(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Fe.updateQueue,a===null?(a=If(),Fe.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function qE(i,a,l,u){a.value=l,a.getSnapshot=u,GE(a)&&$E(i)}function HE(i,a,l){return l(function(){GE(a)&&$E(i)})}function GE(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!Un(i,l)}catch{return!0}}function $E(i){var a=gs(i,2);a!==null&&Tn(a,i,2)}function ag(i){var a=Dn();if(typeof i=="function"){var l=i;if(i=l(),ja){Ur(!0);try{l()}finally{Ur(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:i},a}function KE(i,a,l,u){return i.baseState=l,ig(i,ct,typeof u=="function"?u:Ii)}function WD(i,a,l,u,p){if(Df(i))throw Error(r(485));if(i=a.action,i!==null){var g={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};D.T!==null?l(!0):g.isTransition=!1,u(g),l=a.pending,l===null?(g.next=a.pending=g,YE(a,g)):(g.next=l.next,a.pending=l.next=g)}}function YE(i,a){var l=a.action,u=a.payload,p=i.state;if(a.isTransition){var g=D.T,S={};D.T=S;try{var N=l(p,u),j=D.S;j!==null&&j(S,N),QE(i,a,N)}catch(H){og(i,a,H)}finally{D.T=g}}else try{g=l(p,u),QE(i,a,g)}catch(H){og(i,a,H)}}function QE(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){WE(i,a,u)},function(u){return og(i,a,u)}):WE(i,a,l)}function WE(i,a,l){a.status="fulfilled",a.value=l,XE(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,YE(i,l)))}function og(i,a,l){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,XE(a),a=a.next;while(a!==u)}i.action=null}function XE(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function ZE(i,a){return a}function JE(i,a){if(nt){var l=ht.formState;if(l!==null){e:{var u=Fe;if(nt){if(rn){t:{for(var p=rn,g=Qr;p.nodeType!==8;){if(!g){p=null;break t}if(p=Ar(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){rn=Ar(p.nextSibling),u=p.data==="F!";break e}}ka(u)}u=!1}u&&(a=l[0])}}return l=Dn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZE,lastRenderedState:a},l.queue=u,l=yb.bind(null,Fe,u),u.dispatch=l,u=ag(!1),g=hg.bind(null,Fe,!1,u.queue),u=Dn(),p={state:a,dispatch:null,action:i,pending:null},u.queue=p,l=WD.bind(null,Fe,p,g,l),p.dispatch=l,u.memoizedState=i,[a,l,!1]}function eb(i){var a=Ot();return tb(a,ct,i)}function tb(i,a,l){a=ig(i,a,ZE)[0],i=xf(Ii)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?ru(a):a;var u=Ot(),p=u.queue,g=p.dispatch;return l!==u.memoizedState&&(Fe.flags|=2048,dl(9,XD.bind(null,p,l),{destroy:void 0},null)),[a,g,i]}function XD(i,a){i.action=a}function nb(i){var a=Ot(),l=ct;if(l!==null)return tb(a,l,i);Ot(),a=a.memoizedState,l=Ot();var u=l.queue.dispatch;return l.memoizedState=i,[a,u,!1]}function dl(i,a,l,u){return i={tag:i,create:a,inst:l,deps:u,next:null},a=Fe.updateQueue,a===null&&(a=If(),Fe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,a.lastEffect=i),i}function rb(){return Ot().memoizedState}function Cf(i,a,l,u){var p=Dn();Fe.flags|=i,p.memoizedState=dl(1|a,l,{destroy:void 0},u===void 0?null:u)}function Nf(i,a,l,u){var p=Ot();u=u===void 0?null:u;var g=p.memoizedState.inst;ct!==null&&u!==null&&Zp(u,ct.memoizedState.deps)?p.memoizedState=dl(a,l,g,u):(Fe.flags|=i,p.memoizedState=dl(1|a,l,g,u))}function ib(i,a){Cf(8390656,8,i,a)}function lg(i,a){Nf(2048,8,i,a)}function sb(i,a){return Nf(4,2,i,a)}function ab(i,a){return Nf(4,4,i,a)}function ob(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function lb(i,a,l){l=l!=null?l.concat([i]):null,Nf(4,4,ob.bind(null,a,i),l)}function cg(){}function cb(i,a){var l=Ot();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Zp(a,u[1])?u[0]:(l.memoizedState=[i,a],i)}function ub(i,a){var l=Ot();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Zp(a,u[1]))return u[0];if(u=i(),ja){Ur(!0);try{i()}finally{Ur(!1)}}return l.memoizedState=[u,a],u}function ug(i,a,l){return l===void 0||(_s&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=f0(),Fe.lanes|=i,Cs|=i,l)}function db(i,a,l,u){return Un(l,a)?l:al.current!==null?(i=ug(i,l,u),Un(i,a)||(Xt=!0),i):(_s&42)===0?(Xt=!0,i.memoizedState=l):(i=f0(),Fe.lanes|=i,Cs|=i,a)}function fb(i,a,l,u,p){var g=ee.p;ee.p=g!==0&&8>g?g:8;var S=D.T,N={};D.T=N,hg(i,!1,a,l);try{var j=p(),H=D.S;if(H!==null&&H(N,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ie=KD(j,u);iu(i,a,ie,zn(i))}else iu(i,a,u,zn(i))}catch(ce){iu(i,a,{then:function(){},status:"rejected",reason:ce},zn())}finally{ee.p=g,D.T=S}}function ZD(){}function dg(i,a,l,u){if(i.tag!==5)throw Error(r(476));var p=hb(i).queue;fb(i,p,a,fe,l===null?ZD:function(){return mb(i),l(u)})}function hb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:fe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function mb(i){var a=hb(i).next.queue;iu(i,a,{},zn())}function fg(){return cn(Su)}function pb(){return Ot().memoizedState}function gb(){return Ot().memoizedState}function JD(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=zn();i=Ts(l);var u=Ss(a,i,l);u!==null&&(Tn(u,a,l),ou(u,a,l)),a={cache:Qp()},i.payload=a;return}a=a.return}}function eP(i,a,l){var u=zn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Df(i)?vb(a,l):(l=zp(i,a,l,u),l!==null&&(Tn(l,i,u),_b(l,a,u)))}function yb(i,a,l){var u=zn();iu(i,a,l,u)}function iu(i,a,l,u){var p={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Df(i))vb(a,p);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var S=a.lastRenderedState,N=g(S,l);if(p.hasEagerState=!0,p.eagerState=N,Un(N,S))return mf(i,a,p,0),ht===null&&hf(),!1}catch{}finally{}if(l=zp(i,a,p,u),l!==null)return Tn(l,i,u),_b(l,a,u),!0}return!1}function hg(i,a,l,u){if(u={lane:2,revertLane:ny(),action:u,hasEagerState:!1,eagerState:null,next:null},Df(i)){if(a)throw Error(r(479))}else a=zp(i,l,u,2),a!==null&&Tn(a,i,2)}function Df(i){var a=i.alternate;return i===Fe||a!==null&&a===Fe}function vb(i,a){cl=Sf=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function _b(i,a,l){if((l&4194176)!==0){var u=a.lanes;u&=i.pendingLanes,l|=u,a.lanes=l,as(i,l)}}var Xr={readContext:cn,use:Rf,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt};Xr.useCacheRefresh=Dt,Xr.useMemoCache=Dt,Xr.useHostTransitionStatus=Dt,Xr.useFormState=Dt,Xr.useActionState=Dt,Xr.useOptimistic=Dt;var Ba={readContext:cn,use:Rf,useCallback:function(i,a){return Dn().memoizedState=[i,a===void 0?null:a],i},useContext:cn,useEffect:ib,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Cf(4194308,4,ob.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Cf(4194308,4,i,a)},useInsertionEffect:function(i,a){Cf(4,2,i,a)},useMemo:function(i,a){var l=Dn();a=a===void 0?null:a;var u=i();if(ja){Ur(!0);try{i()}finally{Ur(!1)}}return l.memoizedState=[u,a],u},useReducer:function(i,a,l){var u=Dn();if(l!==void 0){var p=l(a);if(ja){Ur(!0);try{l(a)}finally{Ur(!1)}}}else p=a;return u.memoizedState=u.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},u.queue=i,i=i.dispatch=eP.bind(null,Fe,i),[u.memoizedState,i]},useRef:function(i){var a=Dn();return i={current:i},a.memoizedState=i},useState:function(i){i=ag(i);var a=i.queue,l=yb.bind(null,Fe,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:cg,useDeferredValue:function(i,a){var l=Dn();return ug(l,i,a)},useTransition:function(){var i=ag(!1);return i=fb.bind(null,Fe,i.queue,!0,!1),Dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var u=Fe,p=Dn();if(nt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),ht===null)throw Error(r(349));(Ze&60)!==0||zE(u,a,l)}p.memoizedState=l;var g={value:l,getSnapshot:a};return p.queue=g,ib(HE.bind(null,u,g,i),[i]),u.flags|=2048,dl(9,qE.bind(null,u,g,l,a),{destroy:void 0},null),l},useId:function(){var i=Dn(),a=ht.identifierPrefix;if(nt){var l=Si,u=Ti;l=(u&~(1<<32-_n(u)-1)).toString(32)+l,a=":"+a+"R"+l,l=Af++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=YD++,a=":"+a+"r"+l.toString(32)+":";return i.memoizedState=a},useCacheRefresh:function(){return Dn().memoizedState=JD.bind(null,Fe)}};Ba.useMemoCache=rg,Ba.useHostTransitionStatus=fg,Ba.useFormState=JE,Ba.useActionState=JE,Ba.useOptimistic=function(i){var a=Dn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=hg.bind(null,Fe,!0,l),l.dispatch=a,[i,a]};var ws={readContext:cn,use:Rf,useCallback:cb,useContext:cn,useEffect:lg,useImperativeHandle:lb,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:ub,useReducer:xf,useRef:rb,useState:function(){return xf(Ii)},useDebugValue:cg,useDeferredValue:function(i,a){var l=Ot();return db(l,ct.memoizedState,i,a)},useTransition:function(){var i=xf(Ii)[0],a=Ot().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:FE,useId:pb};ws.useCacheRefresh=gb,ws.useMemoCache=rg,ws.useHostTransitionStatus=fg,ws.useFormState=eb,ws.useActionState=eb,ws.useOptimistic=function(i,a){var l=Ot();return KE(l,ct,i,a)};var Fa={readContext:cn,use:Rf,useCallback:cb,useContext:cn,useEffect:lg,useImperativeHandle:lb,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:ub,useReducer:sg,useRef:rb,useState:function(){return sg(Ii)},useDebugValue:cg,useDeferredValue:function(i,a){var l=Ot();return ct===null?ug(l,i,a):db(l,ct.memoizedState,i,a)},useTransition:function(){var i=sg(Ii)[0],a=Ot().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:FE,useId:pb};Fa.useCacheRefresh=gb,Fa.useMemoCache=rg,Fa.useHostTransitionStatus=fg,Fa.useFormState=nb,Fa.useActionState=nb,Fa.useOptimistic=function(i,a){var l=Ot();return ct!==null?KE(l,ct,i,a):(l.baseState=i,[i,l.queue.dispatch])};function mg(i,a,l,u){a=i.memoizedState,l=l(u,a),l=l==null?a:U({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var pg={isMounted:function(i){return(i=i._reactInternals)?se(i)===i:!1},enqueueSetState:function(i,a,l){i=i._reactInternals;var u=zn(),p=Ts(u);p.payload=a,l!=null&&(p.callback=l),a=Ss(i,p,u),a!==null&&(Tn(a,i,u),ou(a,i,u))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var u=zn(),p=Ts(u);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Ss(i,p,u),a!==null&&(Tn(a,i,u),ou(a,i,u))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=zn(),u=Ts(l);u.tag=2,a!=null&&(u.callback=a),a=Ss(i,u,l),a!==null&&(Tn(a,i,l),ou(a,i,l))}};function wb(i,a,l,u,p,g,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,g,S):a.prototype&&a.prototype.isPureReactComponent?!Gc(l,u)||!Gc(p,g):!0}function Eb(i,a,l,u){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==i&&pg.enqueueReplaceState(a,a.state,null)}function za(i,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(i=i.defaultProps){l===a&&(l=U({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}var Pf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function bb(i){Pf(i)}function Tb(i){console.error(i)}function Sb(i){Pf(i)}function Of(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Ab(i,a,l){try{var u=i.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function gg(i,a,l){return l=Ts(l),l.tag=3,l.payload={element:null},l.callback=function(){Of(i,a)},l}function Ib(i){return i=Ts(i),i.tag=3,i}function Rb(i,a,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;i.payload=function(){return p(g)},i.callback=function(){Ab(a,l,u)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Ab(a,l,u),typeof p!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var N=u.stack;this.componentDidCatch(u.value,{componentStack:N!==null?N:""})})}function tP(i,a,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&au(a,l,p,!0),l=ar.current,l!==null){switch(l.tag){case 13:return Wr===null?Xg():l.alternate===null&&It===0&&(It=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===$p?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),Jg(i,u,p)),!1;case 22:return l.flags|=65536,u===$p?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),Jg(i,u,p)),!1}throw Error(r(435,l.tag))}return Jg(i,u,p),Xg(),!1}if(nt)return a=ar.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==Gp&&(i=Error(r(422),{cause:u}),Qc(rr(i,l)))):(u!==Gp&&(a=Error(r(423),{cause:u}),Qc(rr(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,u=rr(u,l),p=gg(i.stateNode,u,p),Dg(i,p),It!==4&&(It=2)),!1;var g=Error(r(520),{cause:u});if(g=rr(g,l),pu===null?pu=[g]:pu.push(g),It!==4&&(It=2),a===null)return!0;u=rr(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=gg(l.stateNode,u,i),Dg(l,i),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ns===null||!Ns.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Ib(p),Rb(p,i,l,u),Dg(l,p),!1}l=l.return}while(l!==null);return!1}var xb=Error(r(461)),Xt=!1;function sn(i,a,l,u){a.child=i===null?OE(a,null,l,u):La(a,i.child,l,u)}function Cb(i,a,l,u,p){l=l.render;var g=a.ref;if("ref"in u){var S={};for(var N in u)N!=="ref"&&(S[N]=u[N])}else S=u;return Ha(a),u=Jp(i,a,l,S,g,p),N=eg(),i!==null&&!Xt?(tg(i,a,p),Ri(i,a,p)):(nt&&N&&qp(a),a.flags|=1,sn(i,a,u,p),a.child)}function Nb(i,a,l,u,p){if(i===null){var g=l.type;return typeof g=="function"&&!jg(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,Db(i,a,g,u,p)):(i=Uf(l.type,null,u,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(g=i.child,!Ag(i,p)){var S=g.memoizedProps;if(l=l.compare,l=l!==null?l:Gc,l(S,u)&&i.ref===a.ref)return Ri(i,a,p)}return a.flags|=1,i=xs(g,u),i.ref=a.ref,i.return=a,a.child=i}function Db(i,a,l,u,p){if(i!==null){var g=i.memoizedProps;if(Gc(g,u)&&i.ref===a.ref)if(Xt=!1,a.pendingProps=u=g,Ag(i,p))(i.flags&131072)!==0&&(Xt=!0);else return a.lanes=i.lanes,Ri(i,a,p)}return yg(i,a,l,u,p)}function Pb(i,a,l){var u=a.pendingProps,p=u.children,g=(a.stateNode._pendingVisibility&2)!==0,S=i!==null?i.memoizedState:null;if(su(i,a),u.mode==="hidden"||g){if((a.flags&128)!==0){if(u=S!==null?S.baseLanes|l:l,i!==null){for(p=a.child=i.child,g=0;p!==null;)g=g|p.lanes|p.childLanes,p=p.sibling;a.childLanes=g&~u}else a.childLanes=0,a.child=null;return Ob(i,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Tf(a,S!==null?S.cachePool:null),S!==null?ME(a,S):Kp(),VE(a);else return a.lanes=a.childLanes=536870912,Ob(i,a,S!==null?S.baseLanes|l:l,l)}else S!==null?(Tf(a,S.cachePool),ME(a,S),vs(),a.memoizedState=null):(i!==null&&Tf(a,null),Kp(),vs());return sn(i,a,p,l),a.child}function Ob(i,a,l,u){var p=Xp();return p=p===null?null:{parent:Ht._currentValue,pool:p},a.memoizedState={baseLanes:l,cachePool:p},i!==null&&Tf(a,null),Kp(),VE(a),i!==null&&au(i,a,u,!0),null}function su(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=2097664)}}function yg(i,a,l,u,p){return Ha(a),l=Jp(i,a,l,u,void 0,p),u=eg(),i!==null&&!Xt?(tg(i,a,p),Ri(i,a,p)):(nt&&u&&qp(a),a.flags|=1,sn(i,a,l,p),a.child)}function Mb(i,a,l,u,p,g){return Ha(a),a.updateQueue=null,l=BE(a,u,l,p),jE(i),u=eg(),i!==null&&!Xt?(tg(i,a,g),Ri(i,a,g)):(nt&&u&&qp(a),a.flags|=1,sn(i,a,l,g),a.child)}function Vb(i,a,l,u,p){if(Ha(a),a.stateNode===null){var g=nl,S=l.contextType;typeof S=="object"&&S!==null&&(g=cn(S)),g=new l(u,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=pg,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=u,g.state=a.memoizedState,g.refs={},Cg(a),S=l.contextType,g.context=typeof S=="object"&&S!==null?cn(S):nl,g.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(mg(a,l,S,u),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&pg.enqueueReplaceState(g,g.state,null),cu(a,u,g,p),lu(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(i===null){g=a.stateNode;var N=a.memoizedProps,j=za(l,N);g.props=j;var H=g.context,ie=l.contextType;S=nl,typeof ie=="object"&&ie!==null&&(S=cn(ie));var ce=l.getDerivedStateFromProps;ie=typeof ce=="function"||typeof g.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,ie||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N||H!==S)&&Eb(a,g,u,S),bs=!1;var J=a.memoizedState;g.state=J,cu(a,u,g,p),lu(),H=a.memoizedState,N||J!==H||bs?(typeof ce=="function"&&(mg(a,l,ce,u),H=a.memoizedState),(j=bs||wb(a,l,j,u,J,H,S))?(ie||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=H),g.props=u,g.state=H,g.context=S,u=j):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{g=a.stateNode,Ng(i,a),S=a.memoizedProps,ie=za(l,S),g.props=ie,ce=a.pendingProps,J=g.context,H=l.contextType,j=nl,typeof H=="object"&&H!==null&&(j=cn(H)),N=l.getDerivedStateFromProps,(H=typeof N=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==ce||J!==j)&&Eb(a,g,u,j),bs=!1,J=a.memoizedState,g.state=J,cu(a,u,g,p),lu();var ne=a.memoizedState;S!==ce||J!==ne||bs||i!==null&&i.dependencies!==null&&Mf(i.dependencies)?(typeof N=="function"&&(mg(a,l,N,u),ne=a.memoizedState),(ie=bs||wb(a,l,ie,u,J,ne,j)||i!==null&&i.dependencies!==null&&Mf(i.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ne,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ne,j)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===i.memoizedProps&&J===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&J===i.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ne),g.props=u,g.state=ne,g.context=j,u=ie):(typeof g.componentDidUpdate!="function"||S===i.memoizedProps&&J===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&J===i.memoizedState||(a.flags|=1024),u=!1)}return g=u,su(i,a),u=(a.flags&128)!==0,g||u?(g=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,i!==null&&u?(a.child=La(a,i.child,null,p),a.child=La(a,null,l,p)):sn(i,a,l,p),a.memoizedState=g.state,i=a.child):i=Ri(i,a,p),i}function kb(i,a,l,u){return Yc(),a.flags|=256,sn(i,a,l,u),a.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function _g(i){return{baseLanes:i,cachePool:UE()}}function wg(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=ur),i}function Lb(i,a,l){var u=a.pendingProps,p=!1,g=(a.flags&128)!==0,S;if((S=g)||(S=i!==null&&i.memoizedState===null?!1:(qt.current&2)!==0),S&&(p=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,i===null){if(nt){if(p?ys(a):vs(),nt){var N=rn,j;if(j=N){e:{for(j=N,N=Qr;j.nodeType!==8;){if(!N){N=null;break e}if(j=Ar(j.nextSibling),j===null){N=null;break e}}N=j}N!==null?(a.memoizedState={dehydrated:N,treeContext:Ma!==null?{id:Ti,overflow:Si}:null,retryLane:536870912},j=cr(18,null,null,0),j.stateNode=N,j.return=a,a.child=j,bn=a,rn=null,j=!0):j=!1}j||ka(a)}if(N=a.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return N.data==="$!"?a.lanes=16:a.lanes=536870912,null;Ai(a)}return N=u.children,u=u.fallback,p?(vs(),p=a.mode,N=bg({mode:"hidden",children:N},p),u=$a(u,p,l,null),N.return=a,u.return=a,N.sibling=u,a.child=N,p=a.child,p.memoizedState=_g(l),p.childLanes=wg(i,S,l),a.memoizedState=vg,u):(ys(a),Eg(a,N))}if(j=i.memoizedState,j!==null&&(N=j.dehydrated,N!==null)){if(g)a.flags&256?(ys(a),a.flags&=-257,a=Tg(i,a,l)):a.memoizedState!==null?(vs(),a.child=i.child,a.flags|=128,a=null):(vs(),p=u.fallback,N=a.mode,u=bg({mode:"visible",children:u.children},N),p=$a(p,N,l,null),p.flags|=2,u.return=a,p.return=a,u.sibling=p,a.child=u,La(a,i.child,null,l),u=a.child,u.memoizedState=_g(l),u.childLanes=wg(i,S,l),a.memoizedState=vg,a=p);else if(ys(a),N.data==="$!"){if(S=N.nextSibling&&N.nextSibling.dataset,S)var H=S.dgst;S=H,u=Error(r(419)),u.stack="",u.digest=S,Qc({value:u,source:null,stack:null}),a=Tg(i,a,l)}else if(Xt||au(i,a,l,!1),S=(l&i.childLanes)!==0,Xt||S){if(S=ht,S!==null){if(u=l&-l,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(S.suspendedLanes|l))!==0?0:u,u!==0&&u!==j.retryLane)throw j.retryLane=u,gs(i,u),Tn(S,i,u),xb}N.data==="$?"||Xg(),a=Tg(i,a,l)}else N.data==="$?"?(a.flags|=128,a.child=i.child,a=gP.bind(null,i),N._reactRetry=a,a=null):(i=j.treeContext,rn=Ar(N.nextSibling),bn=a,nt=!0,Tr=null,Qr=!1,i!==null&&(ir[sr++]=Ti,ir[sr++]=Si,ir[sr++]=Ma,Ti=i.id,Si=i.overflow,Ma=a),a=Eg(a,u.children),a.flags|=4096);return a}return p?(vs(),p=u.fallback,N=a.mode,j=i.child,H=j.sibling,u=xs(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&31457280,H!==null?p=xs(H,p):(p=$a(p,N,l,null),p.flags|=2),p.return=a,u.return=a,u.sibling=p,a.child=u,u=p,p=a.child,N=i.child.memoizedState,N===null?N=_g(l):(j=N.cachePool,j!==null?(H=Ht._currentValue,j=j.parent!==H?{parent:H,pool:H}:j):j=UE(),N={baseLanes:N.baseLanes|l,cachePool:j}),p.memoizedState=N,p.childLanes=wg(i,S,l),a.memoizedState=vg,u):(ys(a),l=i.child,i=l.sibling,l=xs(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,i!==null&&(S=a.deletions,S===null?(a.deletions=[i],a.flags|=16):S.push(i)),a.child=l,a.memoizedState=null,l)}function Eg(i,a){return a=bg({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function bg(i,a){return c0(i,a,0,null)}function Tg(i,a,l){return La(a,i.child,null,l),i=Eg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Ub(i,a,l){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a),Rg(i.return,a,l)}function Sg(i,a,l,u,p){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=p)}function jb(i,a,l){var u=a.pendingProps,p=u.revealOrder,g=u.tail;if(sn(i,a,u.children,l),u=qt.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ub(i,l,a);else if(i.tag===19)Ub(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(Ce(qt,u),p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&bf(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Sg(a,!1,p,l,g);break;case"backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&bf(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Sg(a,!0,l,null,g);break;case"together":Sg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ri(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Cs|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(au(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=xs(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=xs(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Ag(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Mf(i)))}function nP(i,a,l){switch(a.tag){case 3:xn(a,a.stateNode.containerInfo),Es(a,Ht,i.memoizedState.cache),Yc();break;case 27:case 5:vr(a);break;case 4:xn(a,a.stateNode.containerInfo);break;case 10:Es(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(ys(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Lb(i,a,l):(ys(a),i=Ri(i,a,l),i!==null?i.sibling:null);ys(a);break;case 19:var p=(i.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(au(i,a,l,!1),u=(l&a.childLanes)!==0),p){if(u)return jb(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ce(qt,qt.current),u)break;return null;case 22:case 23:return a.lanes=0,Pb(i,a,l);case 24:Es(a,Ht,i.memoizedState.cache)}return Ri(i,a,l)}function Bb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)Xt=!0;else{if(!Ag(i,l)&&(a.flags&128)===0)return Xt=!1,nP(i,a,l);Xt=(i.flags&131072)!==0}else Xt=!1,nt&&(a.flags&1048576)!==0&&SE(a,yf,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var u=a.elementType,p=u._init;if(u=p(u._payload),a.type=u,typeof u=="function")jg(u)?(i=za(u,i),a.tag=1,a=Vb(null,a,u,i,l)):(a.tag=0,a=yg(null,a,u,i,l));else{if(u!=null){if(p=u.$$typeof,p===A){a.tag=11,a=Cb(null,a,u,i,l);break e}else if(p===C){a.tag=14,a=Nb(null,a,u,i,l);break e}}throw a=P(u)||u,Error(r(306,a,""))}}return a;case 0:return yg(i,a,a.type,a.pendingProps,l);case 1:return u=a.type,p=za(u,a.pendingProps),Vb(i,a,u,p,l);case 3:e:{if(xn(a,a.stateNode.containerInfo),i===null)throw Error(r(387));var g=a.pendingProps;p=a.memoizedState,u=p.element,Ng(i,a),cu(a,g,null,l);var S=a.memoizedState;if(g=S.cache,Es(a,Ht,g),g!==p.cache&&xg(a,[Ht],l,!0),lu(),g=S.element,p.isDehydrated)if(p={element:g,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=kb(i,a,g,l);break e}else if(g!==u){u=rr(Error(r(424)),a),Qc(u),a=kb(i,a,g,l);break e}else for(rn=Ar(a.stateNode.containerInfo.firstChild),bn=a,nt=!0,Tr=null,Qr=!0,l=OE(a,null,g,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Yc(),g===u){a=Ri(i,a,l);break e}sn(i,a,g,l)}a=a.child}return a;case 26:return su(i,a),i===null?(l=q0(a.type,null,a.pendingProps,null))?a.memoizedState=l:nt||(l=a.type,i=a.pendingProps,u=Wf(ft.current).createElement(l),u[Yt]=a,u[Bt]=i,an(u,l,i),wt(u),a.stateNode=u):a.memoizedState=q0(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return vr(a),i===null&&nt&&(u=a.stateNode=B0(a.type,a.pendingProps,ft.current),bn=a,Qr=!0,rn=Ar(u.firstChild)),u=a.pendingProps.children,i!==null||nt?sn(i,a,u,l):a.child=La(a,null,u,l),su(i,a),a.child;case 5:return i===null&&nt&&((p=u=rn)&&(u=PP(u,a.type,a.pendingProps,Qr),u!==null?(a.stateNode=u,bn=a,rn=Ar(u.firstChild),Qr=!1,p=!0):p=!1),p||ka(a)),vr(a),p=a.type,g=a.pendingProps,S=i!==null?i.memoizedProps:null,u=g.children,dy(p,g)?u=null:S!==null&&dy(p,S)&&(a.flags|=32),a.memoizedState!==null&&(p=Jp(i,a,QD,null,null,l),Su._currentValue=p),su(i,a),sn(i,a,u,l),a.child;case 6:return i===null&&nt&&((i=l=rn)&&(l=OP(l,a.pendingProps,Qr),l!==null?(a.stateNode=l,bn=a,rn=null,i=!0):i=!1),i||ka(a)),null;case 13:return Lb(i,a,l);case 4:return xn(a,a.stateNode.containerInfo),u=a.pendingProps,i===null?a.child=La(a,null,u,l):sn(i,a,u,l),a.child;case 11:return Cb(i,a,a.type,a.pendingProps,l);case 7:return sn(i,a,a.pendingProps,l),a.child;case 8:return sn(i,a,a.pendingProps.children,l),a.child;case 12:return sn(i,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Es(a,a.type,u.value),sn(i,a,u.children,l),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,Ha(a),p=cn(p),u=u(p),a.flags|=1,sn(i,a,u,l),a.child;case 14:return Nb(i,a,a.type,a.pendingProps,l);case 15:return Db(i,a,a.type,a.pendingProps,l);case 19:return jb(i,a,l);case 22:return Pb(i,a,l);case 24:return Ha(a),u=cn(Ht),i===null?(p=Xp(),p===null&&(p=ht,g=Qp(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),a.memoizedState={parent:u,cache:p},Cg(a),Es(a,Ht,p)):((i.lanes&l)!==0&&(Ng(i,a),cu(a,null,null,l),lu()),p=i.memoizedState,g=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Es(a,Ht,u)):(u=g.cache,Es(a,Ht,u),u!==p.cache&&xg(a,[Ht],l,!0))),sn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var Ig=be(null),qa=null,xi=null;function Es(i,a,l){Ce(Ig,a._currentValue),a._currentValue=l}function Ci(i){i._currentValue=Ig.current,Be(Ig)}function Rg(i,a,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),i===l)break;i=i.return}}function xg(i,a,l,u){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var g=p.dependencies;if(g!==null){var S=p.child;g=g.firstContext;e:for(;g!==null;){var N=g;g=p;for(var j=0;j<a.length;j++)if(N.context===a[j]){g.lanes|=l,N=g.alternate,N!==null&&(N.lanes|=l),Rg(g.return,l,i),u||(S=null);break e}g=N.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(r(341));S.lanes|=l,g=S.alternate,g!==null&&(g.lanes|=l),Rg(S,l,i),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===i){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function au(i,a,l,u){i=null;for(var p=a,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var N=p.type;Un(p.pendingProps.value,S.value)||(i!==null?i.push(N):i=[N])}}else if(p===Ut.current){if(S=p.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Su):i=[Su])}p=p.return}i!==null&&xg(a,i,l,u),a.flags|=262144}function Mf(i){for(i=i.firstContext;i!==null;){if(!Un(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ha(i){qa=i,xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function cn(i){return Fb(qa,i)}function Vf(i,a){return qa===null&&Ha(i),Fb(i,a)}function Fb(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},xi===null){if(i===null)throw Error(r(308));xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else xi=xi.next=a;return l}var bs=!1;function Cg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ng(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ts(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ss(i,a,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(bt&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=pf(i),bE(i,null,l),a}return mf(i,u,a,l),pf(i)}function ou(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194176)!==0)){var u=a.lanes;u&=i.pendingLanes,l|=u,a.lanes=l,as(i,l)}}function Dg(i,a){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=S:g=g.next=S,l=l.next}while(l!==null);g===null?p=g=a:g=g.next=a}else p=g=a;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Pg=!1;function lu(){if(Pg){var i=ll;if(i!==null)throw i}}function cu(i,a,l,u){Pg=!1;var p=i.updateQueue;bs=!1;var g=p.firstBaseUpdate,S=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var j=N,H=j.next;j.next=null,S===null?g=H:S.next=H,S=j;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,N=ie.lastBaseUpdate,N!==S&&(N===null?ie.firstBaseUpdate=H:N.next=H,ie.lastBaseUpdate=j))}if(g!==null){var ce=p.baseState;S=0,ie=H=j=null,N=g;do{var J=N.lane&-536870913,ne=J!==N.lane;if(ne?(Ze&J)===J:(u&J)===J){J!==0&&J===ol&&(Pg=!0),ie!==null&&(ie=ie.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Re=i,ke=N;J=a;var Rt=l;switch(ke.tag){case 1:if(Re=ke.payload,typeof Re=="function"){ce=Re.call(Rt,ce,J);break e}ce=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=ke.payload,J=typeof Re=="function"?Re.call(Rt,ce,J):Re,J==null)break e;ce=U({},ce,J);break e;case 2:bs=!0}}J=N.callback,J!==null&&(i.flags|=64,ne&&(i.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[J]:ne.push(J))}else ne={lane:J,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ie===null?(H=ie=ne,j=ce):ie=ie.next=ne,S|=J;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;ne=N,N=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);ie===null&&(j=ce),p.baseState=j,p.firstBaseUpdate=H,p.lastBaseUpdate=ie,g===null&&(p.shared.lanes=0),Cs|=S,i.lanes=S,i.memoizedState=ce}}function zb(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function qb(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)zb(l[i],a)}function uu(i,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&i)===i){u=void 0;var g=l.create,S=l.inst;u=g(),S.destroy=u}l=l.next}while(l!==p)}}catch(N){dt(a,a.return,N)}}function As(i,a,l){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&i)===i){var S=u.inst,N=S.destroy;if(N!==void 0){S.destroy=void 0,p=a;var j=l;try{N()}catch(H){dt(p,j,H)}}}u=u.next}while(u!==g)}}catch(H){dt(a,a.return,H)}}function Hb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{qb(a,l)}catch(u){dt(i,i.return,u)}}}function Gb(i,a,l){l.props=za(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(u){dt(i,a,u)}}function Ga(i,a){try{var l=i.ref;if(l!==null){var u=i.stateNode;switch(i.tag){case 26:case 27:case 5:var p=u;break;default:p=u}typeof l=="function"?i.refCleanup=l(p):l.current=p}}catch(g){dt(i,a,g)}}function jn(i,a){var l=i.ref,u=i.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){dt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){dt(i,a,p)}else l.current=null}function $b(i){var a=i.type,l=i.memoizedProps,u=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){dt(i,i.return,p)}}function Kb(i,a,l){try{var u=i.stateNode;RP(u,i.type,l,a),u[Bt]=a}catch(p){dt(i,i.return,p)}}function Yb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Og(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Yb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mg(i,a,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(i,a):l.insertBefore(i,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(i,l)):(a=l,a.appendChild(i)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Qf));else if(u!==4&&u!==27&&(i=i.child,i!==null))for(Mg(i,a,l),i=i.sibling;i!==null;)Mg(i,a,l),i=i.sibling}function kf(i,a,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(u!==4&&u!==27&&(i=i.child,i!==null))for(kf(i,a,l),i=i.sibling;i!==null;)kf(i,a,l),i=i.sibling}var Ni=!1,At=!1,Vg=!1,Qb=typeof WeakSet=="function"?WeakSet:Set,Zt=null,Wb=!1;function rP(i,a){if(i=i.containerInfo,cy=nh,i=hE(i),Lp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var S=0,N=-1,j=-1,H=0,ie=0,ce=i,J=null;t:for(;;){for(var ne;ce!==l||p!==0&&ce.nodeType!==3||(N=S+p),ce!==g||u!==0&&ce.nodeType!==3||(j=S+u),ce.nodeType===3&&(S+=ce.nodeValue.length),(ne=ce.firstChild)!==null;)J=ce,ce=ne;for(;;){if(ce===i)break t;if(J===l&&++H===p&&(N=S),J===g&&++ie===u&&(j=S),(ne=ce.nextSibling)!==null)break;ce=J,J=ce.parentNode}ce=ne}l=N===-1||j===-1?null:{start:N,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(uy={focusedElem:i,selectionRange:l},nh=!1,Zt=a;Zt!==null;)if(a=Zt,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Zt=i;else for(;Zt!==null;){switch(a=Zt,g=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=a,p=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var Re=za(l.type,p,l.elementType===l.type);i=u.getSnapshotBeforeUpdate(Re,g),u.__reactInternalSnapshotBeforeUpdate=i}catch(ke){dt(l,l.return,ke)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)my(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":my(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Zt=i;break}Zt=a.return}return Re=Wb,Wb=!1,Re}function Xb(i,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Pi(i,l),u&4&&uu(5,l);break;case 1:if(Pi(i,l),u&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(N){dt(l,l.return,N)}else{var p=za(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(N){dt(l,l.return,N)}}u&64&&Hb(l),u&512&&Ga(l,l.return);break;case 3:if(Pi(i,l),u&64&&(u=l.updateQueue,u!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{qb(u,i)}catch(N){dt(l,l.return,N)}}break;case 26:Pi(i,l),u&512&&Ga(l,l.return);break;case 27:case 5:Pi(i,l),a===null&&u&4&&$b(l),u&512&&Ga(l,l.return);break;case 12:Pi(i,l);break;case 13:Pi(i,l),u&4&&e0(i,l);break;case 22:if(p=l.memoizedState!==null||Ni,!p){a=a!==null&&a.memoizedState!==null||At;var g=Ni,S=At;Ni=p,(At=a)&&!S?Is(i,l,(l.subtreeFlags&8772)!==0):Pi(i,l),Ni=g,At=S}u&512&&(l.memoizedProps.mode==="manual"?Ga(l,l.return):jn(l,l.return));break;default:Pi(i,l)}}function Zb(i){var a=i.alternate;a!==null&&(i.alternate=null,Zb(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Ea(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Mt=null,Bn=!1;function Di(i,a,l){for(l=l.child;l!==null;)Jb(i,a,l),l=l.sibling}function Jb(i,a,l){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(ts,l)}catch{}switch(l.tag){case 26:At||jn(l,a),Di(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:At||jn(l,a);var u=Mt,p=Bn;for(Mt=l.stateNode,Di(i,a,l),l=l.stateNode,a=l.attributes;a.length;)l.removeAttributeNode(a[0]);Ea(l),Mt=u,Bn=p;break;case 5:At||jn(l,a);case 6:p=Mt;var g=Bn;if(Mt=null,Di(i,a,l),Mt=p,Bn=g,Mt!==null)if(Bn)try{i=Mt,u=l.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)}catch(S){dt(l,a,S)}else try{Mt.removeChild(l.stateNode)}catch(S){dt(l,a,S)}break;case 18:Mt!==null&&(Bn?(a=Mt,l=l.stateNode,a.nodeType===8?hy(a.parentNode,l):a.nodeType===1&&hy(a,l),xu(a)):hy(Mt,l.stateNode));break;case 4:u=Mt,p=Bn,Mt=l.stateNode.containerInfo,Bn=!0,Di(i,a,l),Mt=u,Bn=p;break;case 0:case 11:case 14:case 15:At||As(2,l,a),At||As(4,l,a),Di(i,a,l);break;case 1:At||(jn(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Gb(l,a,u)),Di(i,a,l);break;case 21:Di(i,a,l);break;case 22:At||jn(l,a),At=(u=At)||l.memoizedState!==null,Di(i,a,l),At=u;break;default:Di(i,a,l)}}function e0(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{xu(i)}catch(l){dt(a,a.return,l)}}function iP(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Qb),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Qb),a;default:throw Error(r(435,i.tag))}}function kg(i,a){var l=iP(i);a.forEach(function(u){var p=yP.bind(null,i,u);l.has(u)||(l.add(u),u.then(p,p))})}function or(i,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],g=i,S=a,N=S;e:for(;N!==null;){switch(N.tag){case 27:case 5:Mt=N.stateNode,Bn=!1;break e;case 3:Mt=N.stateNode.containerInfo,Bn=!0;break e;case 4:Mt=N.stateNode.containerInfo,Bn=!0;break e}N=N.return}if(Mt===null)throw Error(r(160));Jb(g,S,p),Mt=null,Bn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)t0(a,i),a=a.sibling}var Sr=null;function t0(i,a){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:or(a,i),lr(i),u&4&&(As(3,i,i.return),uu(3,i),As(5,i,i.return));break;case 1:or(a,i),lr(i),u&512&&(At||l===null||jn(l,l.return)),u&64&&Ni&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=Sr;if(or(a,i),lr(i),u&512&&(At||l===null||jn(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=i.memoizedState,l===null)if(u===null)if(i.stateNode===null){e:{u=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[ls]||g[Yt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),an(g,u,l),g[Yt]=i,wt(g),u=g;break e;case"link":var S=$0("link","href",p).get(u+(l.href||""));if(S){for(var N=0;N<S.length;N++)if(g=S[N],g.getAttribute("href")===(l.href==null?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(N,1);break t}}g=p.createElement(u),an(g,u,l),p.head.appendChild(g);break;case"meta":if(S=$0("meta","content",p).get(u+(l.content||""))){for(N=0;N<S.length;N++)if(g=S[N],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(N,1);break t}}g=p.createElement(u),an(g,u,l),p.head.appendChild(g);break;default:throw Error(r(468,u))}g[Yt]=i,wt(g),u=g}i.stateNode=u}else K0(p,i.type,i.stateNode);else i.stateNode=G0(p,u,i.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?K0(p,i.type,i.stateNode):G0(p,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Kb(i,i.memoizedProps,l.memoizedProps)}break;case 27:if(u&4&&i.alternate===null){p=i.stateNode,g=i.memoizedProps;try{for(var j=p.firstChild;j;){var H=j.nextSibling,ie=j.nodeName;j[ls]||ie==="HEAD"||ie==="BODY"||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&j.rel.toLowerCase()==="stylesheet"||p.removeChild(j),j=H}for(var ce=i.type,J=p.attributes;J.length;)p.removeAttributeNode(J[0]);an(p,ce,g),p[Yt]=i,p[Bt]=g}catch(Re){dt(i,i.return,Re)}}case 5:if(or(a,i),lr(i),u&512&&(At||l===null||jn(l,l.return)),i.flags&32){p=i.stateNode;try{Zn(p,"")}catch(Re){dt(i,i.return,Re)}}u&4&&i.stateNode!=null&&(p=i.memoizedProps,Kb(i,p,l!==null?l.memoizedProps:p)),u&1024&&(Vg=!0);break;case 6:if(or(a,i),lr(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,l=i.stateNode;try{l.nodeValue=u}catch(Re){dt(i,i.return,Re)}}break;case 3:if(Jf=null,p=Sr,Sr=Xf(a.containerInfo),or(a,i),Sr=p,lr(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{xu(a.containerInfo)}catch(Re){dt(i,i.return,Re)}Vg&&(Vg=!1,n0(i));break;case 4:u=Sr,Sr=Xf(i.stateNode.containerInfo),or(a,i),lr(i),Sr=u;break;case 12:or(a,i),lr(i);break;case 13:or(a,i),lr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Gg=Cn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,kg(i,u)));break;case 22:if(u&512&&(At||l===null||jn(l,l.return)),j=i.memoizedState!==null,H=l!==null&&l.memoizedState!==null,ie=Ni,ce=At,Ni=ie||j,At=ce||H,or(a,i),At=ce,Ni=ie,lr(i),a=i.stateNode,a._current=i,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,u&8192&&(a._visibility=j?a._visibility&-2:a._visibility|1,j&&(a=Ni||At,l===null||H||a||fl(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(l=null,a=i;;){if(a.tag===5||a.tag===26||a.tag===27){if(l===null){H=l=a;try{if(p=H.stateNode,j)g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{S=H.stateNode,N=H.memoizedProps.style;var ne=N!=null&&N.hasOwnProperty("display")?N.display:null;S.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Re){dt(H,H.return,Re)}}}else if(a.tag===6){if(l===null){H=a;try{H.stateNode.nodeValue=j?"":H.memoizedProps}catch(Re){dt(H,H.return,Re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=i.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,kg(i,l))));break;case 19:or(a,i),lr(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,kg(i,u)));break;case 21:break;default:or(a,i),lr(i)}}function lr(i){var a=i.flags;if(a&2){try{if(i.tag!==27){e:{for(var l=i.return;l!==null;){if(Yb(l)){var u=l;break e}l=l.return}throw Error(r(160))}switch(u.tag){case 27:var p=u.stateNode,g=Og(i);kf(i,g,p);break;case 5:var S=u.stateNode;u.flags&32&&(Zn(S,""),u.flags&=-33);var N=Og(i);kf(i,N,S);break;case 3:case 4:var j=u.stateNode.containerInfo,H=Og(i);Mg(i,H,j);break;default:throw Error(r(161))}}}catch(ie){dt(i,i.return,ie)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function n0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;n0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Pi(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Xb(i,a.alternate,a),a=a.sibling}function fl(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:As(4,a,a.return),fl(a);break;case 1:jn(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Gb(a,a.return,l),fl(a);break;case 26:case 27:case 5:jn(a,a.return),fl(a);break;case 22:jn(a,a.return),a.memoizedState===null&&fl(a);break;default:fl(a)}i=i.sibling}}function Is(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=i,g=a,S=g.flags;switch(g.tag){case 0:case 11:case 15:Is(p,g,l),uu(4,g);break;case 1:if(Is(p,g,l),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(H){dt(u,u.return,H)}if(u=g,p=u.updateQueue,p!==null){var N=u.stateNode;try{var j=p.shared.hiddenCallbacks;if(j!==null)for(p.shared.hiddenCallbacks=null,p=0;p<j.length;p++)zb(j[p],N)}catch(H){dt(u,u.return,H)}}l&&S&64&&Hb(g),Ga(g,g.return);break;case 26:case 27:case 5:Is(p,g,l),l&&u===null&&S&4&&$b(g),Ga(g,g.return);break;case 12:Is(p,g,l);break;case 13:Is(p,g,l),l&&S&4&&e0(p,g);break;case 22:g.memoizedState===null&&Is(p,g,l),Ga(g,g.return);break;default:Is(p,g,l)}a=a.sibling}}function Lg(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&eu(l))}function Ug(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&eu(i))}function Rs(i,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)r0(i,a,l,u),a=a.sibling}function r0(i,a,l,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Rs(i,a,l,u),p&2048&&uu(9,a);break;case 3:Rs(i,a,l,u),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&eu(i)));break;case 12:if(p&2048){Rs(i,a,l,u),i=a.stateNode;try{var g=a.memoizedProps,S=g.id,N=g.onPostCommit;typeof N=="function"&&N(S,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){dt(a,a.return,j)}}else Rs(i,a,l,u);break;case 23:break;case 22:g=a.stateNode,a.memoizedState!==null?g._visibility&4?Rs(i,a,l,u):du(i,a):g._visibility&4?Rs(i,a,l,u):(g._visibility|=4,hl(i,a,l,u,(a.subtreeFlags&10256)!==0)),p&2048&&Lg(a.alternate,a);break;case 24:Rs(i,a,l,u),p&2048&&Ug(a.alternate,a);break;default:Rs(i,a,l,u)}}function hl(i,a,l,u,p){for(p=p&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=i,S=a,N=l,j=u,H=S.flags;switch(S.tag){case 0:case 11:case 15:hl(g,S,N,j,p),uu(8,S);break;case 23:break;case 22:var ie=S.stateNode;S.memoizedState!==null?ie._visibility&4?hl(g,S,N,j,p):du(g,S):(ie._visibility|=4,hl(g,S,N,j,p)),p&&H&2048&&Lg(S.alternate,S);break;case 24:hl(g,S,N,j,p),p&&H&2048&&Ug(S.alternate,S);break;default:hl(g,S,N,j,p)}a=a.sibling}}function du(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,u=a,p=u.flags;switch(u.tag){case 22:du(l,u),p&2048&&Lg(u.alternate,u);break;case 24:du(l,u),p&2048&&Ug(u.alternate,u);break;default:du(l,u)}a=a.sibling}}var fu=8192;function ml(i){if(i.subtreeFlags&fu)for(i=i.child;i!==null;)i0(i),i=i.sibling}function i0(i){switch(i.tag){case 26:ml(i),i.flags&fu&&i.memoizedState!==null&&$P(Sr,i.memoizedState,i.memoizedProps);break;case 5:ml(i);break;case 3:case 4:var a=Sr;Sr=Xf(i.stateNode.containerInfo),ml(i),Sr=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=fu,fu=16777216,ml(i),fu=a):ml(i));break;default:ml(i)}}function s0(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function hu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Zt=u,o0(u,i)}s0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)a0(i),i=i.sibling}function a0(i){switch(i.tag){case 0:case 11:case 15:hu(i),i.flags&2048&&As(9,i,i.return);break;case 3:hu(i);break;case 12:hu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&4&&(i.return===null||i.return.tag!==13)?(a._visibility&=-5,Lf(i)):hu(i);break;default:hu(i)}}function Lf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];Zt=u,o0(u,i)}s0(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:As(8,a,a.return),Lf(a);break;case 22:l=a.stateNode,l._visibility&4&&(l._visibility&=-5,Lf(a));break;default:Lf(a)}i=i.sibling}}function o0(i,a){for(;Zt!==null;){var l=Zt;switch(l.tag){case 0:case 11:case 15:As(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:eu(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Zt=u;else e:for(l=i;Zt!==null;){u=Zt;var p=u.sibling,g=u.return;if(Zb(u),u===l){Zt=null;break e}if(p!==null){p.return=g,Zt=p;break e}Zt=g}}}function sP(i,a,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(i,a,l,u){return new sP(i,a,l,u)}function jg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function xs(i,a){var l=i.alternate;return l===null?(l=cr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&31457280,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function l0(i,a){i.flags&=31457282;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Uf(i,a,l,u,p,g){var S=0;if(u=i,typeof i=="function")jg(i)&&(S=1);else if(typeof i=="string")S=HP(i,l,Ve.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case f:return $a(l.children,p,g,a);case m:S=8,p|=24;break;case y:return i=cr(12,l,a,p|2),i.elementType=y,i.lanes=g,i;case I:return i=cr(13,l,a,p),i.elementType=I,i.lanes=g,i;case x:return i=cr(19,l,a,p),i.elementType=x,i.lanes=g,i;case k:return c0(l,p,g,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case v:case b:S=10;break e;case w:S=9;break e;case A:S=11;break e;case C:S=14;break e;case M:S=16,u=null;break e}S=29,l=Error(r(130,i===null?"null":typeof i,"")),u=null}return a=cr(S,l,a,p),a.elementType=i,a.type=u,a.lanes=g,a}function $a(i,a,l,u){return i=cr(7,i,u,a),i.lanes=l,i}function c0(i,a,l,u){i=cr(22,i,u,a),i.elementType=k,i.lanes=l;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=p._current;if(g===null)throw Error(r(456));if((p._pendingVisibility&2)===0){var S=gs(g,2);S!==null&&(p._pendingVisibility|=2,Tn(S,g,2))}},attach:function(){var g=p._current;if(g===null)throw Error(r(456));if((p._pendingVisibility&2)!==0){var S=gs(g,2);S!==null&&(p._pendingVisibility&=-3,Tn(S,g,2))}}};return i.stateNode=p,i}function Bg(i,a,l){return i=cr(6,i,null,a),i.lanes=l,i}function Fg(i,a,l){return a=cr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function Oi(i){i.flags|=4}function u0(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Y0(a)){if(a=ar.current,a!==null&&((Ze&4194176)===Ze?Wr!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||a!==Wr))throw Xc=$p,RE;i.flags|=8192}}function jf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?is():536870912,i.lanes|=a,gl|=a)}function mu(i,a){if(!nt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Et(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&31457280,u|=p.flags&31457280,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=u,i.childLanes=l,a}function aP(i,a,l){var u=a.pendingProps;switch(Hp(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(a),null;case 1:return Et(a),null;case 3:return l=a.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ci(Ht),vn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Kc(a)?Oi(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Tr!==null&&(Qg(Tr),Tr=null))),Et(a),null;case 26:return l=a.memoizedState,i===null?(Oi(a),l!==null?(Et(a),u0(a,l)):(Et(a),a.flags&=-16777217)):l?l!==i.memoizedState?(Oi(a),Et(a),u0(a,l)):(Et(a),a.flags&=-16777217):(i.memoizedProps!==u&&Oi(a),Et(a),a.flags&=-16777217),null;case 27:es(a),l=ft.current;var p=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==u&&Oi(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Et(a),null}i=Ve.current,Kc(a)?AE(a):(i=B0(p,u,l),a.stateNode=i,Oi(a))}return Et(a),null;case 5:if(es(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==u&&Oi(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Et(a),null}if(i=Ve.current,Kc(a))AE(a);else{switch(p=Wf(ft.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?p.createElement(l,{is:u.is}):p.createElement(l)}}i[Yt]=a,i[Bt]=u;e:for(p=a.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break e;for(;p.sibling===null;){if(p.return===null||p.return===a)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}a.stateNode=i;e:switch(an(i,l,u),l){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Oi(a)}}return Et(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==u&&Oi(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(i=ft.current,Kc(a)){if(i=a.stateNode,l=a.memoizedProps,u=null,p=bn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}i[Yt]=a,i=!!(i.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||M0(i.nodeValue,l)),i||ka(a)}else i=Wf(i).createTextNode(u),i[Yt]=a,a.stateNode=i}return Et(a),null;case 13:if(u=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=Kc(a),u!==null&&u.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Yt]=a}else Yc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Et(a),p=!1}else Tr!==null&&(Qg(Tr),Tr=null),p=!0;if(!p)return a.flags&256?(Ai(a),a):(Ai(a),null)}if(Ai(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,i=i!==null&&i.memoizedState!==null,l){u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),jf(a,a.updateQueue),Et(a),null;case 4:return vn(),i===null&&ay(a.stateNode.containerInfo),Et(a),null;case 10:return Ci(a.type),Et(a),null;case 19:if(Be(qt),p=a.memoizedState,p===null)return Et(a),null;if(u=(a.flags&128)!==0,g=p.rendering,g===null)if(u)mu(p,!1);else{if(It!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(g=bf(i),g!==null){for(a.flags|=128,mu(p,!1),i=g.updateQueue,a.updateQueue=i,jf(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)l0(l,i),l=l.sibling;return Ce(qt,qt.current&1|2),a.child}i=i.sibling}p.tail!==null&&Cn()>Bf&&(a.flags|=128,u=!0,mu(p,!1),a.lanes=4194304)}else{if(!u)if(i=bf(g),i!==null){if(a.flags|=128,u=!0,i=i.updateQueue,a.updateQueue=i,jf(a,i),mu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!nt)return Et(a),null}else 2*Cn()-p.renderingStartTime>Bf&&l!==536870912&&(a.flags|=128,u=!0,mu(p,!1),a.lanes=4194304);p.isBackwards?(g.sibling=a.child,a.child=g):(i=p.last,i!==null?i.sibling=g:a.child=g,p.last=g)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=Cn(),a.sibling=null,i=qt.current,Ce(qt,u?i&1|2:i&1),a):(Et(a),null);case 22:case 23:return Ai(a),Yp(),u=a.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(Et(a),a.subtreeFlags&6&&(a.flags|=8192)):Et(a),l=a.updateQueue,l!==null&&jf(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),i!==null&&Be(Ua),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ci(Ht),Et(a),null;case 25:return null}throw Error(r(156,a.tag))}function oP(i,a){switch(Hp(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ci(Ht),vn(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return es(a),null;case 13:if(Ai(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Yc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Be(qt),null;case 4:return vn(),null;case 10:return Ci(a.type),null;case 22:case 23:return Ai(a),Yp(),i!==null&&Be(Ua),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ci(Ht),null;case 25:return null;default:return null}}function d0(i,a){switch(Hp(a),a.tag){case 3:Ci(Ht),vn();break;case 26:case 27:case 5:es(a);break;case 4:vn();break;case 13:Ai(a);break;case 19:Be(qt);break;case 10:Ci(a.type);break;case 22:case 23:Ai(a),Yp(),i!==null&&Be(Ua);break;case 24:Ci(Ht)}}var lP={getCacheForType:function(i){var a=cn(Ht),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},cP=typeof WeakMap=="function"?WeakMap:Map,bt=0,ht=null,Ge=null,Ze=0,mt=0,Fn=null,Mi=!1,pl=!1,zg=!1,Vi=0,It=0,Cs=0,Ka=0,qg=0,ur=0,gl=0,pu=null,Zr=null,Hg=!1,Gg=0,Bf=1/0,Ff=null,Ns=null,zf=!1,Ya=null,gu=0,$g=0,Kg=null,yu=0,Yg=null;function zn(){if((bt&2)!==0&&Ze!==0)return Ze&-Ze;if(D.T!==null){var i=ol;return i!==0?i:ny()}return Kd()}function f0(){ur===0&&(ur=(Ze&536870912)===0||nt?Cc():536870912);var i=ar.current;return i!==null&&(i.flags|=32),ur}function Tn(i,a,l){(i===ht&&mt===2||i.cancelPendingCommit!==null)&&(yl(i,0),ki(i,Ze,ur,!1)),Nt(i,l),((bt&2)===0||i!==ht)&&(i===ht&&((bt&2)===0&&(Ka|=l),It===4&&ki(i,Ze,ur,!1)),Jr(i))}function h0(i,a,l){if((bt&6)!==0)throw Error(r(327));var u=!l&&(a&60)===0&&(a&i.expiredLanes)===0||rs(i,a),p=u?fP(i,a):Zg(i,a,!0),g=u;do{if(p===0){pl&&!u&&ki(i,a,0,!1);break}else if(p===6)ki(i,a,0,!Mi);else{if(l=i.current.alternate,g&&!uP(l)){p=Zg(i,a,!1),g=!1;continue}if(p===2){if(g=a,i.errorRecoveryDisabledLanes&g)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var N=i;p=pu;var j=N.current.memoizedState.isDehydrated;if(j&&(yl(N,S).flags|=256),S=Zg(N,S,!1),S!==2){if(zg&&!j){N.errorRecoveryDisabledLanes|=g,Ka|=g,p=4;break e}g=Zr,Zr=p,g!==null&&Qg(g)}p=S}if(g=!1,p!==2)continue}}if(p===1){yl(i,0),ki(i,a,0,!0);break}e:{switch(u=i,p){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){ki(u,a,ur,!Mi);break e}break;case 2:Zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if(u.finishedWork=l,u.finishedLanes=a,(a&62914560)===a&&(g=Gg+300-Cn(),10<g)){if(ki(u,a,ur,!Mi),Wn(u,0)!==0)break e;u.timeoutHandle=L0(m0.bind(null,u,l,Zr,Ff,Hg,a,ur,Ka,gl,Mi,2,-0,0),g);break e}m0(u,l,Zr,Ff,Hg,a,ur,Ka,gl,Mi,0,-0,0)}}break}while(!0);Jr(i)}function Qg(i){Zr===null?Zr=i:Zr.push.apply(Zr,i)}function m0(i,a,l,u,p,g,S,N,j,H,ie,ce,J){var ne=a.subtreeFlags;if((ne&8192||(ne&16785408)===16785408)&&(Tu={stylesheets:null,count:0,unsuspend:GP},i0(a),a=KP(),a!==null)){i.cancelPendingCommit=a(E0.bind(null,i,l,u,p,S,N,j,1,ce,J)),ki(i,g,S,!H);return}E0(i,l,u,p,S,N,j,ie,ce,J)}function uP(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],g=p.getSnapshot;p=p.value;try{if(!Un(g(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ki(i,a,l,u){a&=~qg,a&=~Ka,i.suspendedLanes|=a,i.pingedLanes&=~a,u&&(i.warmLanes|=a),u=i.expirationTimes;for(var p=a;0<p;){var g=31-_n(p),S=1<<g;u[g]=-1,p&=~S}l!==0&&ss(i,l,a)}function qf(){return(bt&6)===0?(vu(0),!1):!0}function Wg(){if(Ge!==null){if(mt===0)var i=Ge.return;else i=Ge,xi=qa=null,ng(i),sl=null,Zc=0,i=Ge;for(;i!==null;)d0(i.alternate,i),i=i.return;Ge=null}}function yl(i,a){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,CP(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Wg(),ht=i,Ge=l=xs(i.current,null),Ze=a,mt=0,Fn=null,Mi=!1,pl=rs(i,a),zg=!1,gl=ur=qg=Ka=Cs=It=0,Zr=pu=null,Hg=!1,(a&8)!==0&&(a|=a&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=a;0<u;){var p=31-_n(u),g=1<<p;a|=i[p],u&=~g}return Vi=a,hf(),l}function p0(i,a){Fe=null,D.H=Xr,a===Wc?(a=NE(),mt=3):a===RE?(a=NE(),mt=4):mt=a===xb?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Fn=a,Ge===null&&(It=1,Of(i,rr(a,i.current)))}function g0(){var i=D.H;return D.H=Xr,i===null?Xr:i}function y0(){var i=D.A;return D.A=lP,i}function Xg(){It=4,Mi||(Ze&4194176)!==Ze&&ar.current!==null||(pl=!0),(Cs&134217727)===0&&(Ka&134217727)===0||ht===null||ki(ht,Ze,ur,!1)}function Zg(i,a,l){var u=bt;bt|=2;var p=g0(),g=y0();(ht!==i||Ze!==a)&&(Ff=null,yl(i,a)),a=!1;var S=It;e:do try{if(mt!==0&&Ge!==null){var N=Ge,j=Fn;switch(mt){case 8:Wg(),S=6;break e;case 3:case 2:case 6:ar.current===null&&(a=!0);var H=mt;if(mt=0,Fn=null,vl(i,N,j,H),l&&pl){S=0;break e}break;default:H=mt,mt=0,Fn=null,vl(i,N,j,H)}}dP(),S=It;break}catch(ie){p0(i,ie)}while(!0);return a&&i.shellSuspendCounter++,xi=qa=null,bt=u,D.H=p,D.A=g,Ge===null&&(ht=null,Ze=0,hf()),S}function dP(){for(;Ge!==null;)v0(Ge)}function fP(i,a){var l=bt;bt|=2;var u=g0(),p=y0();ht!==i||Ze!==a?(Ff=null,Bf=Cn()+500,yl(i,a)):pl=rs(i,a);e:do try{if(mt!==0&&Ge!==null){a=Ge;var g=Fn;t:switch(mt){case 1:mt=0,Fn=null,vl(i,a,g,1);break;case 2:if(xE(g)){mt=0,Fn=null,_0(a);break}a=function(){mt===2&&ht===i&&(mt=7),Jr(i)},g.then(a,a);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:xE(g)?(mt=0,Fn=null,_0(a)):(mt=0,Fn=null,vl(i,a,g,7));break;case 5:var S=null;switch(Ge.tag){case 26:S=Ge.memoizedState;case 5:case 27:var N=Ge;if(!S||Y0(S)){mt=0,Fn=null;var j=N.sibling;if(j!==null)Ge=j;else{var H=N.return;H!==null?(Ge=H,Hf(H)):Ge=null}break t}}mt=0,Fn=null,vl(i,a,g,5);break;case 6:mt=0,Fn=null,vl(i,a,g,6);break;case 8:Wg(),It=6;break e;default:throw Error(r(462))}}hP();break}catch(ie){p0(i,ie)}while(!0);return xi=qa=null,D.H=u,D.A=p,bt=l,Ge!==null?0:(ht=null,Ze=0,hf(),It)}function hP(){for(;Ge!==null&&!Ip();)v0(Ge)}function v0(i){var a=Bb(i.alternate,i,Vi);i.memoizedProps=i.pendingProps,a===null?Hf(i):Ge=a}function _0(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Mb(l,a,a.pendingProps,a.type,void 0,Ze);break;case 11:a=Mb(l,a,a.pendingProps,a.type.render,a.ref,Ze);break;case 5:ng(a);default:d0(l,a),a=Ge=l0(a,Vi),a=Bb(l,a,Vi)}i.memoizedProps=i.pendingProps,a===null?Hf(i):Ge=a}function vl(i,a,l,u){xi=qa=null,ng(a),sl=null,Zc=0;var p=a.return;try{if(tP(i,p,a,l,Ze)){It=1,Of(i,rr(l,i.current)),Ge=null;return}}catch(g){if(p!==null)throw Ge=p,g;It=1,Of(i,rr(l,i.current)),Ge=null;return}a.flags&32768?(nt||u===1?i=!0:pl||(Ze&536870912)!==0?i=!1:(Mi=i=!0,(u===2||u===3||u===6)&&(u=ar.current,u!==null&&u.tag===13&&(u.flags|=16384))),w0(a,i)):Hf(a)}function Hf(i){var a=i;do{if((a.flags&32768)!==0){w0(a,Mi);return}i=a.return;var l=aP(a.alternate,a,Vi);if(l!==null){Ge=l;return}if(a=a.sibling,a!==null){Ge=a;return}Ge=a=i}while(a!==null);It===0&&(It=5)}function w0(i,a){do{var l=oP(i.alternate,i);if(l!==null){l.flags&=32767,Ge=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ge=i;return}Ge=i=l}while(i!==null);It=6,Ge=null}function E0(i,a,l,u,p,g,S,N,j,H){var ie=D.T,ce=ee.p;try{ee.p=2,D.T=null,mP(i,a,l,u,ce,p,g,S,N,j,H)}finally{D.T=ie,ee.p=ce}}function mP(i,a,l,u,p,g,S,N){do _l();while(Ya!==null);if((bt&6)!==0)throw Error(r(327));var j=i.finishedWork;if(u=i.finishedLanes,j===null)return null;if(i.finishedWork=null,i.finishedLanes=0,j===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var H=j.lanes|j.childLanes;if(H|=Fp,Gd(i,u,H,g,S,N),i===ht&&(Ge=ht=null,Ze=0),(j.subtreeFlags&10256)===0&&(j.flags&10256)===0||zf||(zf=!0,$g=H,Kg=l,vP(hi,function(){return _l(),null})),l=(j.flags&15990)!==0,(j.subtreeFlags&15990)!==0||l?(l=D.T,D.T=null,g=ee.p,ee.p=2,S=bt,bt|=4,rP(i,j),t0(j,i),UD(uy,i.containerInfo),nh=!!cy,uy=cy=null,i.current=j,Xb(i,j.alternate,j),Ac(),bt=S,ee.p=g,D.T=l):i.current=j,zf?(zf=!1,Ya=i,gu=u):b0(i,H),H=i.pendingLanes,H===0&&(Ns=null),Rc(j.stateNode),Jr(i),a!==null)for(p=i.onRecoverableError,j=0;j<a.length;j++)H=a[j],p(H.value,{componentStack:H.stack});return(gu&3)!==0&&_l(),H=i.pendingLanes,(u&4194218)!==0&&(H&42)!==0?i===Yg?yu++:(yu=0,Yg=i):yu=0,vu(0),null}function b0(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,eu(a)))}function _l(){if(Ya!==null){var i=Ya,a=$g;$g=0;var l=$d(gu),u=D.T,p=ee.p;try{if(ee.p=32>l?32:l,D.T=null,Ya===null)var g=!1;else{l=Kg,Kg=null;var S=Ya,N=gu;if(Ya=null,gu=0,(bt&6)!==0)throw Error(r(331));var j=bt;if(bt|=4,a0(S.current),r0(S,S.current,N,l),bt=j,vu(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(ts,S)}catch{}g=!0}return g}finally{ee.p=p,D.T=u,b0(i,a)}}return!1}function T0(i,a,l){a=rr(l,a),a=gg(i.stateNode,a,2),i=Ss(i,a,2),i!==null&&(Nt(i,2),Jr(i))}function dt(i,a,l){if(i.tag===3)T0(i,i,l);else for(;a!==null;){if(a.tag===3){T0(a,i,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ns===null||!Ns.has(u))){i=rr(l,i),l=Ib(2),u=Ss(a,l,2),u!==null&&(Rb(l,u,a,i),Nt(u,2),Jr(u));break}}a=a.return}}function Jg(i,a,l){var u=i.pingCache;if(u===null){u=i.pingCache=new cP;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(l)||(zg=!0,p.add(l),i=pP.bind(null,i,a,l),a.then(i,i))}function pP(i,a,l){var u=i.pingCache;u!==null&&u.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,ht===i&&(Ze&l)===l&&(It===4||It===3&&(Ze&62914560)===Ze&&300>Cn()-Gg?(bt&2)===0&&yl(i,0):qg|=l,gl===Ze&&(gl=0)),Jr(i)}function S0(i,a){a===0&&(a=is()),i=gs(i,a),i!==null&&(Nt(i,a),Jr(i))}function gP(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),S0(i,l)}function yP(i,a){var l=0;switch(i.tag){case 13:var u=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),S0(i,l)}function vP(i,a){return va(i,a)}var Gf=null,wl=null,ey=!1,$f=!1,ty=!1,Qa=0;function Jr(i){i!==wl&&i.next===null&&(wl===null?Gf=wl=i:wl=wl.next=i),$f=!0,ey||(ey=!0,wP(_P))}function vu(i,a){if(!ty&&$f){ty=!0;do for(var l=!1,u=Gf;u!==null;){if(i!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var S=u.suspendedLanes,N=u.pingedLanes;g=(1<<31-_n(42|i)+1)-1,g&=p&~(S&~N),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(l=!0,R0(u,g))}else g=Ze,g=Wn(u,u===ht?g:0),(g&3)===0||rs(u,g)||(l=!0,R0(u,g));u=u.next}while(l);ty=!1}}function _P(){$f=ey=!1;var i=0;Qa!==0&&(xP()&&(i=Qa),Qa=0);for(var a=Cn(),l=null,u=Gf;u!==null;){var p=u.next,g=A0(u,a);g===0?(u.next=null,l===null?Gf=p:l.next=p,p===null&&(wl=l)):(l=u,(i!==0||(g&3)!==0)&&($f=!0)),u=p}vu(i)}function A0(i,a){for(var l=i.suspendedLanes,u=i.pingedLanes,p=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var S=31-_n(g),N=1<<S,j=p[S];j===-1?((N&l)===0||(N&u)!==0)&&(p[S]=Uo(N,a)):j<=a&&(i.expiredLanes|=N),g&=~N}if(a=ht,l=Ze,l=Wn(i,i===a?l:0),u=i.callbackNode,l===0||i===a&&mt===2||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Lo(u),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||rs(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(u!==null&&Lo(u),$d(l)){case 2:case 8:l=Kt;break;case 32:l=hi;break;case 268435456:l=Ic;break;default:l=hi}return u=I0.bind(null,i),l=va(l,u),i.callbackPriority=a,i.callbackNode=l,a}return u!==null&&u!==null&&Lo(u),i.callbackPriority=2,i.callbackNode=null,2}function I0(i,a){var l=i.callbackNode;if(_l()&&i.callbackNode!==l)return null;var u=Ze;return u=Wn(i,i===ht?u:0),u===0?null:(h0(i,u,a),A0(i,Cn()),i.callbackNode!=null&&i.callbackNode===l?I0.bind(null,i):null)}function R0(i,a){if(_l())return null;h0(i,a,!0)}function wP(i){NP(function(){(bt&6)!==0?va(jt,i):i()})}function ny(){return Qa===0&&(Qa=Cc()),Qa}function x0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:zr(""+i)}function C0(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function EP(i,a,l,u,p){if(a==="submit"&&l&&l.stateNode===p){var g=x0((p[Bt]||null).action),S=u.submitter;S&&(a=(a=S[Bt]||null)?x0(a.formAction):S.getAttribute("formAction"),a!==null&&(g=a,S=null));var N=new Go("action","action",null,u,p);i.push({event:N,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qa!==0){var j=S?C0(p,S):new FormData(p);dg(l,{pending:!0,data:j,method:p.method,action:g},null,j)}}else typeof g=="function"&&(N.preventDefault(),j=S?C0(p,S):new FormData(p),dg(l,{pending:!0,data:j,method:p.method,action:g},g,j))},currentTarget:p}]})}}for(var ry=0;ry<EE.length;ry++){var iy=EE[ry],bP=iy.toLowerCase(),TP=iy[0].toUpperCase()+iy.slice(1);br(bP,"on"+TP)}br(gE,"onAnimationEnd"),br(yE,"onAnimationIteration"),br(vE,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(BD,"onTransitionRun"),br(FD,"onTransitionStart"),br(zD,"onTransitionCancel"),br(_E,"onTransitionEnd"),Nn("onMouseEnter",["mouseout","mouseover"]),Nn("onMouseLeave",["mouseout","mouseover"]),Nn("onPointerEnter",["pointerout","pointerover"]),Nn("onPointerLeave",["pointerout","pointerover"]),kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function N0(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],p=u.event;u=u.listeners;e:{var g=void 0;if(a)for(var S=u.length-1;0<=S;S--){var N=u[S],j=N.instance,H=N.currentTarget;if(N=N.listener,j!==g&&p.isPropagationStopped())break e;g=N,p.currentTarget=H;try{g(p)}catch(ie){Pf(ie)}p.currentTarget=null,g=j}else for(S=0;S<u.length;S++){if(N=u[S],j=N.instance,H=N.currentTarget,N=N.listener,j!==g&&p.isPropagationStopped())break e;g=N,p.currentTarget=H;try{g(p)}catch(ie){Pf(ie)}p.currentTarget=null,g=j}}}}function Qe(i,a){var l=a[wa];l===void 0&&(l=a[wa]=new Set);var u=i+"__bubble";l.has(u)||(D0(a,i,2,!1),l.add(u))}function sy(i,a,l){var u=0;a&&(u|=4),D0(l,i,u,a)}var Kf="_reactListening"+Math.random().toString(36).slice(2);function ay(i){if(!i[Kf]){i[Kf]=!0,Dc.forEach(function(l){l!=="selectionchange"&&(SP.has(l)||sy(l,!1,i),sy(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Kf]||(a[Kf]=!0,sy("selectionchange",!1,a))}}function D0(i,a,l,u){switch(eT(a)){case 2:var p=WP;break;case 8:p=XP;break;default:p=_y}l=p.bind(null,a,l,i),p=void 0,!er||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function oy(i,a,l,u,p){var g=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var N=u.stateNode.containerInfo;if(N===p||N.nodeType===8&&N.parentNode===p)break;if(S===4)for(S=u.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===p||j.nodeType===8&&j.parentNode===p))return;S=S.return}for(;N!==null;){if(S=Er(N),S===null)return;if(j=S.tag,j===5||j===6||j===26||j===27){u=g=S;continue e}N=N.parentNode}}u=u.return}Xd(function(){var H=g,ie=Ho(l),ce=[];e:{var J=wE.get(i);if(J!==void 0){var ne=Go,Re=i;switch(i){case"keypress":if(Hr(l)===0)break e;case"keydown":case"keyup":ne=Xo;break;case"focusin":Re="focus",ne=Yo;break;case"focusout":Re="blur",ne=Yo;break;case"beforeblur":case"afterblur":ne=Yo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=tr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Op;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=af;break;case gE:case yE:case vE:ne=Qo;break;case _E:ne=lf;break;case"scroll":case"scrollend":ne=Zd;break;case"wheel":ne=Zo;break;case"copy":case"cut":case"paste":ne=Wo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=qc;break;case"toggle":case"beforetoggle":ne=uf}var ke=(a&4)!==0,Rt=!ke&&(i==="scroll"||i==="scrollend"),K=ke?J!==null?J+"Capture":null:J;ke=[];for(var q=H,X;q!==null;){var oe=q;if(X=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||X===null||K===null||(oe=Aa(q,K),oe!=null&&ke.push(wu(q,oe,X))),Rt)break;q=q.return}0<ke.length&&(J=new ne(J,Re,null,l,ie),ce.push({event:J,listeners:ke}))}}if((a&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",ne=i==="mouseout"||i==="pointerout",J&&l!==Jn&&(Re=l.relatedTarget||l.fromElement)&&(Er(Re)||Re[mi]))break e;if((ne||J)&&(J=ie.window===ie?ie:(J=ie.ownerDocument)?J.defaultView||J.parentWindow:window,ne?(Re=l.relatedTarget||l.toElement,ne=H,Re=Re?Er(Re):null,Re!==null&&(Rt=se(Re),ke=Re.tag,Re!==Rt||ke!==5&&ke!==27&&ke!==6)&&(Re=null)):(ne=null,Re=H),ne!==Re)){if(ke=tr,oe="onMouseLeave",K="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(ke=qc,oe="onPointerLeave",K="onPointerEnter",q="pointer"),Rt=ne==null?J:cs(ne),X=Re==null?J:cs(Re),J=new ke(oe,q+"leave",ne,l,ie),J.target=Rt,J.relatedTarget=X,oe=null,Er(ie)===H&&(ke=new ke(K,q+"enter",Re,l,ie),ke.target=X,ke.relatedTarget=Rt,oe=ke),Rt=oe,ne&&Re)t:{for(ke=ne,K=Re,q=0,X=ke;X;X=El(X))q++;for(X=0,oe=K;oe;oe=El(oe))X++;for(;0<q-X;)ke=El(ke),q--;for(;0<X-q;)K=El(K),X--;for(;q--;){if(ke===K||K!==null&&ke===K.alternate)break t;ke=El(ke),K=El(K)}ke=null}else ke=null;ne!==null&&P0(ce,J,ne,ke,!1),Re!==null&&Rt!==null&&P0(ce,Rt,Re,ke,!0)}}e:{if(J=H?cs(H):window,ne=J.nodeName&&J.nodeName.toLowerCase(),ne==="select"||ne==="input"&&J.type==="file")var Te=sE;else if(zt(J))if(aE)Te=kD;else{Te=MD;var He=OD}else ne=J.nodeName,!ne||ne.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?H&&kc(H.elementType)&&(Te=sE):Te=VD;if(Te&&(Te=Te(i,H))){bi(ce,Te,l,ie);break e}He&&He(i,J,H),i==="focusout"&&H&&J.type==="number"&&H.memoizedProps.value!=null&&qo(J,"number",J.value)}switch(He=H?cs(H):window,i){case"focusin":(zt(He)||He.contentEditable==="true")&&(Jo=He,Up=H,$c=null);break;case"focusout":$c=Up=Jo=null;break;case"mousedown":jp=!0;break;case"contextmenu":case"mouseup":case"dragend":jp=!1,mE(ce,l,ie);break;case"selectionchange":if(jD)break;case"keydown":case"keyup":mE(ce,l,ie)}var Ne;if(Kr)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else We?te(i,l)&&(Pe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(T&&l.locale!=="ko"&&(We||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&We&&(Ne=Uc()):(qr=ie,ps="value"in qr?qr.value:qr.textContent,We=!0)),He=Yf(H,Pe),0<He.length&&(Pe=new Fc(Pe,i,null,l,ie),ce.push({event:Pe,listeners:He}),Ne?Pe.data=Ne:(Ne=me(l),Ne!==null&&(Pe.data=Ne)))),(Ne=_?Ft(i,l):Xe(i,l))&&(Pe=Yf(H,"onBeforeInput"),0<Pe.length&&(He=new Fc("onBeforeInput","beforeinput",null,l,ie),ce.push({event:He,listeners:Pe}),He.data=Ne)),EP(ce,i,H,l,ie)}N0(ce,a)})}function wu(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Yf(i,a){for(var l=a+"Capture",u=[];i!==null;){var p=i,g=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Aa(i,l),p!=null&&u.unshift(wu(i,p,g)),p=Aa(i,a),p!=null&&u.push(wu(i,p,g))),i=i.return}return u}function El(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function P0(i,a,l,u,p){for(var g=a._reactName,S=[];l!==null&&l!==u;){var N=l,j=N.alternate,H=N.stateNode;if(N=N.tag,j!==null&&j===u)break;N!==5&&N!==26&&N!==27||H===null||(j=H,p?(H=Aa(l,g),H!=null&&S.unshift(wu(l,H,j))):p||(H=Aa(l,g),H!=null&&S.push(wu(l,H,j)))),l=l.return}S.length!==0&&i.push({event:a,listeners:S})}var AP=/\r\n?/g,IP=/\u0000|\uFFFD/g;function O0(i){return(typeof i=="string"?i:""+i).replace(AP,`
`).replace(IP,"")}function M0(i,a){return a=O0(a),O0(i)===a}function Qf(){}function ut(i,a,l,u,p,g){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Zn(i,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Zn(i,""+u);break;case"className":fs(i,"class",u);break;case"tabIndex":fs(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fs(i,l,u);break;case"style":Wd(i,u,g);break;case"data":if(a!=="object"){fs(i,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=zr(""+u),i.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&ut(i,a,"name",p.name,p,null),ut(i,a,"formEncType",p.formEncType,p,null),ut(i,a,"formMethod",p.formMethod,p,null),ut(i,a,"formTarget",p.formTarget,p,null)):(ut(i,a,"encType",p.encType,p,null),ut(i,a,"method",p.method,p,null),ut(i,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=zr(""+u),i.setAttribute(l,u);break;case"onClick":u!=null&&(i.onclick=Qf);break;case"onScroll":u!=null&&Qe("scroll",i);break;case"onScrollEnd":u!=null&&Qe("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}l=zr(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""+u):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":u===!0?i.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,u):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(l,u):i.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(l):i.setAttribute(l,u);break;case"popover":Qe("beforetoggle",i),Qe("toggle",i),ds(i,"popover",u);break;case"xlinkActuate":Xn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ds(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Dp.get(l)||l,ds(i,l,u))}}function ly(i,a,l,u,p,g){switch(l){case"style":Wd(i,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof u=="string"?Zn(i,u):(typeof u=="number"||typeof u=="bigint")&&Zn(i,""+u);break;case"onScroll":u!=null&&Qe("scroll",i);break;case"onScrollEnd":u!=null&&Qe("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Qf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),g=i[Bt]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(a,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,u,p);break e}l in i?i[l]=u:u===!0?i.setAttribute(l,""):ds(i,l,u)}}}function an(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",i),Qe("load",i);var u=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var S=l[g];if(S!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ut(i,a,g,S,l,null)}}p&&ut(i,a,"srcSet",l.srcSet,l,null),u&&ut(i,a,"src",l.src,l,null);return;case"input":Qe("invalid",i);var N=g=S=p=null,j=null,H=null;for(u in l)if(l.hasOwnProperty(u)){var ie=l[u];if(ie!=null)switch(u){case"name":p=ie;break;case"type":S=ie;break;case"checked":j=ie;break;case"defaultChecked":H=ie;break;case"value":g=ie;break;case"defaultValue":N=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,a));break;default:ut(i,a,u,ie,l,null)}}Ta(i,g,N,j,H,S,p,!1),ba(i);return;case"select":Qe("invalid",i),u=S=g=null;for(p in l)if(l.hasOwnProperty(p)&&(N=l[p],N!=null))switch(p){case"value":g=N;break;case"defaultValue":S=N;break;case"multiple":u=N;default:ut(i,a,p,N,l,null)}a=g,l=S,i.multiple=!!u,a!=null?tt(i,!!u,a,!1):l!=null&&tt(i,!!u,l,!0);return;case"textarea":Qe("invalid",i),g=p=u=null;for(S in l)if(l.hasOwnProperty(S)&&(N=l[S],N!=null))switch(S){case"value":u=N;break;case"defaultValue":p=N;break;case"children":g=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:ut(i,a,S,N,l,null)}ms(i,u,p,g),ba(i);return;case"option":for(j in l)if(l.hasOwnProperty(j)&&(u=l[j],u!=null))switch(j){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ut(i,a,j,u,l,null)}return;case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":Qe("load",i);break;case"video":case"audio":for(u=0;u<_u.length;u++)Qe(_u[u],i);break;case"image":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"embed":case"source":case"link":Qe("error",i),Qe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in l)if(l.hasOwnProperty(H)&&(u=l[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ut(i,a,H,u,l,null)}return;default:if(kc(a)){for(ie in l)l.hasOwnProperty(ie)&&(u=l[ie],u!==void 0&&ly(i,a,ie,u,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(u=l[N],u!=null&&ut(i,a,N,u,l,null))}function RP(i,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,S=null,N=null,j=null,H=null,ie=null;for(ne in l){var ce=l[ne];if(l.hasOwnProperty(ne)&&ce!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":j=ce;default:u.hasOwnProperty(ne)||ut(i,a,ne,null,u,ce)}}for(var J in u){var ne=u[J];if(ce=l[J],u.hasOwnProperty(J)&&(ne!=null||ce!=null))switch(J){case"type":g=ne;break;case"name":p=ne;break;case"checked":H=ne;break;case"defaultChecked":ie=ne;break;case"value":S=ne;break;case"defaultValue":N=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:ne!==ce&&ut(i,a,J,ne,u,ce)}}hs(i,S,N,j,H,ie,g,p);return;case"select":ne=S=N=J=null;for(g in l)if(j=l[g],l.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":ne=j;default:u.hasOwnProperty(g)||ut(i,a,g,null,u,j)}for(p in u)if(g=u[p],j=l[p],u.hasOwnProperty(p)&&(g!=null||j!=null))switch(p){case"value":J=g;break;case"defaultValue":N=g;break;case"multiple":S=g;default:g!==j&&ut(i,a,p,g,u,j)}a=N,l=S,u=ne,J!=null?tt(i,!!l,J,!1):!!u!=!!l&&(a!=null?tt(i,!!l,a,!0):tt(i,!!l,l?[]:"",!1));return;case"textarea":ne=J=null;for(N in l)if(p=l[N],l.hasOwnProperty(N)&&p!=null&&!u.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ut(i,a,N,null,u,p)}for(S in u)if(p=u[S],g=l[S],u.hasOwnProperty(S)&&(p!=null||g!=null))switch(S){case"value":J=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==g&&ut(i,a,S,p,u,g)}Sa(i,J,ne);return;case"option":for(var Re in l)if(J=l[Re],l.hasOwnProperty(Re)&&J!=null&&!u.hasOwnProperty(Re))switch(Re){case"selected":i.selected=!1;break;default:ut(i,a,Re,null,u,J)}for(j in u)if(J=u[j],ne=l[j],u.hasOwnProperty(j)&&J!==ne&&(J!=null||ne!=null))switch(j){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:ut(i,a,j,J,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in l)J=l[ke],l.hasOwnProperty(ke)&&J!=null&&!u.hasOwnProperty(ke)&&ut(i,a,ke,null,u,J);for(H in u)if(J=u[H],ne=l[H],u.hasOwnProperty(H)&&J!==ne&&(J!=null||ne!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,a));break;default:ut(i,a,H,J,u,ne)}return;default:if(kc(a)){for(var Rt in l)J=l[Rt],l.hasOwnProperty(Rt)&&J!==void 0&&!u.hasOwnProperty(Rt)&&ly(i,a,Rt,void 0,u,J);for(ie in u)J=u[ie],ne=l[ie],!u.hasOwnProperty(ie)||J===ne||J===void 0&&ne===void 0||ly(i,a,ie,J,u,ne);return}}for(var K in l)J=l[K],l.hasOwnProperty(K)&&J!=null&&!u.hasOwnProperty(K)&&ut(i,a,K,null,u,J);for(ce in u)J=u[ce],ne=l[ce],!u.hasOwnProperty(ce)||J===ne||J==null&&ne==null||ut(i,a,ce,J,u,ne)}var cy=null,uy=null;function Wf(i){return i.nodeType===9?i:i.ownerDocument}function V0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k0(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function dy(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var fy=null;function xP(){var i=window.event;return i&&i.type==="popstate"?i===fy?!1:(fy=i,!0):(fy=null,!1)}var L0=typeof setTimeout=="function"?setTimeout:void 0,CP=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,NP=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(i){return U0.resolve(null).then(i).catch(DP)}:L0;function DP(i){setTimeout(function(){throw i})}function hy(i,a){var l=a,u=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(u===0){i.removeChild(p),xu(a);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=p}while(l);xu(a)}function my(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":my(l),Ea(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function PP(i,a,l,u){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[ls])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==p.rel||i.getAttribute("href")!==(p.href==null?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Ar(i.nextSibling),i===null)break}return null}function OP(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Ar(i.nextSibling),i===null))return null;return i}function Ar(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}function j0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function B0(i,a,l){switch(a=Wf(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}var dr=new Map,F0=new Set;function Xf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var Li=ee.d;ee.d={f:MP,r:VP,D:kP,C:LP,L:UP,m:jP,X:FP,S:BP,M:zP};function MP(){var i=Li.f(),a=qf();return i||a}function VP(i){var a=pi(i);a!==null&&a.tag===5&&a.type==="form"?mb(a):Li.r(i)}var bl=typeof document>"u"?null:document;function z0(i,a,l){var u=bl;if(u&&typeof a=="string"&&a){var p=St(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),F0.has(p)||(F0.add(p),i={rel:i,crossOrigin:l,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),an(a,"link",i),wt(a),u.head.appendChild(a)))}}function kP(i){Li.D(i),z0("dns-prefetch",i,null)}function LP(i,a){Li.C(i,a),z0("preconnect",i,a)}function UP(i,a,l){Li.L(i,a,l);var u=bl;if(u&&i&&a){var p='link[rel="preload"][as="'+St(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+St(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+St(l.imageSizes)+'"]')):p+='[href="'+St(i)+'"]';var g=p;switch(a){case"style":g=Tl(i);break;case"script":g=Sl(i)}dr.has(g)||(i=U({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),dr.set(g,i),u.querySelector(p)!==null||a==="style"&&u.querySelector(Eu(g))||a==="script"&&u.querySelector(bu(g))||(a=u.createElement("link"),an(a,"link",i),wt(a),u.head.appendChild(a)))}}function jP(i,a){Li.m(i,a);var l=bl;if(l&&i){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+St(u)+'"][href="'+St(i)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Sl(i)}if(!dr.has(g)&&(i=U({rel:"modulepreload",href:i},a),dr.set(g,i),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(bu(g)))return}u=l.createElement("link"),an(u,"link",i),wt(u),l.head.appendChild(u)}}}function BP(i,a,l){Li.S(i,a,l);var u=bl;if(u&&i){var p=us(u).hoistableStyles,g=Tl(i);a=a||"default";var S=p.get(g);if(!S){var N={loading:0,preload:null};if(S=u.querySelector(Eu(g)))N.loading=5;else{i=U({rel:"stylesheet",href:i,"data-precedence":a},l),(l=dr.get(g))&&py(i,l);var j=S=u.createElement("link");wt(j),an(j,"link",i),j._p=new Promise(function(H,ie){j.onload=H,j.onerror=ie}),j.addEventListener("load",function(){N.loading|=1}),j.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Zf(S,a,u)}S={type:"stylesheet",instance:S,count:1,state:N},p.set(g,S)}}}function FP(i,a){Li.X(i,a);var l=bl;if(l&&i){var u=us(l).hoistableScripts,p=Sl(i),g=u.get(p);g||(g=l.querySelector(bu(p)),g||(i=U({src:i,async:!0},a),(a=dr.get(p))&&gy(i,a),g=l.createElement("script"),wt(g),an(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function zP(i,a){Li.M(i,a);var l=bl;if(l&&i){var u=us(l).hoistableScripts,p=Sl(i),g=u.get(p);g||(g=l.querySelector(bu(p)),g||(i=U({src:i,async:!0,type:"module"},a),(a=dr.get(p))&&gy(i,a),g=l.createElement("script"),wt(g),an(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function q0(i,a,l,u){var p=(p=ft.current)?Xf(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Tl(l.href),l=us(p).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Tl(l.href);var g=us(p).hoistableStyles,S=g.get(i);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,S),(g=p.querySelector(Eu(i)))&&!g._p&&(S.instance=g,S.state.loading=5),dr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},dr.set(i,l),g||qP(p,i,l,S.state))),a&&u===null)throw Error(r(528,""));return S}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Sl(l),l=us(p).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Tl(i){return'href="'+St(i)+'"'}function Eu(i){return'link[rel="stylesheet"]['+i+"]"}function H0(i){return U({},i,{"data-precedence":i.precedence,precedence:null})}function qP(i,a,l,u){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=i.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),an(a,"link",l),wt(a),i.head.appendChild(a))}function Sl(i){return'[src="'+St(i)+'"]'}function bu(i){return"script[async]"+i}function G0(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=i.querySelector('style[data-href~="'+St(l.href)+'"]');if(u)return a.instance=u,wt(u),u;var p=U({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),wt(u),an(u,"style",p),Zf(u,l.precedence,i),a.instance=u;case"stylesheet":p=Tl(l.href);var g=i.querySelector(Eu(p));if(g)return a.state.loading|=4,a.instance=g,wt(g),g;u=H0(l),(p=dr.get(p))&&py(u,p),g=(i.ownerDocument||i).createElement("link"),wt(g);var S=g;return S._p=new Promise(function(N,j){S.onload=N,S.onerror=j}),an(g,"link",u),a.state.loading|=4,Zf(g,l.precedence,i),a.instance=g;case"script":return g=Sl(l.src),(p=i.querySelector(bu(g)))?(a.instance=p,wt(p),p):(u=l,(p=dr.get(g))&&(u=U({},l),gy(u,p)),i=i.ownerDocument||i,p=i.createElement("script"),wt(p),an(p,"link",u),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Zf(u,l.precedence,i));return a.instance}function Zf(i,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,S=0;S<u.length;S++){var N=u[S];if(N.dataset.precedence===a)g=N;else if(g!==p)break}g?g.parentNode.insertBefore(i,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function py(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function gy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Jf=null;function $0(i,a,l){if(Jf===null){var u=new Map,p=Jf=new Map;p.set(l,u)}else p=Jf,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(i))return u;for(u.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var g=l[p];if(!(g[ls]||g[Yt]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(a)||"";S=i+S;var N=u.get(S);N?N.push(g):u.set(S,[g])}}return u}function K0(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function HP(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Y0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Tu=null;function GP(){}function $P(i,a,l){if(Tu===null)throw Error(r(475));var u=Tu;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Tl(l.href),g=i.querySelector(Eu(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=eh.bind(u),i.then(u,u)),a.state.loading|=4,a.instance=g,wt(g);return}g=i.ownerDocument||i,l=H0(l),(p=dr.get(p))&&py(l,p),g=g.createElement("link"),wt(g);var S=g;S._p=new Promise(function(N,j){S.onload=N,S.onerror=j}),an(g,"link",l),a.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=eh.bind(u),i.addEventListener("load",a),i.addEventListener("error",a))}}function KP(){if(Tu===null)throw Error(r(475));var i=Tu;return i.stylesheets&&i.count===0&&yy(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&yy(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function eh(){if(this.count--,this.count===0){if(this.stylesheets)yy(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var th=null;function yy(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,th=new Map,a.forEach(YP,i),th=null,eh.call(i))}function YP(i,a){if(!(a.state.loading&4)){var l=th.get(i);if(l)var u=l.get(null);else{l=new Map,th.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var S=p[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),u=S)}u&&l.set(null,u)}p=a.instance,S=p.getAttribute("data-precedence"),g=l.get(S)||u,g===u&&l.set(null,p),l.set(S,p),this.count++,u=eh.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var Su={$$typeof:b,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function QP(i,a,l,u,p,g,S,N){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jo(0),this.hiddenUpdates=jo(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Q0(i,a,l,u,p,g,S,N,j,H,ie,ce){return i=new QP(i,a,l,S,N,j,H,ce),a=1,g===!0&&(a|=24),g=cr(3,null,null,a),i.current=g,g.stateNode=i,a=Qp(),a.refCount++,i.pooledCache=a,a.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:a},Cg(g),i}function W0(i){return i?(i=nl,i):nl}function X0(i,a,l,u,p,g){p=W0(p),u.context===null?u.context=p:u.pendingContext=p,u=Ts(a),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=Ss(i,u,a),l!==null&&(Tn(l,i,a),ou(l,i,a))}function Z0(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function vy(i,a){Z0(i,a),(i=i.alternate)&&Z0(i,a)}function J0(i){if(i.tag===13){var a=gs(i,67108864);a!==null&&Tn(a,i,67108864),vy(i,67108864)}}var nh=!0;function WP(i,a,l,u){var p=D.T;D.T=null;var g=ee.p;try{ee.p=2,_y(i,a,l,u)}finally{ee.p=g,D.T=p}}function XP(i,a,l,u){var p=D.T;D.T=null;var g=ee.p;try{ee.p=8,_y(i,a,l,u)}finally{ee.p=g,D.T=p}}function _y(i,a,l,u){if(nh){var p=wy(u);if(p===null)oy(i,a,u,rh,l),tT(i,u);else if(JP(p,i,a,l,u))u.stopPropagation();else if(tT(i,u),a&4&&-1<ZP.indexOf(i)){for(;p!==null;){var g=pi(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=wr(g.pendingLanes);if(S!==0){var N=g;for(N.pendingLanes|=2,N.entangledLanes|=2;S;){var j=1<<31-_n(S);N.entanglements[1]|=j,S&=~j}Jr(g),(bt&6)===0&&(Bf=Cn()+500,vu(0))}}break;case 13:N=gs(g,2),N!==null&&Tn(N,g,2),qf(),vy(g,2)}if(g=wy(u),g===null&&oy(i,a,u,rh,l),g===p)break;p=g}p!==null&&u.stopPropagation()}else oy(i,a,u,null,l)}}function wy(i){return i=Ho(i),Ey(i)}var rh=null;function Ey(i){if(rh=null,i=Er(i),i!==null){var a=se(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=ye(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return rh=i,null}function eT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fd()){case jt:return 2;case Kt:return 8;case hi:case zd:return 32;case Ic:return 268435456;default:return 32}default:return 32}}var by=!1,Ds=null,Ps=null,Os=null,Au=new Map,Iu=new Map,Ms=[],ZP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tT(i,a){switch(i){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":Au.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(a.pointerId)}}function Ru(i,a,l,u,p,g){return i===null||i.nativeEvent!==g?(i={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},a!==null&&(a=pi(a),a!==null&&J0(a)),i):(i.eventSystemFlags|=u,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function JP(i,a,l,u,p){switch(a){case"focusin":return Ds=Ru(Ds,i,a,l,u,p),!0;case"dragenter":return Ps=Ru(Ps,i,a,l,u,p),!0;case"mouseover":return Os=Ru(Os,i,a,l,u,p),!0;case"pointerover":var g=p.pointerId;return Au.set(g,Ru(Au.get(g)||null,i,a,l,u,p)),!0;case"gotpointercapture":return g=p.pointerId,Iu.set(g,Ru(Iu.get(g)||null,i,a,l,u,p)),!0}return!1}function nT(i){var a=Er(i.target);if(a!==null){var l=se(a);if(l!==null){if(a=l.tag,a===13){if(a=ye(l),a!==null){i.blockedOn=a,os(i.priority,function(){if(l.tag===13){var u=zn(),p=gs(l,u);p!==null&&Tn(p,l,u),vy(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ih(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=wy(i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);Jn=u,l.target.dispatchEvent(u),Jn=null}else return a=pi(l),a!==null&&J0(a),i.blockedOn=l,!1;a.shift()}return!0}function rT(i,a,l){ih(i)&&l.delete(a)}function eO(){by=!1,Ds!==null&&ih(Ds)&&(Ds=null),Ps!==null&&ih(Ps)&&(Ps=null),Os!==null&&ih(Os)&&(Os=null),Au.forEach(rT),Iu.forEach(rT)}function sh(i,a){i.blockedOn===a&&(i.blockedOn=null,by||(by=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,eO)))}var ah=null;function iT(i){ah!==i&&(ah=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ah===i&&(ah=null);for(var a=0;a<i.length;a+=3){var l=i[a],u=i[a+1],p=i[a+2];if(typeof u!="function"){if(Ey(u||l)===null)continue;break}var g=pi(l);g!==null&&(i.splice(a,3),a-=3,dg(g,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function xu(i){function a(j){return sh(j,i)}Ds!==null&&sh(Ds,i),Ps!==null&&sh(Ps,i),Os!==null&&sh(Os,i),Au.forEach(a),Iu.forEach(a);for(var l=0;l<Ms.length;l++){var u=Ms[l];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Ms.length&&(l=Ms[0],l.blockedOn===null);)nT(l),l.blockedOn===null&&Ms.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],g=l[u+1],S=p[Bt]||null;if(typeof g=="function")S||iT(l);else if(S){var N=null;if(g&&g.hasAttribute("formAction")){if(p=g,S=g[Bt]||null)N=S.formAction;else if(Ey(p)!==null)continue}else N=S.action;typeof N=="function"?l[u+1]=N:(l.splice(u,3),u-=3),iT(l)}}}function Ty(i){this._internalRoot=i}oh.prototype.render=Ty.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,u=zn();X0(l,u,i,a,null,null)},oh.prototype.unmount=Ty.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;i.tag===0&&_l(),X0(i.current,2,null,i,null,null),qf(),a[mi]=null}};function oh(i){this._internalRoot=i}oh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Kd();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Ms.length&&a!==0&&a<Ms[l].priority;l++);Ms.splice(l,0,i),l===0&&nT(i)}};var sT=e.version;if(sT!=="19.0.0")throw Error(r(527,sT,"19.0.0"));ee.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=ae(a),i=i!==null?ve(i):null,i=i===null?null:i.stateNode,i};var tO={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:D,findFiberByHostInstance:Er,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{ts=lh.inject(tO),ln=lh}catch{}}return Nu.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,u="",p=bb,g=Tb,S=Sb,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks)),a=Q0(i,1,!1,null,null,l,u,p,g,S,N,null),i[mi]=a.current,ay(i.nodeType===8?i.parentNode:i),new Ty(a)},Nu.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var u=!1,p="",g=bb,S=Tb,N=Sb,j=null,H=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(j=l.unstable_transitionCallbacks),l.formState!==void 0&&(H=l.formState)),a=Q0(i,1,!0,a,l??null,u,p,g,S,N,j,H),a.context=W0(null),l=a.current,u=zn(),p=Ts(u),p.callback=null,Ss(l,p,u),a.current.lanes=u,Nt(a,u),Jr(a),i[mi]=a.current,ay(i),new oh(a)},Nu.version="19.0.0",Nu}var yT;function DO(){if(yT)return Iy.exports;yT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Iy.exports=NO(),Iy.exports}var PO=DO(),Du={},vT;function OO(){if(vT)return Du;vT=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.parse=c,Du.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function c(w,b){const A=new o,I=w.length;if(I<2)return A;const x=(b==null?void 0:b.decode)||y;let C=0;do{const M=w.indexOf("=",C);if(M===-1)break;const k=w.indexOf(";",C),$=k===-1?I:k;if(M>$){C=w.lastIndexOf(";",M-1)+1;continue}const G=d(w,C,M),Y=f(w,M,G),V=w.slice(G,Y);if(A[V]===void 0){let P=d(w,M+1,$),D=f(w,$,P);const U=x(w.slice(P,D));A[V]=U}C=$+1}while(C<I);return A}function d(w,b,A){do{const I=w.charCodeAt(b);if(I!==32&&I!==9)return b}while(++b<A);return A}function f(w,b,A){for(;b>A;){const I=w.charCodeAt(--b);if(I!==32&&I!==9)return b+1}return A}function m(w,b,A){const I=(A==null?void 0:A.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const x=I(b);if(!e.test(x))throw new TypeError(`argument val is invalid: ${b}`);let C=w+"="+x;if(!A)return C;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);C+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);C+="; Domain="+A.domain}if(A.path){if(!r.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);C+="; Path="+A.path}if(A.expires){if(!v(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);C+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(C+="; HttpOnly"),A.secure&&(C+="; Secure"),A.partitioned&&(C+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return C}function y(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function v(w){return s.call(w)==="[object Date]"}return Du}OO();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _T="popstate";function MO(n={}){function e(r,s){let{pathname:o,search:c,hash:d}=r.location;return lv("",{pathname:o,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Ju(s)}return kO(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Dr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VO(){return Math.random().toString(36).substring(2,10)}function wT(n,e){return{usr:n.state,key:n.key,idx:e}}function lv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?uc(e):e,state:t,key:e&&e.key||r||VO()}}function Ju({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function uc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function kO(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,c=s.history,d="POP",f=null,m=y();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function y(){return(c.state||{idx:null}).idx}function v(){d="POP";let x=y(),C=x==null?null:x-m;m=x,f&&f({action:d,location:I.location,delta:C})}function w(x,C){d="PUSH";let M=lv(I.location,x,C);m=y()+1;let k=wT(M,m),$=I.createHref(M);try{c.pushState(k,"",$)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;s.location.assign($)}o&&f&&f({action:d,location:I.location,delta:1})}function b(x,C){d="REPLACE";let M=lv(I.location,x,C);m=y();let k=wT(M,m),$=I.createHref(M);c.replaceState(k,"",$),o&&f&&f({action:d,location:I.location,delta:0})}function A(x){let C=s.location.origin!=="null"?s.location.origin:s.location.href,M=typeof x=="string"?x:Ju(x);return M=M.replace(/ $/,"%20"),gt(C,`No window.location.(origin|href) available to create URL for href: ${M}`),new URL(M,C)}let I={get action(){return d},get location(){return n(s,c)},listen(x){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(_T,v),f=x,()=>{s.removeEventListener(_T,v),f=null}},createHref(x){return e(s,x)},createURL:A,encodeLocation(x){let C=A(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:w,replace:b,go(x){return c.go(x)}};return I}function dI(n,e,t="/"){return LO(n,e,t,!1)}function LO(n,e,t,r){let s=typeof e=="string"?uc(e):e,o=Hi(s.pathname||"/",t);if(o==null)return null;let c=fI(n);UO(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let m=QO(o);d=KO(c[f],m,r)}return d}function fI(n,e=[],t=[],r=""){let s=(o,c,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(gt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let m=zi([r,f.relativePath]),y=t.concat(f);o.children&&o.children.length>0&&(gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),fI(o.children,e,y,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:GO(m,o.index),routesMeta:y})};return n.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))s(o,c);else for(let f of hI(o.path))s(o,c,f)}),e}function hI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let c=hI(r.join("/")),d=[];return d.push(...c.map(f=>f===""?o:[o,f].join("/"))),s&&d.push(...c),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function UO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$O(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var jO=/^:[\w-]+$/,BO=3,FO=2,zO=1,qO=10,HO=-2,ET=n=>n==="*";function GO(n,e){let t=n.split("/"),r=t.length;return t.some(ET)&&(r+=HO),e&&(r+=FO),t.filter(s=>!ET(s)).reduce((s,o)=>s+(jO.test(o)?BO:o===""?zO:qO),r)}function $O(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function KO(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",c=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=Yh({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},y),w=f.route;if(!v&&m&&t&&!r[r.length-1].route.index&&(v=Yh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:zi([o,v.pathname]),pathnameBase:JO(zi([o,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(o=zi([o,v.pathnameBase]))}return c}function Yh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=YO(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,{paramName:y,isOptional:v},w)=>{if(y==="*"){let A=d[w]||"";c=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const b=d[w];return v&&!b?m[y]=void 0:m[y]=(b||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:n}}function YO(n,e=!1,t=!0){Dr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function QO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Hi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function WO(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?uc(n):n;return{pathname:t?t.startsWith("/")?t:XO(t,e):e,search:e2(r),hash:t2(s)}}function XO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ny(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function h_(n){let e=ZO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function m_(n,e,t,r=!1){let s;typeof n=="string"?s=uc(n):(s={...n},gt(!s.pathname||!s.pathname.includes("?"),Ny("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),Ny("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),Ny("#","search","hash",s)));let o=n===""||s.pathname==="",c=o?"/":s.pathname,d;if(c==null)d=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),v-=1;s.pathname=w.join("/")}d=v>=0?e[v]:"/"}let f=WO(s,d),m=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||y)&&(f.pathname+="/"),f}var zi=n=>n.join("/").replace(/\/\/+/g,"/"),JO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),e2=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,t2=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function n2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var mI=["POST","PUT","PATCH","DELETE"];new Set(mI);var r2=["GET",...mI];new Set(r2);var dc=E.createContext(null);dc.displayName="DataRouter";var xm=E.createContext(null);xm.displayName="DataRouterState";var pI=E.createContext({isTransitioning:!1});pI.displayName="ViewTransition";var i2=E.createContext(new Map);i2.displayName="Fetchers";var s2=E.createContext(null);s2.displayName="Await";var kr=E.createContext(null);kr.displayName="Navigation";var wd=E.createContext(null);wd.displayName="Location";var Lr=E.createContext({outlet:null,matches:[],isDataRoute:!1});Lr.displayName="Route";var p_=E.createContext(null);p_.displayName="RouteError";function a2(n,{relative:e}={}){gt(fc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=E.useContext(kr),{hash:s,pathname:o,search:c}=Ed(n,{relative:e}),d=o;return t!=="/"&&(d=o==="/"?t:zi([t,o])),r.createHref({pathname:d,search:c,hash:s})}function fc(){return E.useContext(wd)!=null}function la(){return gt(fc(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(wd).location}var gI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yI(n){E.useContext(kr).static||E.useLayoutEffect(n)}function No(){let{isDataRoute:n}=E.useContext(Lr);return n?_2():o2()}function o2(){gt(fc(),"useNavigate() may be used only in the context of a <Router> component.");let n=E.useContext(dc),{basename:e,navigator:t}=E.useContext(kr),{matches:r}=E.useContext(Lr),{pathname:s}=la(),o=JSON.stringify(h_(r)),c=E.useRef(!1);return yI(()=>{c.current=!0}),E.useCallback((f,m={})=>{if(Dr(c.current,gI),!c.current)return;if(typeof f=="number"){t.go(f);return}let y=m_(f,JSON.parse(o),s,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:zi([e,y.pathname])),(m.replace?t.replace:t.push)(y,m.state,m)},[e,t,o,s,n])}E.createContext(null);function vI(){let{matches:n}=E.useContext(Lr),e=n[n.length-1];return e?e.params:{}}function Ed(n,{relative:e}={}){let{matches:t}=E.useContext(Lr),{pathname:r}=la(),s=JSON.stringify(h_(t));return E.useMemo(()=>m_(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function l2(n,e){return _I(n,e)}function _I(n,e,t,r){var M;gt(fc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=E.useContext(kr),{matches:c}=E.useContext(Lr),d=c[c.length-1],f=d?d.params:{},m=d?d.pathname:"/",y=d?d.pathnameBase:"/",v=d&&d.route;{let k=v&&v.path||"";wI(m,!v||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let w=la(),b;if(e){let k=typeof e=="string"?uc(e):e;gt(y==="/"||((M=k.pathname)==null?void 0:M.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${k.pathname}" was given in the \`location\` prop.`),b=k}else b=w;let A=b.pathname||"/",I=A;if(y!=="/"){let k=y.replace(/^\//,"").split("/");I="/"+A.replace(/^\//,"").split("/").slice(k.length).join("/")}let x=!o&&t&&t.matches&&t.matches.length>0?t.matches:dI(n,{pathname:I});Dr(v||x!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Dr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=h2(x&&x.map(k=>Object.assign({},k,{params:Object.assign({},f,k.params),pathname:zi([y,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?y:zi([y,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),c,t,r);return e&&C?E.createElement(wd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},C):C}function c2(){let n=v2(),e=n2(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=E.createElement(E.Fragment,null,E.createElement("p",null,"💿 Hey developer 👋"),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:o},"ErrorBoundary")," or"," ",E.createElement("code",{style:o},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:s},t):null,c)}var u2=E.createElement(c2,null),d2=class extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?E.createElement(Lr.Provider,{value:this.props.routeContext},E.createElement(p_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function f2({routeContext:n,match:e,children:t}){let r=E.useContext(dc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(Lr.Provider,{value:n},t)}function h2(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let f=s.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);gt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<s.length;f++){let m=s[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:y,errors:v}=t,w=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,m,y)=>{let v,w=!1,b=null,A=null;t&&(v=o&&m.route.id?o[m.route.id]:void 0,b=m.route.errorElement||u2,c&&(d<0&&y===0?(wI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,A=null):d===y&&(w=!0,A=m.route.hydrateFallbackElement||null)));let I=e.concat(s.slice(0,y+1)),x=()=>{let C;return v?C=b:w?C=A:m.route.Component?C=E.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=f,E.createElement(f2,{match:m,routeContext:{outlet:f,matches:I,isDataRoute:t!=null},children:C})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?E.createElement(d2,{location:t.location,revalidation:t.revalidation,component:b,error:v,children:x(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):x()},null)}function g_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m2(n){let e=E.useContext(dc);return gt(e,g_(n)),e}function p2(n){let e=E.useContext(xm);return gt(e,g_(n)),e}function g2(n){let e=E.useContext(Lr);return gt(e,g_(n)),e}function y_(n){let e=g2(n),t=e.matches[e.matches.length-1];return gt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function y2(){return y_("useRouteId")}function v2(){var r;let n=E.useContext(p_),e=p2("useRouteError"),t=y_("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function _2(){let{router:n}=m2("useNavigate"),e=y_("useNavigate"),t=E.useRef(!1);return yI(()=>{t.current=!0}),E.useCallback(async(s,o={})=>{Dr(t.current,gI),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var bT={};function wI(n,e,t){!e&&!bT[n]&&(bT[n]=!0,Dr(!1,t))}E.memo(w2);function w2({routes:n,future:e,state:t}){return _I(n,void 0,t,e)}function EI({to:n,replace:e,state:t,relative:r}){gt(fc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=E.useContext(kr);Dr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=E.useContext(Lr),{pathname:c}=la(),d=No(),f=m_(n,h_(o),c,r==="path"),m=JSON.stringify(f);return E.useEffect(()=>{d(JSON.parse(m),{replace:e,state:t,relative:r})},[d,m,r,e,t]),null}function Ja(n){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function E2({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){gt(!fc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof t=="string"&&(t=uc(t));let{pathname:f="/",search:m="",hash:y="",state:v=null,key:w="default"}=t,b=E.useMemo(()=>{let A=Hi(f,c);return A==null?null:{location:{pathname:A,search:m,hash:y,state:v,key:w},navigationType:r}},[c,f,m,y,v,w,r]);return Dr(b!=null,`<Router basename="${c}"> is not able to match the URL "${f}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:E.createElement(kr.Provider,{value:d},E.createElement(wd.Provider,{children:e,value:b}))}function b2({children:n,location:e}){return l2(cv(n),e)}function cv(n,e=[]){let t=[];return E.Children.forEach(n,(r,s)=>{if(!E.isValidElement(r))return;let o=[...e,s];if(r.type===E.Fragment){t.push.apply(t,cv(r.props.children,o));return}gt(r.type===Ja,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=cv(r.props.children,o)),t.push(c)}),t}var Rh="get",xh="application/x-www-form-urlencoded";function Cm(n){return n!=null&&typeof n.tagName=="string"}function T2(n){return Cm(n)&&n.tagName.toLowerCase()==="button"}function S2(n){return Cm(n)&&n.tagName.toLowerCase()==="form"}function A2(n){return Cm(n)&&n.tagName.toLowerCase()==="input"}function I2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function R2(n,e){return n.button===0&&(!e||e==="_self")&&!I2(n)}var ch=null;function x2(){if(ch===null)try{new FormData(document.createElement("form"),0),ch=!1}catch{ch=!0}return ch}var C2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dy(n){return n!=null&&!C2.has(n)?(Dr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xh}"`),null):n}function N2(n,e){let t,r,s,o,c;if(S2(n)){let d=n.getAttribute("action");r=d?Hi(d,e):null,t=n.getAttribute("method")||Rh,s=Dy(n.getAttribute("enctype"))||xh,o=new FormData(n)}else if(T2(n)||A2(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(r=f?Hi(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Rh,s=Dy(n.getAttribute("formenctype"))||Dy(d.getAttribute("enctype"))||xh,o=new FormData(d,n),!x2()){let{name:m,type:y,value:v}=n;if(y==="image"){let w=m?`${m}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else m&&o.append(m,v)}}else{if(Cm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Rh,r=null,s=xh,c=n}return o&&s==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:c}}function v_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function D2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function O2(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await D2(o,t);return c.links?c.links():[]}return[]}));return L2(r.flat(1).filter(P2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function TT(n,e,t,r,s,o){let c=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>{var y;return t[m].pathname!==f.pathname||((y=t[m].route.path)==null?void 0:y.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return o==="assets"?e.filter((f,m)=>c(f,m)||d(f,m)):o==="data"?e.filter((f,m)=>{var v;let y=r.routes[f.route.id];if(!y||!y.hasLoader)return!1;if(c(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let w=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function M2(n,e,{includeHydrateFallback:t}={}){return V2(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function V2(n){return[...new Set(n)]}function k2(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function L2(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(k2(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function U2(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Hi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function bI(){let n=E.useContext(dc);return v_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function j2(){let n=E.useContext(xm);return v_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var __=E.createContext(void 0);__.displayName="FrameworkContext";function TI(){let n=E.useContext(__);return v_(n,"You must render this element inside a <HydratedRouter> element"),n}function B2(n,e){let t=E.useContext(__),[r,s]=E.useState(!1),[o,c]=E.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:y,onTouchStart:v}=e,w=E.useRef(null);E.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let I=C=>{C.forEach(M=>{c(M.isIntersecting)})},x=new IntersectionObserver(I,{threshold:.5});return w.current&&x.observe(w.current),()=>{x.disconnect()}}},[n]),E.useEffect(()=>{if(r){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[r]);let b=()=>{s(!0)},A=()=>{s(!1),c(!1)};return t?n!=="intent"?[o,w,{}]:[o,w,{onFocus:Pu(d,b),onBlur:Pu(f,A),onMouseEnter:Pu(m,b),onMouseLeave:Pu(y,A),onTouchStart:Pu(v,b)}]:[!1,w,{}]}function Pu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function F2({page:n,...e}){let{router:t}=bI(),r=E.useMemo(()=>dI(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?E.createElement(q2,{page:n,matches:r,...e}):null}function z2(n){let{manifest:e,routeModules:t}=TI(),[r,s]=E.useState([]);return E.useEffect(()=>{let o=!1;return O2(n,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[n,e,t]),r}function q2({page:n,matches:e,...t}){let r=la(),{manifest:s,routeModules:o}=TI(),{basename:c}=bI(),{loaderData:d,matches:f}=j2(),m=E.useMemo(()=>TT(n,e,f,s,r,"data"),[n,e,f,s,r]),y=E.useMemo(()=>TT(n,e,f,s,r,"assets"),[n,e,f,s,r]),v=E.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,I=!1;if(e.forEach(C=>{var k;let M=s.routes[C.route.id];!M||!M.hasLoader||(!m.some($=>$.route.id===C.route.id)&&C.route.id in d&&((k=o[C.route.id])!=null&&k.shouldRevalidate)||M.hasClientLoader?I=!0:A.add(C.route.id))}),A.size===0)return[];let x=U2(n,c);return I&&A.size>0&&x.searchParams.set("_routes",e.filter(C=>A.has(C.route.id)).map(C=>C.route.id).join(",")),[x.pathname+x.search]},[c,d,r,s,m,e,n,o]),w=E.useMemo(()=>M2(y,s),[y,s]),b=z2(y);return E.createElement(E.Fragment,null,v.map(A=>E.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),w.map(A=>E.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),b.map(({key:A,link:I})=>E.createElement("link",{key:A,...I})))}function H2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var SI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{SI&&(window.__reactRouterVersion="7.3.0")}catch{}function G2({basename:n,children:e,window:t}){let r=E.useRef();r.current==null&&(r.current=MO({window:t,v5Compat:!0}));let s=r.current,[o,c]=E.useState({action:s.action,location:s.location}),d=E.useCallback(f=>{E.startTransition(()=>c(f))},[c]);return E.useLayoutEffect(()=>s.listen(d),[s,d]),E.createElement(E2,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var AI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nm=E.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:c,state:d,target:f,to:m,preventScrollReset:y,viewTransition:v,...w},b){let{basename:A}=E.useContext(kr),I=typeof m=="string"&&AI.test(m),x,C=!1;if(typeof m=="string"&&I&&(x=m,SI))try{let D=new URL(window.location.href),U=m.startsWith("//")?new URL(D.protocol+m):new URL(m),B=Hi(U.pathname,A);U.origin===D.origin&&B!=null?m=B+U.search+U.hash:C=!0}catch{Dr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=a2(m,{relative:s}),[k,$,G]=B2(r,w),Y=Q2(m,{replace:c,state:d,target:f,preventScrollReset:y,relative:s,viewTransition:v});function V(D){e&&e(D),D.defaultPrevented||Y(D)}let P=E.createElement("a",{...w,...G,href:x||M,onClick:C||o?e:V,ref:H2(b,$),target:f,"data-discover":!I&&t==="render"?"true":void 0});return k&&!I?E.createElement(E.Fragment,null,P,E.createElement(F2,{page:M})):P});Nm.displayName="Link";var $2=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:c,viewTransition:d,children:f,...m},y){let v=Ed(c,{relative:m.relative}),w=la(),b=E.useContext(xm),{navigator:A,basename:I}=E.useContext(kr),x=b!=null&&eM(v)&&d===!0,C=A.encodeLocation?A.encodeLocation(v).pathname:v.pathname,M=w.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(M=M.toLowerCase(),k=k?k.toLowerCase():null,C=C.toLowerCase()),k&&I&&(k=Hi(k,I)||k);const $=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let G=M===C||!s&&M.startsWith(C)&&M.charAt($)==="/",Y=k!=null&&(k===C||!s&&k.startsWith(C)&&k.charAt(C.length)==="/"),V={isActive:G,isPending:Y,isTransitioning:x},P=G?e:void 0,D;typeof r=="function"?D=r(V):D=[r,G?"active":null,Y?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(V):o;return E.createElement(Nm,{...m,"aria-current":P,className:D,ref:y,style:U,to:c,viewTransition:d},typeof f=="function"?f(V):f)});$2.displayName="NavLink";var K2=E.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:c=Rh,action:d,onSubmit:f,relative:m,preventScrollReset:y,viewTransition:v,...w},b)=>{let A=Z2(),I=J2(d,{relative:m}),x=c.toLowerCase()==="get"?"get":"post",C=typeof d=="string"&&AI.test(d),M=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let $=k.nativeEvent.submitter,G=($==null?void 0:$.getAttribute("formmethod"))||c;A($||k.currentTarget,{fetcherKey:e,method:G,navigate:t,replace:s,state:o,relative:m,preventScrollReset:y,viewTransition:v})};return E.createElement("form",{ref:b,method:x,action:I,onSubmit:r?f:M,...w,"data-discover":!C&&n==="render"?"true":void 0})});K2.displayName="Form";function Y2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function II(n){let e=E.useContext(dc);return gt(e,Y2(n)),e}function Q2(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:c}={}){let d=No(),f=la(),m=Ed(n,{relative:o});return E.useCallback(y=>{if(R2(y,e)){y.preventDefault();let v=t!==void 0?t:Ju(f)===Ju(m);d(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:c})}},[f,d,m,t,r,e,n,s,o,c])}var W2=0,X2=()=>`__${String(++W2)}__`;function Z2(){let{router:n}=II("useSubmit"),{basename:e}=E.useContext(kr),t=y2();return E.useCallback(async(r,s={})=>{let{action:o,method:c,encType:d,formData:f,body:m}=N2(r,e);if(s.navigate===!1){let y=s.fetcherKey||X2();await n.fetch(y,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function J2(n,{relative:e}={}){let{basename:t}=E.useContext(kr),r=E.useContext(Lr);gt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Ed(n||".",{relative:e})},c=la();if(n==null){o.search=c.search;let d=new URLSearchParams(o.search),f=d.getAll("index");if(f.some(y=>y==="")){d.delete("index"),f.filter(v=>v).forEach(v=>d.append("index",v));let y=d.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:zi([t,o.pathname])),Ju(o)}function eM(n,e={}){let t=E.useContext(pI);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=II("useViewTransitionState"),s=Ed(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Hi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Hi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Yh(s.pathname,c)!=null||Yh(s.pathname,o)!=null}new TextEncoder;var hc=uI();const tM=aI(hc),nM=()=>{};var ST={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},rM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],c=n[t++],d=n[t++],f=((s&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},xI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,d=c?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,y=o>>2,v=(o&3)<<4|d>>4;let w=(d&15)<<2|m>>6,b=m&63;f||(b=64,c||(w=64)),r.push(t[y],t[v],t[w],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||d==null||m==null||v==null)throw new iM;const w=o<<2|d>>4;if(r.push(w),m!==64){const b=d<<4&240|m>>2;if(r.push(b),v!==64){const A=m<<6&192|v;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sM=function(n){const e=RI(n);return xI.encodeByteArray(e,!0)},CI=function(n){return sM(n).replace(/\./g,"")},NI=function(n){try{return xI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=()=>aM().__FIREBASE_DEFAULTS__,lM=()=>{if(typeof process>"u"||typeof ST>"u")return;const n=ST.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&NI(n[1]);return e&&JSON.parse(e)},Dm=()=>{try{return nM()||oM()||lM()||cM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uM=n=>{var e,t;return(t=(e=Dm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},DI=()=>{var n;return(n=Dm())===null||n===void 0?void 0:n.config},PI=n=>{var e;return(e=Dm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function hM(){var n;const e=(n=Dm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gM(){const n=Gt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function MI(){return!hM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w_(){try{return typeof indexedDB=="object"}catch{return!1}}function VI(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function yM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="FirebaseError";class yr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vM,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Do.prototype.create)}}class Do{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?_M(o,r):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new yr(s,d,r)}}function _M(n,e){return n.replace(wM,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const wM=/\{\$([^}]+)}/g;function EM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function oi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],c=e[s];if(AT(o)&&AT(c)){if(!oi(o,c))return!1}else if(o!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function AT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ju(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function bM(n,e){const t=new TM(n,e);return t.subscribe.bind(t)}class TM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");SM(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Py),s.error===void 0&&(s.error=Py),s.complete===void 0&&(s.complete=Py);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Py(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=1e3,IM=2,RM=4*60*60*1e3,xM=.5;function IT(n,e=AM,t=IM){const r=e*Math.pow(t,n),s=Math.round(xM*r*(Math.random()-.5)*2);return Math.min(RM,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n){return n&&n._delegate?n._delegate:n}class Pr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CM=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new dM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DM(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&c.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function NM(n){return n===eo?void 0:n}function DM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new CM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const OM={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},MM=Ke.INFO,VM={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},kM=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=VM[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=MM,this._logHandler=kM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const LM=(n,e)=>e.some(t=>n instanceof t);let RT,xT;function UM(){return RT||(RT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jM(){return xT||(xT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kI=new WeakMap,uv=new WeakMap,LI=new WeakMap,Oy=new WeakMap,E_=new WeakMap;function BM(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Ws(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&kI.set(t,n)}).catch(()=>{}),E_.set(e,n),e}function FM(n){if(uv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});uv.set(n,e)}let dv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return uv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||LI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zM(n){dv=n(dv)}function qM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(My(this),e,...t);return LI.set(r,e.sort?e.sort():[e]),Ws(r)}:jM().includes(n)?function(...e){return n.apply(My(this),e),Ws(kI.get(this))}:function(...e){return Ws(n.apply(My(this),e))}}function HM(n){return typeof n=="function"?qM(n):(n instanceof IDBTransaction&&FM(n),LM(n,UM())?new Proxy(n,dv):n)}function Ws(n){if(n instanceof IDBRequest)return BM(n);if(Oy.has(n))return Oy.get(n);const e=HM(n);return e!==n&&(Oy.set(n,e),E_.set(e,n)),e}const My=n=>E_.get(n);function UI(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const c=indexedDB.open(n,e),d=Ws(c);return r&&c.addEventListener("upgradeneeded",f=>{r(Ws(c.result),f.oldVersion,f.newVersion,Ws(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const GM=["get","getKey","getAll","getAllKeys","count"],$M=["put","add","delete","clear"],Vy=new Map;function CT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vy.get(e))return Vy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=$M.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||GM.includes(t)))return;const o=async function(c,...d){const f=this.transaction(c,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return Vy.set(e,o),o}zM(n=>({...n,get:(e,t,r)=>CT(e,t)||n.get(e,t,r),has:(e,t)=>!!CT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function YM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fv="@firebase/app",NT="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=new Pm("@firebase/app"),QM="@firebase/app-compat",WM="@firebase/analytics-compat",XM="@firebase/analytics",ZM="@firebase/app-check-compat",JM="@firebase/app-check",eV="@firebase/auth",tV="@firebase/auth-compat",nV="@firebase/database",rV="@firebase/data-connect",iV="@firebase/database-compat",sV="@firebase/functions",aV="@firebase/functions-compat",oV="@firebase/installations",lV="@firebase/installations-compat",cV="@firebase/messaging",uV="@firebase/messaging-compat",dV="@firebase/performance",fV="@firebase/performance-compat",hV="@firebase/remote-config",mV="@firebase/remote-config-compat",pV="@firebase/storage",gV="@firebase/storage-compat",yV="@firebase/firestore",vV="@firebase/vertexai",_V="@firebase/firestore-compat",wV="firebase",EV="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="[DEFAULT]",bV={[fv]:"fire-core",[QM]:"fire-core-compat",[XM]:"fire-analytics",[WM]:"fire-analytics-compat",[JM]:"fire-app-check",[ZM]:"fire-app-check-compat",[eV]:"fire-auth",[tV]:"fire-auth-compat",[nV]:"fire-rtdb",[rV]:"fire-data-connect",[iV]:"fire-rtdb-compat",[sV]:"fire-fn",[aV]:"fire-fn-compat",[oV]:"fire-iid",[lV]:"fire-iid-compat",[cV]:"fire-fcm",[uV]:"fire-fcm-compat",[dV]:"fire-perf",[fV]:"fire-perf-compat",[hV]:"fire-rc",[mV]:"fire-rc-compat",[pV]:"fire-gcs",[gV]:"fire-gcs-compat",[yV]:"fire-fst",[_V]:"fire-fst-compat",[vV]:"fire-vertex","fire-js":"fire-js",[wV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new Map,TV=new Map,mv=new Map;function DT(n,e){try{n.container.addComponent(e)}catch(t){Gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function li(n){const e=n.name;if(mv.has(e))return Gi.debug(`There were multiple attempts to register component ${e}.`),!1;mv.set(e,n);for(const t of Qh.values())DT(t,n);for(const t of TV.values())DT(t,n);return!0}function Po(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xs=new Do("app","Firebase",SV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=EV;function jI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hv,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Xs.create("bad-app-name",{appName:String(s)});if(t||(t=DI()),!t)throw Xs.create("no-options");const o=Qh.get(s);if(o){if(oi(t,o.options)&&oi(r,o.config))return o;throw Xs.create("duplicate-app",{appName:s})}const c=new PM(s);for(const f of mv.values())c.addComponent(f);const d=new AV(t,r,c);return Qh.set(s,d),d}function BI(n=hv){const e=Qh.get(n);if(!e&&n===hv&&DI())return jI();if(!e)throw Xs.create("no-app",{appName:n});return e}function mr(n,e,t){var r;let s=(r=bV[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gi.warn(d.join(" "));return}li(new Pr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV="firebase-heartbeat-database",RV=1,ed="firebase-heartbeat-store";let ky=null;function FI(){return ky||(ky=UI(IV,RV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ed)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xs.create("idb-open",{originalErrorMessage:n.message})})),ky}async function xV(n){try{const t=(await FI()).transaction(ed),r=await t.objectStore(ed).get(zI(n));return await t.done,r}catch(e){if(e instanceof yr)Gi.warn(e.message);else{const t=Xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gi.warn(t.message)}}}async function PT(n,e){try{const r=(await FI()).transaction(ed,"readwrite");await r.objectStore(ed).put(e,zI(n)),await r.done}catch(t){if(t instanceof yr)Gi.warn(t.message);else{const r=Xs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Gi.warn(r.message)}}}function zI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=1024,NV=30;class DV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OV(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=OT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>NV){const c=MV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=OT(),{heartbeatsToSend:r,unsentEntries:s}=PV(this._heartbeatsCache.heartbeats),o=CI(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Gi.warn(t),""}}}function OT(){return new Date().toISOString().substring(0,10)}function PV(n,e=CV){const t=[];let r=n.slice();for(const s of n){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),MT(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),MT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class OV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return w_()?VI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return PT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return PT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function MT(n){return CI(JSON.stringify({version:2,heartbeats:n})).length}function MV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(n){li(new Pr("platform-logger",e=>new KM(e),"PRIVATE")),li(new Pr("heartbeat",e=>new DV(e),"PRIVATE")),mr(fv,NT,n),mr(fv,NT,"esm2017"),mr("fire-js","")}VV("");var ti=function(){return ti=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ti.apply(this,arguments)};function Td(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function kV(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function qI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LV=qI,HI=new Do("auth","Firebase",qI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Pm("@firebase/auth");function UV(n,...e){Wh.logLevel<=Ke.WARN&&Wh.warn(`Auth (${mc}): ${n}`,...e)}function Ch(n,...e){Wh.logLevel<=Ke.ERROR&&Wh.error(`Auth (${mc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(n,...e){throw b_(n,...e)}function ii(n,...e){return b_(n,...e)}function GI(n,e,t){const r=Object.assign(Object.assign({},LV()),{[e]:t});return new Do("auth","Firebase",r).create(e,{appName:n.name})}function qi(n){return GI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function b_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HI.create(n,...e)}function Oe(n,e,...t){if(!n)throw b_(e,...t)}function Ui(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ch(e),new Error(e)}function $i(n,e){n||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function jV(){return VT()==="http:"||VT()==="https:"}function VT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jV()||OI()||"connection"in navigator)?navigator.onLine:!0}function FV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=fM()||pM()}get(){return BV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(n,e){$i(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=new Sd(3e4,6e4);function ca(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ua(n,e,t,r,s={}){return KI(n,s,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const d=bd(Object.assign({key:n.config.apiKey},c)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},o);return mM()||(m.referrerPolicy="no-referrer"),$I.fetch()(YI(n,n.config.apiHost,t,d),m)})}async function KI(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},zV),e);try{const s=new GV(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw uh(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw uh(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw uh(n,"user-disabled",c);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw GI(n,y,m);Or(n,y)}}catch(s){if(s instanceof yr)throw s;Or(n,"network-request-failed",{message:String(s)})}}async function Ad(n,e,t,r,s={}){const o=await ua(n,e,t,r,s);return"mfaPendingCredential"in o&&Or(n,"multi-factor-auth-required",{_serverResponse:o}),o}function YI(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?T_(n.config,s):`${n.config.apiScheme}://${s}`}function HV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ii(this.auth,"network-request-failed")),qV.get())})}}function uh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=ii(n,e,r);return s.customData._tokenResponse=t,s}function kT(n){return n!==void 0&&n.enterprise!==void 0}class $V{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KV(n,e){return ua(n,"GET","/v2/recaptchaConfig",ca(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(n,e){return ua(n,"POST","/v1/accounts:delete",e)}async function QI(n,e){return ua(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QV(n,e=!1){const t=kt(n),r=await t.getIdToken(e),s=S_(r);Oe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Gu(Ly(s.auth_time)),issuedAtTime:Gu(Ly(s.iat)),expirationTime:Gu(Ly(s.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ly(n){return Number(n)*1e3}function S_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const s=NI(t);return s?JSON.parse(s):(Ch("Failed to decode base64 JWT payload"),null)}catch(s){return Ch("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LT(n){const e=S_(n);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof yr&&WV(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function WV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gu(this.lastLoginAt),this.creationTime=Gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await td(n,QI(t,{idToken:r}));Oe(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?WI(o.providerUserInfo):[],d=JV(n.providerData,c),f=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(d!=null&&d.length),y=f?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new gv(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function ZV(n){const e=kt(n);await Xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JV(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function WI(n){return n.map(e=>{var{providerId:t}=e,r=Td(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(n,e){const t=await KI(n,{},async()=>{const r=bd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=YI(n,s,"/v1/token",`key=${o}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",$I.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tk(n,e){return ua(n,"POST","/v2/accounts:revokeToken",ca(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=LT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await ek(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,c=new zl;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Oe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(Oe(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zl,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(n,e){Oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ji{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=Td(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gv(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await td(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QV(this,e)}reload(){return ZV(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ji(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await td(this,YV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,c,d,f,m,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(s=t.email)!==null&&s!==void 0?s:void 0,b=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,A=(c=t.photoURL)!==null&&c!==void 0?c:void 0,I=(d=t.tenantId)!==null&&d!==void 0?d:void 0,x=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,C=(m=t.createdAt)!==null&&m!==void 0?m:void 0,M=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:k,emailVerified:$,isAnonymous:G,providerData:Y,stsTokenManager:V}=t;Oe(k&&V,e,"internal-error");const P=zl.fromJSON(this.name,V);Oe(typeof k=="string",e,"internal-error"),ks(v,e.name),ks(w,e.name),Oe(typeof $=="boolean",e,"internal-error"),Oe(typeof G=="boolean",e,"internal-error"),ks(b,e.name),ks(A,e.name),ks(I,e.name),ks(x,e.name),ks(C,e.name),ks(M,e.name);const D=new ji({uid:k,auth:e,email:w,emailVerified:$,displayName:v,isAnonymous:G,photoURL:A,phoneNumber:b,tenantId:I,stsTokenManager:P,createdAt:C,lastLoginAt:M});return Y&&Array.isArray(Y)&&(D.providerData=Y.map(U=>Object.assign({},U))),x&&(D._redirectEventId=x),D}static async _fromIdTokenResponse(e,t,r=!1){const s=new zl;s.updateFromServerResponse(t);const o=new ji({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xh(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Oe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?WI(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),d=new zl;d.updateFromIdToken(r);const f=new ji({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new gv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;function Bi(n){$i(n instanceof Function,"Expected a class definition");let e=UT.get(n);return e?($i(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}XI.type="NONE";const jT=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(n,e,t){return`firebase:${n}:${e}:${t}`}class ql{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Nh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Nh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ji._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ql(Bi(jT),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||Bi(jT);const c=Nh(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const y=await m._get(c);if(y){const v=ji._fromJSON(e,y);m!==o&&(d=v),o=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new ql(o,e,r):(o=f[0],d&&await o._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new ql(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rR(e))return"Blackberry";if(iR(e))return"Webos";if(JI(e))return"Safari";if((e.includes("chrome/")||eR(e))&&!e.includes("edge/"))return"Chrome";if(nR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ZI(n=Gt()){return/firefox\//i.test(n)}function JI(n=Gt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eR(n=Gt()){return/crios\//i.test(n)}function tR(n=Gt()){return/iemobile/i.test(n)}function nR(n=Gt()){return/android/i.test(n)}function rR(n=Gt()){return/blackberry/i.test(n)}function iR(n=Gt()){return/webos/i.test(n)}function A_(n=Gt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nk(n=Gt()){var e;return A_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rk(){return gM()&&document.documentMode===10}function sR(n=Gt()){return A_(n)||nR(n)||iR(n)||rR(n)||/windows phone/i.test(n)||tR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(n,e=[]){let t;switch(n){case"Browser":t=BT(Gt());break;case"Worker":t=`${BT(Gt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,d)=>{try{const f=e(o);c(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(n,e={}){return ua(n,"GET","/v2/passwordPolicy",ca(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=6;class ok{constructor(e){var t,r,s,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:ak,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FT(this),this.idTokenSubscription=new FT(this),this.beforeStateQueue=new ik(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bi(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ql.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await QI(this,{idToken:e}),r=await ji._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(fr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&(f!=null&&f.user)&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fr(this.app))return Promise.reject(qi(this));const t=e?kt(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fr(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sk(this),t=new ok(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Do("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await tk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bi(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await ql.create(this,[Bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&UV(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Oo(n){return kt(n)}class FT{constructor(e){this.auth=e,this.observer=null,this.addObserver=bM(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ck(n){Om=n}function oR(n){return Om.loadJS(n)}function uk(){return Om.recaptchaEnterpriseScript}function dk(){return Om.gapiScript}function fk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class hk{constructor(){this.enterprise=new mk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pk="recaptcha-enterprise",lR="NO_RECAPTCHA";class gk{constructor(e){this.type=pk,this.auth=Oo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{KV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new $V(f);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(f=>{d(f)})})}function s(o,c,d){const f=window.grecaptcha;kT(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(m=>{c(m)}).catch(()=>{c(lR)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hk().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(d=>{if(!t&&kT(window.grecaptcha))s(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=uk();f.length!==0&&(f+=d),oR(f).then(()=>{s(d,o,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function zT(n,e,t,r=!1,s=!1){const o=new gk(n);let c;if(s)c=lR;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function yv(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await zT(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await zT(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(n,e){const t=Po(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(oi(o,e??{}))return s;Or(s,"already-initialized")}return t.initialize({options:e})}function vk(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Bi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _k(n,e,t){const r=Oo(n);Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=cR(e),{host:c,port:d}=wk(e),f=d===null?"":`:${d}`,m={url:`${o}//${c}${f}/`},y=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Oe(oi(m,r.config.emulator)&&oi(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Ek()}function cR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wk(n){const e=cR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:qT(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:qT(c)}}}function qT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Ek(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,t){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function bk(n,e){return ua(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(n,e){return Ad(n,"POST","/v1/accounts:signInWithPassword",ca(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,e){return Ad(n,"POST","/v1/accounts:signInWithEmailLink",ca(n,e))}async function Ak(n,e){return Ad(n,"POST","/v1/accounts:signInWithEmailLink",ca(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends I_{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new nd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new nd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yv(e,t,"signInWithPassword",Tk);case"emailLink":return Sk(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yv(e,r,"signUpPassword",bk);case"emailLink":return Ak(e,{idToken:t,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(n,e){return Ad(n,"POST","/v1/accounts:signInWithIdp",ca(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="http://localhost";class po extends I_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=Td(t,["providerId","signInMethod"]);if(!r||!s)return null;const c=new po(r,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Hl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Hl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Hl(e,t)}buildRequest(){const e={requestUri:Ik,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xk(n){const e=Uu(ju(n)).link,t=e?Uu(ju(e)).deep_link_id:null,r=Uu(ju(n)).deep_link_id;return(r?Uu(ju(r)).link:null)||r||t||e||n}class R_{constructor(e){var t,r,s,o,c,d;const f=Uu(ju(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,y=(r=f.oobCode)!==null&&r!==void 0?r:null,v=Rk((s=f.mode)!==null&&s!==void 0?s:null);Oe(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=f.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=xk(e);try{return new R_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.providerId=pc.PROVIDER_ID}static credential(e,t){return nd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=R_.parseLink(t);return Oe(r,"argument-error"),nd._fromEmailAndCode(e,r.code,r.tenantId)}}pc.PROVIDER_ID="password";pc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends uR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Id{constructor(){super("facebook.com")}static credential(e){return po._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return po._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Hs.credential(t,r)}catch{return null}}}Hs.GOOGLE_SIGN_IN_METHOD="google.com";Hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Id{constructor(){super("github.com")}static credential(e){return po._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Id{constructor(){super("twitter.com")}static credential(e,t){return po._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return $s.credential(t,r)}catch{return null}}}$s.TWITTER_SIGN_IN_METHOD="twitter.com";$s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(n,e){return Ad(n,"POST","/v1/accounts:signUp",ca(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await ji._fromIdTokenResponse(e,r,s),c=HT(r);return new go({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=HT(r);return new go({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function HT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends yr{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Zh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Zh(e,t,r,s)}}function dR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Zh._fromErrorAndOperation(n,o,e,r):o})}async function Nk(n,e,t=!1){const r=await td(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return go._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(n,e,t=!1){const{auth:r}=n;if(fr(r.app))return Promise.reject(qi(r));const s="reauthenticate";try{const o=await td(n,dR(r,s,e,n),t);Oe(o.idToken,r,"internal-error");const c=S_(o.idToken);Oe(c,r,"internal-error");const{sub:d}=c;return Oe(n.uid===d,r,"user-mismatch"),go._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Or(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(n,e,t=!1){if(fr(n.app))return Promise.reject(qi(n));const r="signIn",s=await dR(n,r,e),o=await go._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function Pk(n,e){return fR(Oo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(n){const e=Oo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ok(n,e,t){if(fr(n.app))return Promise.reject(qi(n));const r=Oo(n),c=await yv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ck).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&hR(n),f}),d=await go._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function Mk(n,e,t){return fr(n.app)?Promise.reject(qi(n)):Pk(kt(n),pc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hR(n),r})}function Vk(n,e,t,r){return kt(n).onIdTokenChanged(e,t,r)}function kk(n,e,t){return kt(n).beforeAuthStateChanged(e,t)}function Lk(n,e,t,r){return kt(n).onAuthStateChanged(e,t,r)}function Uk(n){return kt(n).signOut()}const Jh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jh,"1"),this.storage.removeItem(Jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=1e3,Bk=10;class pR extends mR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);rk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Bk):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pR.type="LOCAL";const Fk=pR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR extends mR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gR.type="SESSION";const yR=gR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(c).map(async m=>m(t.origin,o)),f=await zk(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((d,f)=>{const m=x_("",20);s.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(v){const w=v;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(w.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return window}function Hk(n){si().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function Gk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $k(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Kk(){return vR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="firebaseLocalStorageDb",Yk=1,em="firebaseLocalStorage",wR="fbase_key";class Rd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vm(n,e){return n.transaction([em],e?"readwrite":"readonly").objectStore(em)}function Qk(){const n=indexedDB.deleteDatabase(_R);return new Rd(n).toPromise()}function vv(){const n=indexedDB.open(_R,Yk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(em,{keyPath:wR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(em)?e(r):(r.close(),await Qk(),e(await vv()))})})}async function GT(n,e,t){const r=Vm(n,!0).put({[wR]:e,value:t});return new Rd(r).toPromise()}async function Wk(n,e){const t=Vm(n,!1).get(e),r=await new Rd(t).toPromise();return r===void 0?null:r.value}function $T(n,e){const t=Vm(n,!0).delete(e);return new Rd(t).toPromise()}const Xk=800,Zk=3;class ER{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Zk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mm._getInstance(Kk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Gk(),!this.activeServiceWorker)return;this.sender=new qk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$k()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vv();return await GT(e,Jh,"1"),await $T(e,Jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>GT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Wk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$T(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Vm(s,!1).getAll();return new Rd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ER.type="LOCAL";const Jk=ER;new Sd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(n,e){return e?Bi(e):(Oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends I_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Hl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Hl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tL(n){return fR(n.auth,new C_(n),n.bypassAuthState)}function nL(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),Dk(t,new C_(n),n.bypassAuthState)}async function rL(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),Nk(t,new C_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tL;case"linkViaPopup":case"linkViaRedirect":return rL;case"reauthViaPopup":case"reauthViaRedirect":return nL;default:Or(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new Sd(2e3,1e4);class Bl extends bR{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Bl.currentPopupAction&&Bl.currentPopupAction.cancel(),Bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=x_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iL.get())};e()}}Bl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="pendingRedirect",Dh=new Map;class aL extends bR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Dh.get(this.auth._key());if(!e){try{const r=await oL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Dh.set(this.auth._key(),e)}return this.bypassAuthState||Dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oL(n,e){const t=uL(e),r=cL(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function lL(n,e){Dh.set(n._key(),e)}function cL(n){return Bi(n._redirectPersistence)}function uL(n){return Nh(sL,n.config.apiKey,n.name)}async function dL(n,e,t=!1){if(fr(n.app))return Promise.reject(qi(n));const r=Oo(n),s=eL(r,e),c=await new aL(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=10*60*1e3;class hL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!TR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ii(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fL&&this.cachedEventUids.clear(),this.cachedEventUids.has(KT(e))}saveEventToCache(e){this.cachedEventUids.add(KT(e)),this.lastProcessedEventTime=Date.now()}}function KT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function TR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(n,e={}){return ua(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yL=/^https?/;async function vL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await pL(n);for(const t of e)try{if(_L(t))return}catch{}Or(n,"unauthorized-domain")}function _L(n){const e=pv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!yL.test(t))return!1;if(gL.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=new Sd(3e4,6e4);function YT(){const n=si().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function EL(n){return new Promise((e,t)=>{var r,s,o;function c(){YT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YT(),t(ii(n,"network-request-failed"))},timeout:wL.get()})}if(!((s=(r=si().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=si().gapi)===null||o===void 0)&&o.load)c();else{const d=fk("iframefcb");return si()[d]=()=>{gapi.load?c():t(ii(n,"network-request-failed"))},oR(`${dk()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Ph=null,e})}let Ph=null;function bL(n){return Ph=Ph||EL(n),Ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Sd(5e3,15e3),SL="__/auth/iframe",AL="emulator/auth/iframe",IL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xL(n){const e=n.config;Oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?T_(e,AL):`https://${n.config.authDomain}/${SL}`,r={apiKey:e.apiKey,appName:n.name,v:mc},s=RL.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${bd(r).slice(1)}`}async function CL(n){const e=await bL(n),t=si().gapi;return Oe(t,n,"internal-error"),e.open({where:document.body,url:xL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IL,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const c=ii(n,"network-request-failed"),d=si().setTimeout(()=>{o(c)},TL.get());function f(){si().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DL=500,PL=600,OL="_blank",ML="http://localhost";class QT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VL(n,e,t,r=DL,s=PL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},NL),{width:r.toString(),height:s.toString(),top:o,left:c}),m=Gt().toLowerCase();t&&(d=eR(m)?OL:t),ZI(m)&&(e=e||ML,f.scrollbars="yes");const y=Object.entries(f).reduce((w,[b,A])=>`${w}${b}=${A},`,"");if(nk(m)&&d!=="_self")return kL(e||"",d),new QT(null);const v=window.open(e||"",d,y);Oe(v,n,"popup-blocked");try{v.focus()}catch{}return new QT(v)}function kL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="__/auth/handler",UL="emulator/auth/handler",jL=encodeURIComponent("fac");async function WT(n,e,t,r,s,o){Oe(n.config.authDomain,n,"auth-domain-config-required"),Oe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:mc,eventId:s};if(e instanceof uR){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",EM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof Id){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await n._getAppCheckToken(),m=f?`#${jL}=${encodeURIComponent(f)}`:"";return`${BL(n)}?${bd(d).slice(1)}${m}`}function BL({config:n}){return n.emulator?T_(n,UL):`https://${n.authDomain}/${LL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="webStorageSupport";class FL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yR,this._completeRedirectFn=dL,this._overrideRedirectResult=lL}async _openPopup(e,t,r,s){var o;$i((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await WT(e,t,r,pv(),s);return VL(e,c,x_())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await WT(e,t,r,pv(),s);return Hk(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):($i(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await CL(e),r=new hL(e);return t.register("authEvent",s=>(Oe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Uy,{type:Uy},s=>{var o;const c=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Uy];c!==void 0&&t(!!c),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sR()||JI()||A_()}}const zL=FL;var XT="@firebase/auth",ZT="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GL(n){li(new Pr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Oe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aR(n)},m=new lk(r,s,o,f);return vk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),li(new Pr("auth-internal",e=>{const t=Oo(e.getProvider("auth").getImmediate());return(r=>new qL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(XT,ZT,HL(n)),mr(XT,ZT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=5*60,KL=PI("authIdTokenMaxAge")||$L;let JT=null;const YL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>KL)return;const s=t==null?void 0:t.token;JT!==s&&(JT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function QL(n=BI()){const e=Po(n,"auth");if(e.isInitialized())return e.getImmediate();const t=yk(n,{popupRedirectResolver:zL,persistence:[Jk,Fk,yR]}),r=PI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=YL(o.toString());kk(t,c,()=>c(t.currentUser)),Vk(t,d=>c(d))}}const s=uM("auth");return s&&_k(t,`http://${s}`),t}function WL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ck({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=ii("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",WL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GL("Browser");var eS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,SR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,P){function D(){}D.prototype=P.prototype,V.D=P.prototype,V.prototype=new D,V.prototype.constructor=V,V.C=function(U,B,z){for(var L=Array(arguments.length-2),le=2;le<arguments.length;le++)L[le-2]=arguments[le];return P.prototype[B].apply(U,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(V,P,D){D||(D=0);var U=Array(16);if(typeof P=="string")for(var B=0;16>B;++B)U[B]=P.charCodeAt(D++)|P.charCodeAt(D++)<<8|P.charCodeAt(D++)<<16|P.charCodeAt(D++)<<24;else for(B=0;16>B;++B)U[B]=P[D++]|P[D++]<<8|P[D++]<<16|P[D++]<<24;P=V.g[0],D=V.g[1],B=V.g[2];var z=V.g[3],L=P+(z^D&(B^z))+U[0]+3614090360&4294967295;P=D+(L<<7&4294967295|L>>>25),L=z+(B^P&(D^B))+U[1]+3905402710&4294967295,z=P+(L<<12&4294967295|L>>>20),L=B+(D^z&(P^D))+U[2]+606105819&4294967295,B=z+(L<<17&4294967295|L>>>15),L=D+(P^B&(z^P))+U[3]+3250441966&4294967295,D=B+(L<<22&4294967295|L>>>10),L=P+(z^D&(B^z))+U[4]+4118548399&4294967295,P=D+(L<<7&4294967295|L>>>25),L=z+(B^P&(D^B))+U[5]+1200080426&4294967295,z=P+(L<<12&4294967295|L>>>20),L=B+(D^z&(P^D))+U[6]+2821735955&4294967295,B=z+(L<<17&4294967295|L>>>15),L=D+(P^B&(z^P))+U[7]+4249261313&4294967295,D=B+(L<<22&4294967295|L>>>10),L=P+(z^D&(B^z))+U[8]+1770035416&4294967295,P=D+(L<<7&4294967295|L>>>25),L=z+(B^P&(D^B))+U[9]+2336552879&4294967295,z=P+(L<<12&4294967295|L>>>20),L=B+(D^z&(P^D))+U[10]+4294925233&4294967295,B=z+(L<<17&4294967295|L>>>15),L=D+(P^B&(z^P))+U[11]+2304563134&4294967295,D=B+(L<<22&4294967295|L>>>10),L=P+(z^D&(B^z))+U[12]+1804603682&4294967295,P=D+(L<<7&4294967295|L>>>25),L=z+(B^P&(D^B))+U[13]+4254626195&4294967295,z=P+(L<<12&4294967295|L>>>20),L=B+(D^z&(P^D))+U[14]+2792965006&4294967295,B=z+(L<<17&4294967295|L>>>15),L=D+(P^B&(z^P))+U[15]+1236535329&4294967295,D=B+(L<<22&4294967295|L>>>10),L=P+(B^z&(D^B))+U[1]+4129170786&4294967295,P=D+(L<<5&4294967295|L>>>27),L=z+(D^B&(P^D))+U[6]+3225465664&4294967295,z=P+(L<<9&4294967295|L>>>23),L=B+(P^D&(z^P))+U[11]+643717713&4294967295,B=z+(L<<14&4294967295|L>>>18),L=D+(z^P&(B^z))+U[0]+3921069994&4294967295,D=B+(L<<20&4294967295|L>>>12),L=P+(B^z&(D^B))+U[5]+3593408605&4294967295,P=D+(L<<5&4294967295|L>>>27),L=z+(D^B&(P^D))+U[10]+38016083&4294967295,z=P+(L<<9&4294967295|L>>>23),L=B+(P^D&(z^P))+U[15]+3634488961&4294967295,B=z+(L<<14&4294967295|L>>>18),L=D+(z^P&(B^z))+U[4]+3889429448&4294967295,D=B+(L<<20&4294967295|L>>>12),L=P+(B^z&(D^B))+U[9]+568446438&4294967295,P=D+(L<<5&4294967295|L>>>27),L=z+(D^B&(P^D))+U[14]+3275163606&4294967295,z=P+(L<<9&4294967295|L>>>23),L=B+(P^D&(z^P))+U[3]+4107603335&4294967295,B=z+(L<<14&4294967295|L>>>18),L=D+(z^P&(B^z))+U[8]+1163531501&4294967295,D=B+(L<<20&4294967295|L>>>12),L=P+(B^z&(D^B))+U[13]+2850285829&4294967295,P=D+(L<<5&4294967295|L>>>27),L=z+(D^B&(P^D))+U[2]+4243563512&4294967295,z=P+(L<<9&4294967295|L>>>23),L=B+(P^D&(z^P))+U[7]+1735328473&4294967295,B=z+(L<<14&4294967295|L>>>18),L=D+(z^P&(B^z))+U[12]+2368359562&4294967295,D=B+(L<<20&4294967295|L>>>12),L=P+(D^B^z)+U[5]+4294588738&4294967295,P=D+(L<<4&4294967295|L>>>28),L=z+(P^D^B)+U[8]+2272392833&4294967295,z=P+(L<<11&4294967295|L>>>21),L=B+(z^P^D)+U[11]+1839030562&4294967295,B=z+(L<<16&4294967295|L>>>16),L=D+(B^z^P)+U[14]+4259657740&4294967295,D=B+(L<<23&4294967295|L>>>9),L=P+(D^B^z)+U[1]+2763975236&4294967295,P=D+(L<<4&4294967295|L>>>28),L=z+(P^D^B)+U[4]+1272893353&4294967295,z=P+(L<<11&4294967295|L>>>21),L=B+(z^P^D)+U[7]+4139469664&4294967295,B=z+(L<<16&4294967295|L>>>16),L=D+(B^z^P)+U[10]+3200236656&4294967295,D=B+(L<<23&4294967295|L>>>9),L=P+(D^B^z)+U[13]+681279174&4294967295,P=D+(L<<4&4294967295|L>>>28),L=z+(P^D^B)+U[0]+3936430074&4294967295,z=P+(L<<11&4294967295|L>>>21),L=B+(z^P^D)+U[3]+3572445317&4294967295,B=z+(L<<16&4294967295|L>>>16),L=D+(B^z^P)+U[6]+76029189&4294967295,D=B+(L<<23&4294967295|L>>>9),L=P+(D^B^z)+U[9]+3654602809&4294967295,P=D+(L<<4&4294967295|L>>>28),L=z+(P^D^B)+U[12]+3873151461&4294967295,z=P+(L<<11&4294967295|L>>>21),L=B+(z^P^D)+U[15]+530742520&4294967295,B=z+(L<<16&4294967295|L>>>16),L=D+(B^z^P)+U[2]+3299628645&4294967295,D=B+(L<<23&4294967295|L>>>9),L=P+(B^(D|~z))+U[0]+4096336452&4294967295,P=D+(L<<6&4294967295|L>>>26),L=z+(D^(P|~B))+U[7]+1126891415&4294967295,z=P+(L<<10&4294967295|L>>>22),L=B+(P^(z|~D))+U[14]+2878612391&4294967295,B=z+(L<<15&4294967295|L>>>17),L=D+(z^(B|~P))+U[5]+4237533241&4294967295,D=B+(L<<21&4294967295|L>>>11),L=P+(B^(D|~z))+U[12]+1700485571&4294967295,P=D+(L<<6&4294967295|L>>>26),L=z+(D^(P|~B))+U[3]+2399980690&4294967295,z=P+(L<<10&4294967295|L>>>22),L=B+(P^(z|~D))+U[10]+4293915773&4294967295,B=z+(L<<15&4294967295|L>>>17),L=D+(z^(B|~P))+U[1]+2240044497&4294967295,D=B+(L<<21&4294967295|L>>>11),L=P+(B^(D|~z))+U[8]+1873313359&4294967295,P=D+(L<<6&4294967295|L>>>26),L=z+(D^(P|~B))+U[15]+4264355552&4294967295,z=P+(L<<10&4294967295|L>>>22),L=B+(P^(z|~D))+U[6]+2734768916&4294967295,B=z+(L<<15&4294967295|L>>>17),L=D+(z^(B|~P))+U[13]+1309151649&4294967295,D=B+(L<<21&4294967295|L>>>11),L=P+(B^(D|~z))+U[4]+4149444226&4294967295,P=D+(L<<6&4294967295|L>>>26),L=z+(D^(P|~B))+U[11]+3174756917&4294967295,z=P+(L<<10&4294967295|L>>>22),L=B+(P^(z|~D))+U[2]+718787259&4294967295,B=z+(L<<15&4294967295|L>>>17),L=D+(z^(B|~P))+U[9]+3951481745&4294967295,V.g[0]=V.g[0]+P&4294967295,V.g[1]=V.g[1]+(B+(L<<21&4294967295|L>>>11))&4294967295,V.g[2]=V.g[2]+B&4294967295,V.g[3]=V.g[3]+z&4294967295}r.prototype.u=function(V,P){P===void 0&&(P=V.length);for(var D=P-this.blockSize,U=this.B,B=this.h,z=0;z<P;){if(B==0)for(;z<=D;)s(this,V,z),z+=this.blockSize;if(typeof V=="string"){for(;z<P;)if(U[B++]=V.charCodeAt(z++),B==this.blockSize){s(this,U),B=0;break}}else for(;z<P;)if(U[B++]=V[z++],B==this.blockSize){s(this,U),B=0;break}}this.h=B,this.o+=P},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var P=1;P<V.length-8;++P)V[P]=0;var D=8*this.o;for(P=V.length-8;P<V.length;++P)V[P]=D&255,D/=256;for(this.u(V),V=Array(16),P=D=0;4>P;++P)for(var U=0;32>U;U+=8)V[D++]=this.g[P]>>>U&255;return V};function o(V,P){var D=d;return Object.prototype.hasOwnProperty.call(D,V)?D[V]:D[V]=P(V)}function c(V,P){this.h=P;for(var D=[],U=!0,B=V.length-1;0<=B;B--){var z=V[B]|0;U&&z==P||(D[B]=z,U=!1)}this.g=D}var d={};function f(V){return-128<=V&&128>V?o(V,function(P){return new c([P|0],0>P?-1:0)}):new c([V|0],0>V?-1:0)}function m(V){if(isNaN(V)||!isFinite(V))return v;if(0>V)return x(m(-V));for(var P=[],D=1,U=0;V>=D;U++)P[U]=V/D|0,D*=4294967296;return new c(P,0)}function y(V,P){if(V.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(V.charAt(0)=="-")return x(y(V.substring(1),P));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=m(Math.pow(P,8)),U=v,B=0;B<V.length;B+=8){var z=Math.min(8,V.length-B),L=parseInt(V.substring(B,B+z),P);8>z?(z=m(Math.pow(P,z)),U=U.j(z).add(m(L))):(U=U.j(D),U=U.add(m(L)))}return U}var v=f(0),w=f(1),b=f(16777216);n=c.prototype,n.m=function(){if(I(this))return-x(this).m();for(var V=0,P=1,D=0;D<this.g.length;D++){var U=this.i(D);V+=(0<=U?U:4294967296+U)*P,P*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(A(this))return"0";if(I(this))return"-"+x(this).toString(V);for(var P=m(Math.pow(V,6)),D=this,U="";;){var B=$(D,P).g;D=C(D,B.j(P));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(V);if(D=B,A(D))return z+U;for(;6>z.length;)z="0"+z;U=z+U}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function A(V){if(V.h!=0)return!1;for(var P=0;P<V.g.length;P++)if(V.g[P]!=0)return!1;return!0}function I(V){return V.h==-1}n.l=function(V){return V=C(this,V),I(V)?-1:A(V)?0:1};function x(V){for(var P=V.g.length,D=[],U=0;U<P;U++)D[U]=~V.g[U];return new c(D,~V.h).add(w)}n.abs=function(){return I(this)?x(this):this},n.add=function(V){for(var P=Math.max(this.g.length,V.g.length),D=[],U=0,B=0;B<=P;B++){var z=U+(this.i(B)&65535)+(V.i(B)&65535),L=(z>>>16)+(this.i(B)>>>16)+(V.i(B)>>>16);U=L>>>16,z&=65535,L&=65535,D[B]=L<<16|z}return new c(D,D[D.length-1]&-2147483648?-1:0)};function C(V,P){return V.add(x(P))}n.j=function(V){if(A(this)||A(V))return v;if(I(this))return I(V)?x(this).j(x(V)):x(x(this).j(V));if(I(V))return x(this.j(x(V)));if(0>this.l(b)&&0>V.l(b))return m(this.m()*V.m());for(var P=this.g.length+V.g.length,D=[],U=0;U<2*P;U++)D[U]=0;for(U=0;U<this.g.length;U++)for(var B=0;B<V.g.length;B++){var z=this.i(U)>>>16,L=this.i(U)&65535,le=V.i(B)>>>16,Ee=V.i(B)&65535;D[2*U+2*B]+=L*Ee,M(D,2*U+2*B),D[2*U+2*B+1]+=z*Ee,M(D,2*U+2*B+1),D[2*U+2*B+1]+=L*le,M(D,2*U+2*B+1),D[2*U+2*B+2]+=z*le,M(D,2*U+2*B+2)}for(U=0;U<P;U++)D[U]=D[2*U+1]<<16|D[2*U];for(U=P;U<2*P;U++)D[U]=0;return new c(D,0)};function M(V,P){for(;(V[P]&65535)!=V[P];)V[P+1]+=V[P]>>>16,V[P]&=65535,P++}function k(V,P){this.g=V,this.h=P}function $(V,P){if(A(P))throw Error("division by zero");if(A(V))return new k(v,v);if(I(V))return P=$(x(V),P),new k(x(P.g),x(P.h));if(I(P))return P=$(V,x(P)),new k(x(P.g),P.h);if(30<V.g.length){if(I(V)||I(P))throw Error("slowDivide_ only works with positive integers.");for(var D=w,U=P;0>=U.l(V);)D=G(D),U=G(U);var B=Y(D,1),z=Y(U,1);for(U=Y(U,2),D=Y(D,2);!A(U);){var L=z.add(U);0>=L.l(V)&&(B=B.add(D),z=L),U=Y(U,1),D=Y(D,1)}return P=C(V,B.j(P)),new k(B,P)}for(B=v;0<=V.l(P);){for(D=Math.max(1,Math.floor(V.m()/P.m())),U=Math.ceil(Math.log(D)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),z=m(D),L=z.j(P);I(L)||0<L.l(V);)D-=U,z=m(D),L=z.j(P);A(z)&&(z=w),B=B.add(z),V=C(V,L)}return new k(B,V)}n.A=function(V){return $(this,V).h},n.and=function(V){for(var P=Math.max(this.g.length,V.g.length),D=[],U=0;U<P;U++)D[U]=this.i(U)&V.i(U);return new c(D,this.h&V.h)},n.or=function(V){for(var P=Math.max(this.g.length,V.g.length),D=[],U=0;U<P;U++)D[U]=this.i(U)|V.i(U);return new c(D,this.h|V.h)},n.xor=function(V){for(var P=Math.max(this.g.length,V.g.length),D=[],U=0;U<P;U++)D[U]=this.i(U)^V.i(U);return new c(D,this.h^V.h)};function G(V){for(var P=V.g.length+1,D=[],U=0;U<P;U++)D[U]=V.i(U)<<1|V.i(U-1)>>>31;return new c(D,V.h)}function Y(V,P){var D=P>>5;P%=32;for(var U=V.g.length-D,B=[],z=0;z<U;z++)B[z]=0<P?V.i(z+D)>>>P|V.i(z+D+1)<<32-P:V.i(z+D);return new c(B,V.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,SR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,Zs=c}).apply(typeof eS<"u"?eS:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AR,Bu,IR,Oh,_v,RR,xR,CR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,T){return h==Array.prototype||h==Object.prototype||(h[_]=T.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(h,_){if(_)e:{var T=r;h=h.split(".");for(var O=0;O<h.length-1;O++){var Q=h[O];if(!(Q in T))break e;T=T[Q]}h=h[h.length-1],O=T[h],_=_(O),_!=O&&_!=null&&e(T,h,{configurable:!0,writable:!0,value:_})}}function o(h,_){h instanceof String&&(h+="");var T=0,O=!1,Q={next:function(){if(!O&&T<h.length){var te=T++;return{value:_(te,h[te]),done:!1}}return O=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}s("Array.prototype.values",function(h){return h||function(){return o(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,T){return h.call.apply(h.bind,arguments)}function v(h,_,T){if(!h)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,O),h.apply(_,Q)}}return function(){return h.apply(_,arguments)}}function w(h,_,T){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,w.apply(null,arguments)}function b(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var O=T.slice();return O.push.apply(O,arguments),h.apply(this,O)}}function A(h,_){function T(){}T.prototype=_.prototype,h.aa=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(O,Q,te){for(var me=Array(arguments.length-2),We=2;We<arguments.length;We++)me[We-2]=arguments[We];return _.prototype[Q].apply(O,me)}}function I(h){const _=h.length;if(0<_){const T=Array(_);for(let O=0;O<_;O++)T[O]=h[O];return T}return[]}function x(h,_){for(let T=1;T<arguments.length;T++){const O=arguments[T];if(f(O)){const Q=h.length||0,te=O.length||0;h.length=Q+te;for(let me=0;me<te;me++)h[Q+me]=O[me]}else h.push(O)}}class C{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function M(h){return/^[\s\xa0]*$/.test(h)}function k(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function $(h){return $[" "](h),h}$[" "]=function(){};var G=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function Y(h,_,T){for(const O in h)_.call(T,h[O],O,h)}function V(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function P(h){const _={};for(const T in h)_[T]=h[T];return _}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let T,O;for(let Q=1;Q<arguments.length;Q++){O=arguments[Q];for(T in O)h[T]=O[T];for(let te=0;te<D.length;te++)T=D[te],Object.prototype.hasOwnProperty.call(O,T)&&(h[T]=O[T])}}function B(h){var _=1;h=h.split(":");const T=[];for(;0<_&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function z(h){d.setTimeout(()=>{throw h},0)}function L(){var h=ye;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class le{constructor(){this.h=this.g=null}add(_,T){const O=Ee.get();O.set(_,T),this.h?this.h.next=O:this.g=O,this.h=O}}var Ee=new C(()=>new Z,h=>h.reset());class Z{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let de,se=!1,ye=new le,F=()=>{const h=d.Promise.resolve(void 0);de=()=>{h.then(ae)}};var ae=()=>{for(var h;h=L();){try{h.h.call(h.g)}catch(T){z(T)}var _=Ee;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}se=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};d.addEventListener("test",T,_),d.removeEventListener("test",T,_)}catch{}return h}();function fe(h,_){if(he.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,O=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(G){e:{try{$(_.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(_=null)}}else T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement);this.relatedTarget=_,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:we[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&fe.aa.h.call(this)}}A(fe,he);var we={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),be=0;function Be(h,_,T,O,Q){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!O,this.ha=Q,this.key=++be,this.da=this.fa=!1}function Ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ve(h){this.src=h,this.g={},this.h=0}Ve.prototype.add=function(h,_,T,O,Q){var te=h.toString();h=this.g[te],h||(h=this.g[te]=[],this.h++);var me=ft(h,_,O,Q);return-1<me?(_=h[me],T||(_.fa=!1)):(_=new Be(_,this.src,te,!!O,Q),_.fa=T,h.push(_)),_};function qe(h,_){var T=_.type;if(T in h.g){var O=h.g[T],Q=Array.prototype.indexOf.call(O,_,void 0),te;(te=0<=Q)&&Array.prototype.splice.call(O,Q,1),te&&(Ce(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ft(h,_,T,O){for(var Q=0;Q<h.length;++Q){var te=h[Q];if(!te.da&&te.listener==_&&te.capture==!!T&&te.ha==O)return Q}return-1}var Ut="closure_lm_"+(1e6*Math.random()|0),xn={};function vn(h,_,T,O,Q){if(Array.isArray(_)){for(var te=0;te<_.length;te++)vn(h,_[te],T,O,Q);return null}return T=Fd(T),h&&h[pe]?h.K(_,T,m(O)?!!O.capture:!1,Q):vr(h,_,T,!1,O,Q)}function vr(h,_,T,O,Q,te){if(!_)throw Error("Invalid event type");var me=m(Q)?!!Q.capture:!!Q,We=Ac(h);if(We||(h[Ut]=We=new Ve(h)),T=We.add(_,T,O,me,te),T.proxy)return T;if(O=es(),T.proxy=O,O.src=h,O.listener=T,h.addEventListener)ee||(Q=me),Q===void 0&&(Q=!1),h.addEventListener(_.toString(),O,Q);else if(h.attachEvent)h.attachEvent(Lo(_.toString()),O);else if(h.addListener&&h.removeListener)h.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return T}function es(){function h(T){return _.call(h.src,h.listener,T)}const _=Ip;return h}function _r(h,_,T,O,Q){if(Array.isArray(_))for(var te=0;te<_.length;te++)_r(h,_[te],T,O,Q);else O=m(O)?!!O.capture:!!O,T=Fd(T),h&&h[pe]?(h=h.i,_=String(_).toString(),_ in h.g&&(te=h.g[_],T=ft(te,T,O,Q),-1<T&&(Ce(te[T]),Array.prototype.splice.call(te,T,1),te.length==0&&(delete h.g[_],h.h--)))):h&&(h=Ac(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ft(_,T,O,Q)),(T=-1<h?_[h]:null)&&va(T))}function va(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[pe])qe(_.i,h);else{var T=h.type,O=h.proxy;_.removeEventListener?_.removeEventListener(T,O,h.capture):_.detachEvent?_.detachEvent(Lo(T),O):_.addListener&&_.removeListener&&_.removeListener(O),(T=Ac(_))?(qe(T,h),T.h==0&&(T.src=null,_[Ut]=null)):Ce(h)}}}function Lo(h){return h in xn?xn[h]:xn[h]="on"+h}function Ip(h,_){if(h.da)h=!0;else{_=new fe(_,this);var T=h.listener,O=h.ha||h.src;h.fa&&va(h),h=T.call(O,_)}return h}function Ac(h){return h=h[Ut],h instanceof Ve?h:null}var Cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fd(h){return typeof h=="function"?h:(h[Cn]||(h[Cn]=function(_){return h.handleEvent(_)}),h[Cn])}function jt(){ve.call(this),this.i=new Ve(this),this.M=this,this.F=null}A(jt,ve),jt.prototype[pe]=!0,jt.prototype.removeEventListener=function(h,_,T,O){_r(this,h,_,T,O)};function Kt(h,_){var T,O=h.F;if(O)for(T=[];O;O=O.F)T.push(O);if(h=h.M,O=_.type||_,typeof _=="string")_=new he(_,h);else if(_ instanceof he)_.target=_.target||h;else{var Q=_;_=new he(O,h),U(_,Q)}if(Q=!0,T)for(var te=T.length-1;0<=te;te--){var me=_.g=T[te];Q=hi(me,O,!0,_)&&Q}if(me=_.g=h,Q=hi(me,O,!0,_)&&Q,Q=hi(me,O,!1,_)&&Q,T)for(te=0;te<T.length;te++)me=_.g=T[te],Q=hi(me,O,!1,_)&&Q}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var T=h.g[_],O=0;O<T.length;O++)Ce(T[O]);delete h.g[_],h.h--}}this.F=null},jt.prototype.K=function(h,_,T,O){return this.i.add(String(h),_,!1,T,O)},jt.prototype.L=function(h,_,T,O){return this.i.add(String(h),_,!0,T,O)};function hi(h,_,T,O){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var Q=!0,te=0;te<_.length;++te){var me=_[te];if(me&&!me.da&&me.capture==T){var We=me.listener,Ft=me.ha||me.src;me.fa&&qe(h.i,me),Q=We.call(Ft,O)!==!1&&Q}}return Q&&!O.defaultPrevented}function zd(h,_,T){if(typeof h=="function")T&&(h=w(h,T));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Ic(h){h.g=zd(()=>{h.g=null,h.i&&(h.i=!1,Ic(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Rp extends ve{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ic(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _a(h){ve.call(this),this.h=h,this.g={}}A(_a,ve);var ts=[];function ln(h){Y(h.g,function(_,T){this.g.hasOwnProperty(T)&&va(_)},h),h.g={}}_a.prototype.N=function(){_a.aa.N.call(this),ln(this)},_a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rc=d.JSON.stringify,Ur=d.JSON.parse,_n=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function xc(){}xc.prototype.h=null;function qd(h){return h.h||(h.h=h.i())}function Hd(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ns(){he.call(this,"d")}A(ns,he);function wr(){he.call(this,"c")}A(wr,he);var Wn={},rs=null;function Uo(){return rs=rs||new jt}Wn.La="serverreachability";function Cc(h){he.call(this,Wn.La,h)}A(Cc,he);function is(h){const _=Uo();Kt(_,new Cc(_))}Wn.STAT_EVENT="statevent";function jo(h,_){he.call(this,Wn.STAT_EVENT,h),this.stat=_}A(jo,he);function Nt(h){const _=Uo();Kt(_,new jo(_,h))}Wn.Ma="timingevent";function Gd(h,_){he.call(this,Wn.Ma,h),this.size=_}A(Gd,he);function ss(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function as(){this.g=!0}as.prototype.xa=function(){this.g=!1};function $d(h,_,T,O,Q,te){h.info(function(){if(h.g)if(te)for(var me="",We=te.split("&"),Ft=0;Ft<We.length;Ft++){var Xe=We[Ft].split("=");if(1<Xe.length){var Wt=Xe[0];Xe=Xe[1];var zt=Wt.split("_");me=2<=zt.length&&zt[1]=="type"?me+(Wt+"="+Xe+"&"):me+(Wt+"=redacted&")}}else me=null;else me=te;return"XMLHTTP REQ ("+O+") [attempt "+Q+"]: "+_+`
`+T+`
`+me})}function Kd(h,_,T,O,Q,te,me){h.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+Q+"]: "+_+`
`+T+`
`+te+" "+me})}function os(h,_,T,O){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Yt(h,T)+(O?" "+O:"")})}function Br(h,_){h.info(function(){return"TIMEOUT: "+_})}as.prototype.info=function(){};function Yt(h,_){if(!h.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var O=T[h];if(!(2>O.length)){var Q=O[1];if(Array.isArray(Q)&&!(1>Q.length)){var te=Q[0];if(te!="noop"&&te!="stop"&&te!="close")for(var me=1;me<Q.length;me++)Q[me]=""}}}}return Rc(T)}catch{return _}}var Bt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wa;function Bo(){}A(Bo,xc),Bo.prototype.g=function(){return new XMLHttpRequest},Bo.prototype.i=function(){return{}},wa=new Bo;function Fr(h,_,T,O){this.j=h,this.i=_,this.l=T,this.R=O||1,this.U=new _a(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nc}function Nc(){this.i=null,this.g="",this.h=!1}var ls={},Ea={};function Er(h,_,T){h.L=1,h.v=Sa(St(_)),h.m=T,h.P=!0,pi(h,null)}function pi(h,_){h.F=Date.now(),wt(h),h.A=St(h.v);var T=h.A,O=h.R;Array.isArray(O)||(O=[String(O)]),vi(T.i,"t",O),h.C=0,T=h.j.J,h.h=new Nc,h.g=lf(h.j,T?_:null,!h.m),0<h.O&&(h.M=new Rp(w(h.Y,h,h.g),h.O)),_=h.U,T=h.g,O=h.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(ts[0]=Q.toString()),Q=ts);for(var te=0;te<Q.length;te++){var me=vn(T,Q[te],O||_.handleEvent,!1,_.h||_);if(!me)break;_.g[me.key]=me}_=h.H?P(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),is(),$d(h.i,h.u,h.A,h.l,h.R,h.m)}Fr.prototype.ca=function(h){h=h.target;const _=this.M;_&&tr(h)==3?_.j():this.Y(h)},Fr.prototype.Y=function(h){try{if(h==this.g)e:{const zt=tr(this.g);var _=this.g.Ba();const bi=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Jd(this.g)))){this.J||zt!=4||_==7||(_==8||0>=bi?is(3):is(2)),Fo(this);var T=this.g.Z();this.X=T;t:if(cs(this)){var O=Jd(this.g);h="";var Q=O.length,te=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nn(this),kn(this);var me="";break t}this.h.i=new d.TextDecoder}for(_=0;_<Q;_++)this.h.h=!0,h+=this.h.i.decode(O[_],{stream:!(te&&_==Q-1)});O.length=0,this.h.g+=h,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=T==200,Kd(this.i,this.u,this.A,this.l,this.R,zt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Ft=this.g;if((We=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(We)){var Xe=We;break t}}Xe=null}if(T=Xe)os(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ln(this,T);else{this.o=!1,this.s=3,Nt(12),Nn(this),kn(this);break e}}if(this.P){T=!0;let nn;for(;!this.J&&this.C<me.length;)if(nn=us(this,me),nn==Ea){zt==4&&(this.s=4,Nt(14),T=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==ls){this.s=4,Nt(15),os(this.i,this.l,me,"[Invalid Chunk]"),T=!1;break}else os(this.i,this.l,nn,null),Ln(this,nn);if(cs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||me.length!=0||this.h.h||(this.s=1,Nt(16),T=!1),this.o=this.o&&T,!T)os(this.i,this.l,me,"[Invalid Chunked Response]"),Nn(this),kn(this);else if(0<me.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),Da(Wt),Wt.M=!0,Nt(11))}}else os(this.i,this.l,me,null),Ln(this,me);zt==4&&Nn(this),this.o&&!this.J&&(zt==4?sf(this.j,this):(this.o=!1,wt(this)))}else Op(this.g),T==400&&0<me.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),Nn(this),kn(this)}}}catch{}finally{}};function cs(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function us(h,_){var T=h.C,O=_.indexOf(`
`,T);return O==-1?Ea:(T=Number(_.substring(T,O)),isNaN(T)?ls:(O+=1,O+T>_.length?Ea:(_=_.slice(O,O+T),h.C=O+T,_)))}Fr.prototype.cancel=function(){this.J=!0,Nn(this)};function wt(h){h.S=Date.now()+h.I,Dc(h,h.I)}function Dc(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ss(w(h.ba,h),_)}function Fo(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Fr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Br(this.i,this.A),this.L!=2&&(is(),Nt(17)),Nn(this),this.s=2,kn(this)):Dc(this,this.S-h)};function kn(h){h.j.G==0||h.J||sf(h.j,h)}function Nn(h){Fo(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,ln(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Ln(h,_){try{var T=h.j;if(T.G!=0&&(T.g==h||ds(T.h,h))){if(!h.K&&ds(T.h,h)&&T.G==3){try{var O=T.Da.g.parse(_)}catch{O=null}if(Array.isArray(O)&&O.length==3){var Q=O;if(Q[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)Xo(T),Qo(T);else break e;zc(T),Nt(18)}}else T.za=Q[1],0<T.za-T.T&&37500>Q[2]&&T.F&&T.v==0&&!T.C&&(T.C=ss(w(T.Za,T),6e3));if(1>=Yd(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ei(T,11)}else if((h.K||T.g==h)&&Xo(T),!M(_))for(Q=T.Da.g.parse(_),_=0;_<Q.length;_++){let Xe=Q[_];if(T.T=Xe[0],Xe=Xe[1],T.G==2)if(Xe[0]=="c"){T.K=Xe[1],T.ia=Xe[2];const Wt=Xe[3];Wt!=null&&(T.la=Wt,T.j.info("VER="+T.la));const zt=Xe[4];zt!=null&&(T.Aa=zt,T.j.info("SVER="+T.Aa));const bi=Xe[5];bi!=null&&typeof bi=="number"&&0<bi&&(O=1.5*bi,T.L=O,T.j.info("backChannelRequestTimeoutMs_="+O)),O=T;const nn=h.g;if(nn){const Yr=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yr){var te=O.h;te.g||Yr.indexOf("spdy")==-1&&Yr.indexOf("quic")==-1&&Yr.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(fs(te,te.h),te.h=null))}if(O.D){const Hc=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hc&&(O.ya=Hc,tt(O.I,O.D,Hc))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),O=T;var me=h;if(O.qa=of(O,O.J?O.ia:null,O.W),me.K){Xn(O.h,me);var We=me,Ft=O.L;Ft&&(We.I=Ft),We.B&&(Fo(We),wt(We)),O.g=me}else nf(O);0<T.i.length&&Wo(T)}else Xe[0]!="stop"&&Xe[0]!="close"||Ei(T,7);else T.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Ei(T,7):Bc(T):Xe[0]!="noop"&&T.l&&T.l.ta(Xe),T.v=0)}}is(4)}catch{}}var xp=class{constructor(h,_){this.g=h,this.map=_}};function Pc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Yd(h){return h.h?1:h.g?h.g.size:0}function ds(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function fs(h,_){h.g?h.g.add(_):h.h=_}function Xn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Pc.prototype.cancel=function(){if(this.i=wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function wn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.D);return _}return I(h.i)}function Qd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var _=[],T=h.length,O=0;O<T;O++)_.push(h[O]);return _}_=[],T=0;for(O in h)_[T++]=h[O];return _}function Cp(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var _=[];h=h.length;for(var T=0;T<h;T++)_.push(T);return _}_=[],T=0;for(const O in h)_[T++]=O;return _}}}function ba(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var T=Cp(h),O=Qd(h),Q=O.length,te=0;te<Q;te++)_.call(void 0,O[te],T&&T[te],h)}var Mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zo(h,_){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var O=h[T].indexOf("="),Q=null;if(0<=O){var te=h[T].substring(0,O);Q=h[T].substring(O+1)}else te=h[T];_(te,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function gi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof gi){this.h=h.h,hs(this,h.j),this.o=h.o,this.g=h.g,Ta(this,h.s),this.l=h.l;var _=h.i,T=new zr;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),qo(this,T),this.m=h.m}else h&&(_=String(h).match(Mc))?(this.h=!1,hs(this,_[1]||"",!0),this.o=ms(_[2]||""),this.g=ms(_[3]||"",!0),Ta(this,_[4]),this.l=ms(_[5]||"",!0),qo(this,_[6]||"",!0),this.m=ms(_[7]||"")):(this.h=!1,this.i=new zr(null,this.h))}gi.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Zn(_,Vc,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Zn(_,Vc,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Zn(T,T.charAt(0)=="/"?kc:Wd,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Zn(T,Pp)),h.join("")};function St(h){return new gi(h)}function hs(h,_,T){h.j=T?ms(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Ta(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function qo(h,_,T){_ instanceof zr?(h.i=_,Lc(h.i,h.h)):(T||(_=Zn(_,Dp)),h.i=new zr(_,h.h))}function tt(h,_,T){h.i.set(_,T)}function Sa(h){return tt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ms(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Zn(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,Np),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Np(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Vc=/[#\/\?@]/g,Wd=/[#\?:]/g,kc=/[#\?]/g,Dp=/[#\?@]/g,Pp=/#/g;function zr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Jn(h){h.g||(h.g=new Map,h.h=0,h.i&&zo(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=zr.prototype,n.add=function(h,_){Jn(this),this.i=null,h=_i(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function Ho(h,_){Jn(h),_=_i(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function yi(h,_){return Jn(h),_=_i(h,_),h.g.has(_)}n.forEach=function(h,_){Jn(this),this.g.forEach(function(T,O){T.forEach(function(Q){h.call(_,Q,O,this)},this)},this)},n.na=function(){Jn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let O=0;O<_.length;O++){const Q=h[O];for(let te=0;te<Q.length;te++)T.push(_[O])}return T},n.V=function(h){Jn(this);let _=[];if(typeof h=="string")yi(this,h)&&(_=_.concat(this.g.get(_i(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)_=_.concat(h[T])}return _},n.set=function(h,_){return Jn(this),this.i=null,h=_i(this,h),yi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function vi(h,_,T){Ho(h,_),0<T.length&&(h.i=null,h.g.set(_i(h,_),I(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var O=_[T];const te=encodeURIComponent(String(O)),me=this.V(O);for(O=0;O<me.length;O++){var Q=te;me[O]!==""&&(Q+="="+encodeURIComponent(String(me[O]))),h.push(Q)}}return this.i=h.join("&")};function _i(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Lc(h,_){_&&!h.j&&(Jn(h),h.i=null,h.g.forEach(function(T,O){var Q=O.toLowerCase();O!=Q&&(Ho(this,O),vi(this,Q,T))},h)),h.j=_}function Xd(h,_){const T=new as;if(d.Image){const O=new Image;O.onload=b(er,T,"TestLoadImage: loaded",!0,_,O),O.onerror=b(er,T,"TestLoadImage: error",!1,_,O),O.onabort=b(er,T,"TestLoadImage: abort",!1,_,O),O.ontimeout=b(er,T,"TestLoadImage: timeout",!1,_,O),d.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=h}else _(!1)}function Aa(h,_){const T=new as,O=new AbortController,Q=setTimeout(()=>{O.abort(),er(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:O.signal}).then(te=>{clearTimeout(Q),te.ok?er(T,"TestPingServer: ok",!0,_):er(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),er(T,"TestPingServer: error",!1,_)})}function er(h,_,T,O,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),O(T)}catch{}}function Ia(){this.g=new _n}function qr(h,_,T){const O=T||"";try{ba(h,function(Q,te){let me=Q;m(Q)&&(me=Rc(Q)),_.push(O+te+"="+encodeURIComponent(me))})}catch(Q){throw _.push(O+"type="+encodeURIComponent("_badmap")),Q}}function ps(h){this.l=h.Ub||null,this.j=h.eb||!1}A(ps,xc),ps.prototype.g=function(){return new wi(this.l,this.j)},ps.prototype.i=function(h){return function(){return h}}({});function wi(h,_){jt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(wi,jt),n=wi.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Gr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Gr(this)),this.g&&(this.readyState=3,Gr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Hr(this):Gr(this),this.readyState==3&&Uc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Hr(this))},n.Qa=function(h){this.g&&(this.response=h,Hr(this))},n.ga=function(){this.g&&Hr(this)};function Hr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Gr(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function Gr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function jc(h){let _="";return Y(h,function(T,O){_+=O,_+=":",_+=T,_+=`\r
`}),_}function Qt(h,_,T){e:{for(O in T){var O=!1;break e}O=!0}O||(T=jc(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):tt(h,_,T))}function st(h){jt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(st,jt);var Go=/^https?$/i,Ra=["POST","PUT"];n=st.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,T,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wa.g(),this.v=this.o?qd(this.o):qd(wa),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(te){Zd(this,te);return}if(h=T||"",T=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var Q in O)T.set(Q,O[Q]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const te of O.keys())T.set(te,O.get(te));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(T.keys()).find(te=>te.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ra,_,void 0))||O||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of T)this.g.setRequestHeader(te,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xa(this),this.u=!0,this.g.send(h),this.u=!1}catch(te){Zd(this,te)}};function Zd(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,$o(h),$r(h)}function $o(h){h.A||(h.A=!0,Kt(h,"complete"),Kt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Kt(this,"complete"),Kt(this,"abort"),$r(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$r(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ko(this):this.bb())},n.bb=function(){Ko(this)};function Ko(h){if(h.h&&typeof c<"u"&&(!h.v[1]||tr(h)!=4||h.Z()!=2)){if(h.u&&tr(h)==4)zd(h.Ea,0,h);else if(Kt(h,"readystatechange"),tr(h)==4){h.h=!1;try{const me=h.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var O;if(O=me===0){var Q=String(h.D).match(Mc)[1]||null;!Q&&d.self&&d.self.location&&(Q=d.self.location.protocol.slice(0,-1)),O=!Go.test(Q?Q.toLowerCase():"")}T=O}if(T)Kt(h,"complete"),Kt(h,"success");else{h.m=6;try{var te=2<tr(h)?h.g.statusText:""}catch{te=""}h.l=te+" ["+h.Z()+"]",$o(h)}}finally{$r(h)}}}}function $r(h,_){if(h.g){xa(h);const T=h.g,O=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Kt(h,"ready");try{T.onreadystatechange=O}catch{}}}function xa(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function tr(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Ur(_)}};function Jd(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Op(h){const _={};h=(h.g&&2<=tr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<h.length;O++){if(M(h[O]))continue;var T=B(h[O]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const te=_[Q]||[];_[Q]=te,te.push(T)}V(_,function(O){return O.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function Yo(h){this.Aa=0,this.i=[],this.j=new as,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,h),this.cb=Ca("retryDelaySeedMs",1e4,h),this.Wa=Ca("forwardChannelMaxRetries",2,h),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Pc(h&&h.concurrentRequestLimit),this.Da=new Ia,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Yo.prototype,n.la=8,n.G=1,n.connect=function(h,_,T,O){Nt(0),this.W=h,this.H=_||{},T&&O!==void 0&&(this.H.OSID=T,this.H.OAID=O),this.F=this.X,this.I=of(this,null,this.W),Wo(this)};function Bc(h){if(ef(h),h.G==3){var _=h.U++,T=St(h.I);if(tt(T,"SID",h.K),tt(T,"RID",_),tt(T,"TYPE","terminate"),Na(h,T),_=new Fr(h,h.j,_),_.L=2,_.v=Sa(St(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=_.v,T=!0),T||(_.g=lf(_.j,null),_.g.ea(_.v)),_.F=Date.now(),wt(_)}af(h)}function Qo(h){h.g&&(Da(h),h.g.cancel(),h.g=null)}function ef(h){Qo(h),h.u&&(d.clearTimeout(h.u),h.u=null),Xo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Wo(h){if(!Oc(h.h)&&!h.s){h.s=!0;var _=h.Ga;de||F(),se||(de(),se=!0),ye.add(_,h),h.B=0}}function Mp(h,_){return Yd(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ss(w(h.Ga,h,_),qc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Q=new Fr(this,this.j,h);let te=this.o;if(this.S&&(te?(te=P(te),U(te,this.S)):te=this.S),this.m!==null||this.O||(Q.H=te,te=null),this.P)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var O=this.i[T];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(_+=O,4096<_){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=tf(this,Q,_),T=St(this.I),tt(T,"RID",h),tt(T,"CVER",22),this.D&&tt(T,"X-HTTP-Session-Id",this.D),Na(this,T),te&&(this.O?_="headers="+encodeURIComponent(String(jc(te)))+"&"+_:this.m&&Qt(T,this.m,te)),fs(this.h,Q),this.Ua&&tt(T,"TYPE","init"),this.P?(tt(T,"$req",_),tt(T,"SID","null"),Q.T=!0,Er(Q,T,null)):Er(Q,T,_),this.G=2}}else this.G==3&&(h?Fc(this,h):this.i.length==0||Oc(this.h)||Fc(this))};function Fc(h,_){var T;_?T=_.l:T=h.U++;const O=St(h.I);tt(O,"SID",h.K),tt(O,"RID",T),tt(O,"AID",h.T),Na(h,O),h.m&&h.o&&Qt(O,h.m,h.o),T=new Fr(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),_&&(h.i=_.D.concat(h.i)),_=tf(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),fs(h.h,T),Er(T,O,_)}function Na(h,_){h.H&&Y(h.H,function(T,O){tt(_,O,T)}),h.l&&ba({},function(T,O){tt(_,O,T)})}function tf(h,_,T){T=Math.min(h.i.length,T);var O=h.l?w(h.l.Na,h.l,h):null;e:{var Q=h.i;let te=-1;for(;;){const me=["count="+T];te==-1?0<T?(te=Q[0].g,me.push("ofs="+te)):te=0:me.push("ofs="+te);let We=!0;for(let Ft=0;Ft<T;Ft++){let Xe=Q[Ft].g;const Wt=Q[Ft].map;if(Xe-=te,0>Xe)te=Math.max(0,Q[Ft].g-100),We=!1;else try{qr(Wt,me,"req"+Xe+"_")}catch{O&&O(Wt)}}if(We){O=me.join("&");break e}}}return h=h.i.splice(0,T),_.D=h,O}function nf(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;de||F(),se||(de(),se=!0),ye.add(_,h),h.v=0}}function zc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ss(w(h.Fa,h),qc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,rf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ss(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),Qo(this),rf(this))};function Da(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function rf(h){h.g=new Fr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=St(h.qa);tt(_,"RID","rpc"),tt(_,"SID",h.K),tt(_,"AID",h.T),tt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&tt(_,"TO",h.ja),tt(_,"TYPE","xmlhttp"),Na(h,_),h.m&&h.o&&Qt(_,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=Sa(St(_)),T.m=null,T.P=!0,pi(T,h)}n.Za=function(){this.C!=null&&(this.C=null,Qo(this),zc(this),Nt(19))};function Xo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function sf(h,_){var T=null;if(h.g==_){Xo(h),Da(h),h.g=null;var O=2}else if(ds(h.h,_))T=_.D,Xn(h.h,_),O=1;else return;if(h.G!=0){if(_.o)if(O==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var Q=h.B;O=Uo(),Kt(O,new Gd(O,T)),Wo(h)}else nf(h);else if(Q=_.s,Q==3||Q==0&&0<_.X||!(O==1&&Mp(h,_)||O==2&&zc(h)))switch(T&&0<T.length&&(_=h.h,_.i=_.i.concat(T)),Q){case 1:Ei(h,5);break;case 4:Ei(h,10);break;case 3:Ei(h,6);break;default:Ei(h,2)}}}function qc(h,_){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*_}function Ei(h,_){if(h.j.info("Error code "+_),_==2){var T=w(h.fb,h),O=h.Xa;const Q=!O;O=new gi(O||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||hs(O,"https"),Sa(O),Q?Xd(O.toString(),T):Aa(O.toString(),T)}else Nt(2);h.G=0,h.l&&h.l.sa(_),af(h),ef(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function af(h){if(h.G=0,h.ka=[],h.l){const _=wn(h.h);(_.length!=0||h.i.length!=0)&&(x(h.ka,_),x(h.ka,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.ra()}}function of(h,_,T){var O=T instanceof gi?St(T):new gi(T);if(O.g!="")_&&(O.g=_+"."+O.g),Ta(O,O.s);else{var Q=d.location;O=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;var te=new gi(null);O&&hs(te,O),_&&(te.g=_),Q&&Ta(te,Q),T&&(te.l=T),O=te}return T=h.D,_=h.ya,T&&_&&tt(O,T,_),tt(O,"VER",h.la),Na(h,O),O}function lf(h,_,T){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new st(new ps({eb:T})):new st(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cf(){}n=cf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Zo(){}Zo.prototype.g=function(h,_){return new En(h,_)};function En(h,_){jt.call(this),this.g=new Yo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!M(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!M(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Kr(this)}A(En,jt),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Bc(this.g)},En.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Rc(h),h=T);_.i.push(new xp(_.Ya++,h)),_.G==3&&Wo(_)},En.prototype.N=function(){this.g.l=null,delete this.j,Bc(this.g),delete this.g,En.aa.N.call(this)};function uf(h){ns.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const T in _){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}A(uf,ns);function df(){wr.call(this),this.status=1}A(df,wr);function Kr(h){this.g=h}A(Kr,cf),Kr.prototype.ua=function(){Kt(this.g,"a")},Kr.prototype.ta=function(h){Kt(this.g,new uf(h))},Kr.prototype.sa=function(h){Kt(this.g,new df)},Kr.prototype.ra=function(){Kt(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,CR=function(){return new Zo},xR=function(){return Uo()},RR=Wn,_v={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bt.NO_ERROR=0,Bt.TIMEOUT=8,Bt.HTTP_ERROR=6,Oh=Bt,mi.COMPLETE="complete",IR=mi,Hd.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",jt.prototype.listen=jt.prototype.K,Bu=Hd,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,AR=st}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const tS="@firebase/firestore",nS="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new Pm("@firebase/firestore");function Vl(){return yo.logLevel}function ue(n,...e){if(yo.logLevel<=Ke.DEBUG){const t=e.map(N_);yo.debug(`Firestore (${gc}): ${n}`,...t)}}function An(n,...e){if(yo.logLevel<=Ke.ERROR){const t=e.map(N_);yo.error(`Firestore (${gc}): ${n}`,...t)}}function rd(n,...e){if(yo.logLevel<=Ke.WARN){const t=e.map(N_);yo.warn(`Firestore (${gc}): ${n}`,...t)}}function N_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n="Unexpected state"){const e=`FIRESTORE (${gc}) INTERNAL ASSERTION FAILED: `+n;throw An(e),new Error(e)}function xe(n,e){n||Ie()}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sn.UNAUTHENTICATED))}shutdown(){}}class JL{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let o=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pr,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},d=f=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new XL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new Sn(e)}}class e4{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class t4{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new e4(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n4{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,fr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){xe(this.o===void 0);const r=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.R;return this.R=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new rS(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xe(typeof t.token=="string"),this.R=t.token,new rS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=r4(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Le(n,e){return n<e?-1:n>e?1:0}function Ql(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function DR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=-62135596800,sS=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*sS);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<iS)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sS}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-iS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new it(0,0))}static max(){return new De(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="__name__";class ei{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(),r===void 0?r=e.length-t:r>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=ei.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=ei.isNumericId(e),s=ei.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ei.extractNumericId(e).compare(ei.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class at extends ei{construct(e,t,r){return new at(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new at(t)}static emptyPath(){return new at([])}}const i4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends ei{construct(e,t,r){return new Tt(e,t,r)}static isValidIdentifier(e){return i4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aS}static keyField(){return new Tt([aS])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(r+=d,s++):(o(),s++)}if(o(),c)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(t)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(at.fromString(e))}static fromName(e){return new _e(at.fromString(e).popFirst(5))}static empty(){return new _e(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new at(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=-1;class tm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function wv(n){return n.fields.find(e=>e.kind===2)}function to(n){return n.fields.filter(e=>e.kind!==2)}tm.UNKNOWN_ID=-1;class Mh{constructor(e,t){this.fieldPath=e,this.kind=t}}class sd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sd(0,Yn.min())}}function s4(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=De.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new Yn(s,_e.empty(),e)}function PR(n){return new Yn(n.readTime,n.key,id)}class Yn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yn(De.min(),_e.empty(),id)}static max(){return new Yn(De.max(),_e.empty(),id)}}function D_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==OR)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):W.reject(t)}static resolve(e){return new W((t,r)=>{t(e)})}static reject(e){return new W((t,r)=>{r(e)})}static waitFor(e){return new W((t,r)=>{let s=0,o=0,c=!1;e.forEach(d=>{++s,d.next(()=>{++o,c&&o===s&&t()},f=>r(f))}),c=!0,o===s&&t()})}static or(e){let t=W.resolve(!1);for(const r of e)t=t.next(s=>s?W.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new W((r,s)=>{const o=e.length,c=new Array(o);let d=0;for(let f=0;f<o;f++){const m=f;t(e[m]).next(y=>{c[m]=y,++d,d===o&&r(c)},y=>s(y))}})}static doWhile(e,t){return new W((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="SimpleDb";class km{static open(e,t,r,s){try{return new km(t,e.transaction(s,r))}catch(o){throw new $u(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new pr,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new $u(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const s=P_(r.target.error);this.m.reject(new $u(e,s))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(ue(qn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new o4(t)}}class Js{static delete(e){return ue(qn,"Removing database:",e),io(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!w_())return!1;if(Js.v())return!0;const e=Gt(),t=Js.C(e),r=0<t&&t<10,s=VR(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,Js.C(Gt())===12.2&&An("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(ue(qn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;t(c)},s.onblocked=()=>{r(new $u(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new ge(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ge(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new $u(e,c))},s.onupgradeneeded=o=>{ue(qn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.O.B(c,s.transaction,o.oldVersion,this.version).next(()=>{ue(qn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.N(e);const d=km.open(this.db,e,o?"readonly":"readwrite",r),f=s(d).next(m=>(d.S(),m)).catch(m=>(d.abort(m),W.reject(m))).toPromise();return f.catch(()=>{}),await d.p,f}catch(d){const f=d,m=f.name!=="FirebaseError"&&c<3;if(ue(qn,"Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function VR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class a4{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return io(this.q.delete())}}class $u extends ge{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function da(n){return n.name==="IndexedDbTransactionError"}class o4{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ue(qn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ue(qn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),io(r)}add(e){return ue(qn,"ADD",this.store.name,e,e),io(this.store.add(e))}get(e){return io(this.store.get(e)).next(t=>(t===void 0&&(t=null),ue(qn,"GET",this.store.name,e,t),t))}delete(e){return ue(qn,"DELETE",this.store.name,e),io(this.store.delete(e))}count(){return ue(qn,"COUNT",this.store.name),io(this.store.count())}G(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new W((c,d)=>{o.onerror=f=>{d(f.target.error)},o.onsuccess=f=>{c(f.target.result)}})}{const o=this.cursor(r),c=[];return this.j(o,(d,f)=>{c.push(f)}).next(()=>c)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new W((s,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}J(e,t){ue(qn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.j(s,(o,c,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.j(s,t)}X(e){const t=this.cursor({});return new W((r,s)=>{t.onerror=o=>{const c=P_(o.target.error);s(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}j(e,t){const r=[];return new W((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void s();const f=new a4(d),m=t(d.primaryKey,d.value,f);if(m instanceof W){const y=m.catch(v=>(f.done(),W.reject(v)));r.push(y)}f.isDone?s():f.U===null?d.continue():d.continue(f.U)}}).next(()=>W.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function io(n){return new W((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=P_(r.target.error);t(s)}})}let oS=!1;function P_(n){const e=Js.C(Gt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oS||(oS=!0,setTimeout(()=>{throw r},0)),r}}return n}const Ku="IndexBackfiller";class l4{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){ue(Ku,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();ue(Ku,`Documents written: ${t}`)}catch(t){da(t)?ue(Ku,"Ignoring IndexedDB error during index backfill: ",t):await Mo(t)}await this.te(6e4)})}}class c4{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let s=t,o=!0;return W.doWhile(()=>o===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return ue(Ku,`Processing collection: ${c}`),this.ie(e,c,s).next(d=>{s-=d,r.add(c)});o=!1})).next(()=>t-s)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.se(s,o)).next(d=>(ue(Ku,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}se(e,t){let r=e;return t.changes.forEach((s,o)=>{const c=PR(o);D_(c,r)>0&&(r=c)}),new Yn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}hr.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=-1;function Lm(n){return n==null}function ad(n){return n===0&&1/n==-1/0}function u4(n){return typeof n=="number"&&Number.isInteger(n)&&!ad(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="";function pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lS(e)),e=d4(n.get(t),e);return lS(e)}function d4(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case nm:t+="";break;default:t+=o}}return t}function lS(n){return n+nm+""}function ni(n){const e=n.length;if(xe(e>=2),e===2)return xe(n.charAt(0)===nm&&n.charAt(1)===""),at.emptyPath();const t=e-2,r=[];let s="";for(let o=0;o<e;){const c=n.indexOf(nm,o);switch((c<0||c>t)&&Ie(),n.charAt(c+1)){case"":const d=n.substring(o,c);let f;s.length===0?f=d:(s+=d,f=s,s=""),r.push(f);break;case"":s+=n.substring(o,c),s+="\0";break;case"":s+=n.substring(o,c+1);break;default:Ie()}o=c+2}return new at(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="remoteDocuments",xd="owner",Al="owner",od="mutationQueues",f4="userId",Rr="mutations",cS="batchId",lo="userMutationsIndex",uS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(n,e){return[n,pn(e)]}function kR(n,e,t){return[n,pn(e),t]}const h4={},Wl="documentMutations",rm="remoteDocumentsV14",m4=["prefixPath","collectionGroup","readTime","documentId"],kh="documentKeyIndex",p4=["prefixPath","collectionGroup","documentId"],LR="collectionGroupIndex",g4=["collectionGroup","readTime","prefixPath","documentId"],ld="remoteDocumentGlobal",Ev="remoteDocumentGlobalKey",Xl="targets",UR="queryTargetsIndex",y4=["canonicalId","targetId"],Zl="targetDocuments",v4=["targetId","path"],O_="documentTargetsIndex",_4=["path","targetId"],im="targetGlobalKey",ho="targetGlobal",cd="collectionParents",w4=["collectionId","parent"],Jl="clientMetadata",E4="clientId",Um="bundles",b4="bundleId",jm="namedQueries",T4="name",M_="indexConfiguration",S4="indexId",bv="collectionGroupIndex",A4="collectionGroup",sm="indexState",I4=["indexId","uid"],jR="sequenceNumberIndex",R4=["uid","sequenceNumber"],am="indexEntries",x4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BR="documentKeyIndex",C4=["indexId","uid","orderedDocumentKey"],Bm="documentOverlays",N4=["userId","collectionPath","documentId"],Tv="collectionPathOverlayIndex",D4=["userId","collectionPath","largestBatchId"],FR="collectionGroupOverlayIndex",P4=["userId","collectionGroup","largestBatchId"],V_="globals",O4="name",zR=[od,Rr,Wl,no,Xl,xd,ho,Zl,Jl,ld,cd,Um,jm],M4=[...zR,Bm],qR=[od,Rr,Wl,rm,Xl,xd,ho,Zl,Jl,ld,cd,Um,jm,Bm],HR=qR,k_=[...HR,M_,sm,am],V4=k_,k4=[...k_,V_];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv extends MR{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function $t(n,e){const t=Me(n);return Js.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??on.RED,this.left=s??on.EMPTY,this.right=o??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new on(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return on.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,r,s,o){return this}insert(e,t,r){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fS(this.data.getIterator())}getIteratorFrom(e){return new fS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class fS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Il(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new On([])}unionWith(e){let t=new lt(Tt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new On(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $R("Invalid base64 string: "+o):o}}(e);return new Lt(t)}static fromUint8Array(e){const t=function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o}(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const L4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(n){if(xe(!!n),typeof n=="string"){let e=0;const t=L4.exec(n);if(xe(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yi(n){return typeof n=="string"?Lt.fromBase64String(n):Lt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="server_timestamp",YR="__type__",QR="__previous_value__",WR="__local_write_time__";function L_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[YR])===null||t===void 0?void 0:t.stringValue)===KR}function Fm(n){const e=n.mapValue.fields[QR];return L_(e)?Fm(e):e}function ud(n){const e=Ki(n.mapValue.fields[WR].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,t,r,s,o,c,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}const om="(default)";class vo{constructor(e,t){this.projectId=e,this.database=t||om}static empty(){return new vo("","")}get isDefaultDatabase(){return this.database===om}isEqual(e){return e instanceof vo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="__type__",XR="__max__",Ys={mapValue:{fields:{__type__:{stringValue:XR}}}},j_="__vector__",ec="value",Lh={nullValue:"NULL_VALUE"};function ta(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?L_(n)?4:ZR(n)?9007199254740991:zm(n)?10:11:Ie()}function ci(n,e){if(n===e)return!0;const t=ta(n);if(t!==ta(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ud(n).isEqual(ud(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=Ki(s.timestampValue),d=Ki(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Yi(s.bytesValue).isEqual(Yi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return pt(s.geoPointValue.latitude)===pt(o.geoPointValue.latitude)&&pt(s.geoPointValue.longitude)===pt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return pt(s.integerValue)===pt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=pt(s.doubleValue),d=pt(o.doubleValue);return c===d?ad(c)===ad(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Ql(n.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return function(s,o){const c=s.mapValue.fields||{},d=o.mapValue.fields||{};if(dS(c)!==dS(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!ci(c[f],d[f])))return!1;return!0}(n,e);default:return Ie()}}function dd(n,e){return(n.values||[]).find(t=>ci(t,e))!==void 0}function na(n,e){if(n===e)return 0;const t=ta(n),r=ta(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return function(o,c){const d=pt(o.integerValue||o.doubleValue),f=pt(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return hS(n.timestampValue,e.timestampValue);case 4:return hS(ud(n),ud(e));case 5:return Le(n.stringValue,e.stringValue);case 6:return function(o,c){const d=Yi(o),f=Yi(c);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const d=o.split("/"),f=c.split("/");for(let m=0;m<d.length&&m<f.length;m++){const y=Le(d[m],f[m]);if(y!==0)return y}return Le(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const d=Le(pt(o.latitude),pt(c.latitude));return d!==0?d:Le(pt(o.longitude),pt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return mS(n.arrayValue,e.arrayValue);case 10:return function(o,c){var d,f,m,y;const v=o.fields||{},w=c.fields||{},b=(d=v[ec])===null||d===void 0?void 0:d.arrayValue,A=(f=w[ec])===null||f===void 0?void 0:f.arrayValue,I=Le(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((y=A==null?void 0:A.values)===null||y===void 0?void 0:y.length)||0);return I!==0?I:mS(b,A)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===Ys.mapValue&&c===Ys.mapValue)return 0;if(o===Ys.mapValue)return 1;if(c===Ys.mapValue)return-1;const d=o.fields||{},f=Object.keys(d),m=c.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const w=Le(f[v],y[v]);if(w!==0)return w;const b=na(d[f[v]],m[y[v]]);if(b!==0)return b}return Le(f.length,y.length)}(n.mapValue,e.mapValue);default:throw Ie()}}function hS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=Ki(n),r=Ki(e),s=Le(t.seconds,r.seconds);return s!==0?s:Le(t.nanos,r.nanos)}function mS(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=na(t[s],r[s]);if(o)return o}return Le(t.length,r.length)}function tc(n){return Av(n)}function Av(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ki(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Yi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Av(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of r)o?o=!1:s+=",",s+=`${c}:${Av(t.fields[c])}`;return s+"}"}(n.mapValue):Ie()}function Uh(n){switch(ta(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fm(n);return e?16+Uh(e):16;case 5:return 2*n.stringValue.length;case 6:return Yi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Uh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return fa(r.fields,(o,c)=>{s+=o.length+Uh(c)}),s}(n.mapValue);default:throw Ie()}}function fd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Iv(n){return!!n&&"integerValue"in n}function hd(n){return!!n&&"arrayValue"in n}function pS(n){return!!n&&"nullValue"in n}function gS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jh(n){return!!n&&"mapValue"in n}function zm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[U_])===null||t===void 0?void 0:t.stringValue)===j_}function Yu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ZR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===XR}const JR={mapValue:{fields:{[U_]:{stringValue:j_},[ec]:{arrayValue:{}}}}};function j4(n){return"nullValue"in n?Lh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fd(vo.empty(),_e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zm(n)?JR:{mapValue:{}}:Ie()}function B4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fd(vo.empty(),_e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?JR:"mapValue"in n?zm(n)?{mapValue:{}}:Ys:Ie()}function yS(n,e){const t=na(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vS(n,e){const t=na(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(t)}setAll(e){let t=Tt.emptyPath(),r={},s=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}c?r[d.lastSegment()]=Yu(c):s.push(d.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];jh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){fa(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new hn(Yu(this.value))}}function ex(n){const e=[];return fa(n.fields,(t,r)=>{const s=new Tt([t]);if(jh(r)){const o=ex(r.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t,r,s,o,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Ct(e,0,De.min(),De.min(),De.min(),hn.empty(),0)}static newFoundDocument(e,t,r,s){return new Ct(e,1,t,De.min(),r,s,0)}static newNoDocument(e,t){return new Ct(e,2,t,De.min(),De.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new Ct(e,3,t,De.min(),De.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t){this.position=e,this.inclusive=t}}function _S(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],c=n.position[s];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(c.referenceValue),t.key):r=na(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function wS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ci(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t="asc"){this.field=e,this.dir=t}}function F4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{}class Ye extends tx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new z4(e,t,r):t==="array-contains"?new G4(e,r):t==="in"?new ox(e,r):t==="not-in"?new $4(e,r):t==="array-contains-any"?new K4(e,r):new Ye(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new q4(e,r):new H4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(na(t,this.value)):t!==null&&ta(this.value)===ta(t)&&this.matchesComparison(na(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ot extends tx{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ot(e,t)}matches(e){return rc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function rc(n){return n.op==="and"}function Rv(n){return n.op==="or"}function B_(n){return nx(n)&&rc(n)}function nx(n){for(const e of n.filters)if(e instanceof ot)return!1;return!0}function xv(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+tc(n.value);if(B_(n))return n.filters.map(e=>xv(e)).join(",");{const e=n.filters.map(t=>xv(t)).join(",");return`${n.op}(${e})`}}function rx(n,e){return n instanceof Ye?function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&ci(r.value,s.value)}(n,e):n instanceof ot?function(r,s){return s instanceof ot&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,c,d)=>o&&rx(c,s.filters[d]),!0):!1}(n,e):void Ie()}function ix(n,e){const t=n.filters.concat(e);return ot.create(t,n.op)}function sx(n){return n instanceof Ye?function(t){return`${t.field.canonicalString()} ${t.op} ${tc(t.value)}`}(n):n instanceof ot?function(t){return t.op.toString()+" {"+t.getFilters().map(sx).join(" ,")+"}"}(n):"Filter"}class z4 extends Ye{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class q4 extends Ye{constructor(e,t){super(e,"in",t),this.keys=ax("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class H4 extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=ax("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ax(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}class G4 extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hd(t)&&dd(t.arrayValue,this.value)}}class ox extends Ye{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dd(this.value.arrayValue,t)}}class $4 extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!dd(this.value.arrayValue,t)}}class K4 extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,t=null,r=[],s=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=c,this.endAt=d,this.le=null}}function Cv(n,e=null,t=[],r=[],s=null,o=null,c=null){return new Y4(n,e,t,r,s,o,c)}function _o(n){const e=Me(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Lm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>tc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>tc(r)).join(",")),e.le=t}return e.le}function Cd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!F4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wS(n.startAt,e.startAt)&&wS(n.endAt,e.endAt)}function lm(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function cm(n,e){return n.filters.filter(t=>t instanceof Ye&&t.field.isEqual(e))}function ES(n,e,t){let r=Lh,s=!0;for(const o of cm(n,e)){let c=Lh,d=!0;switch(o.op){case"<":case"<=":c=j4(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,d=!1;break;case"!=":case"not-in":c=Lh}yS({value:r,inclusive:s},{value:c,inclusive:d})<0&&(r=c,s=d)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];yS({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}}return{value:r,inclusive:s}}function bS(n,e,t){let r=Ys,s=!0;for(const o of cm(n,e)){let c=Ys,d=!0;switch(o.op){case">=":case">":c=B4(o.value),d=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,d=!1;break;case"!=":case"not-in":c=Ys}vS({value:r,inclusive:s},{value:c,inclusive:d})>0&&(r=c,s=d)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];vS({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t=null,r=[],s=[],o=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=f,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Q4(n,e,t,r,s,o,c,d){return new yc(n,e,t,r,s,o,c,d)}function qm(n){return new yc(n)}function TS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lx(n){return n.collectionGroup!==null}function Qu(n){const e=Me(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new lt(Tt.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new md(o,r))}),t.has(Tt.keyField().canonicalString())||e.he.push(new md(Tt.keyField(),r))}return e.he}function gr(n){const e=Me(n);return e.Pe||(e.Pe=W4(e,Qu(n))),e.Pe}function W4(n,e){if(n.limitType==="F")return Cv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new md(s.field,o)});const t=n.endAt?new nc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new nc(n.startAt.position,n.startAt.inclusive):null;return Cv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Nv(n,e){const t=n.filters.concat([e]);return new yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function um(n,e,t){return new yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hm(n,e){return Cd(gr(n),gr(e))&&n.limitType===e.limitType}function cx(n){return`${_o(gr(n))}|lt:${n.limitType}`}function kl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>sx(s)).join(", ")}]`),Lm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>tc(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>tc(s)).join(",")),`Target(${r})`}(gr(n))}; limitType=${n.limitType})`}function Nd(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Qu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(c,d,f){const m=_S(c,d,f);return c.inclusive?m<=0:m<0}(r.startAt,Qu(r),s)||r.endAt&&!function(c,d,f){const m=_S(c,d,f);return c.inclusive?m>=0:m>0}(r.endAt,Qu(r),s))}(n,e)}function X4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ux(n){return(e,t)=>{let r=!1;for(const s of Qu(n)){const o=Z4(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Z4(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(o,c,d){const f=c.data.field(o),m=d.data.field(o);return f!==null&&m!==null?na(f,m):Ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return GR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new yt(_e.comparator);function Gn(){return J4}const dx=new yt(_e.comparator);function Fu(...n){let e=dx;for(const t of n)e=e.insert(t.key,t);return e}function fx(n){let e=dx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ri(){return Wu()}function hx(){return Wu()}function Wu(){return new Xi(n=>n.toString(),(n,e)=>n.isEqual(e))}const eU=new yt(_e.comparator),tU=new lt(_e.comparator);function ze(...n){let e=tU;for(const t of n)e=e.add(t);return e}const nU=new lt(Le);function rU(){return nU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function mx(n){return{integerValue:""+n}}function iU(n,e){return u4(e)?mx(e):F_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this._=void 0}}function sU(n,e,t){return n instanceof pd?function(s,o){const c={fields:{[YR]:{stringValue:KR},[WR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&L_(o)&&(o=Fm(o)),o&&(c.fields[QR]=o),{mapValue:c}}(t,e):n instanceof wo?gx(n,e):n instanceof Eo?yx(n,e):function(s,o){const c=px(s,o),d=SS(c)+SS(s.Ie);return Iv(c)&&Iv(s.Ie)?mx(d):F_(s.serializer,d)}(n,e)}function aU(n,e,t){return n instanceof wo?gx(n,e):n instanceof Eo?yx(n,e):t}function px(n,e){return n instanceof gd?function(r){return Iv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class pd extends Gm{}class wo extends Gm{constructor(e){super(),this.elements=e}}function gx(n,e){const t=vx(e);for(const r of n.elements)t.some(s=>ci(s,r))||t.push(r);return{arrayValue:{values:t}}}class Eo extends Gm{constructor(e){super(),this.elements=e}}function yx(n,e){let t=vx(e);for(const r of n.elements)t=t.filter(s=>!ci(s,r));return{arrayValue:{values:t}}}class gd extends Gm{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function SS(n){return pt(n.integerValue||n.doubleValue)}function vx(n){return hd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t){this.field=e,this.transform=t}}function oU(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof wo&&s instanceof wo||r instanceof Eo&&s instanceof Eo?Ql(r.elements,s.elements,ci):r instanceof gd&&s instanceof gd?ci(r.Ie,s.Ie):r instanceof pd&&s instanceof pd}(n.transform,e.transform)}class lU{constructor(e,t){this.version=e,this.transformResults=t}}class In{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $m{}function _x(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new q_(n.key,In.none()):new vc(n.key,n.data,In.none());{const t=n.data,r=hn.empty();let s=new lt(Tt.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),s=s.add(o)}return new Zi(n.key,r,new On(s.toArray()),In.none())}}function cU(n,e,t){n instanceof vc?function(s,o,c){const d=s.value.clone(),f=IS(s.fieldTransforms,o,c.transformResults);d.setAll(f),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Zi?function(s,o,c){if(!Bh(s.precondition,o))return void o.convertToUnknownDocument(c.version);const d=IS(s.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(wx(s)),f.setAll(d),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Xu(n,e,t,r){return n instanceof vc?function(o,c,d,f){if(!Bh(o.precondition,c))return d;const m=o.value.clone(),y=RS(o.fieldTransforms,f,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Zi?function(o,c,d,f){if(!Bh(o.precondition,c))return d;const m=RS(o.fieldTransforms,f,c),y=c.data;return y.setAll(wx(o)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,c,d){return Bh(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function uU(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=px(r.transform,s||null);o!=null&&(t===null&&(t=hn.empty()),t.set(r.field,o))}return t||null}function AS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ql(r,s,(o,c)=>oU(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vc extends $m{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zi extends $m{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function wx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function IS(n,e,t){const r=new Map;xe(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],c=o.transform,d=e.data.field(o.field);r.set(o.field,aU(c,d,t[s]))}return r}function RS(n,e,t){const r=new Map;for(const s of n){const o=s.transform,c=t.data.field(s.field);r.set(s.field,sU(o,c,e))}return r}class q_ extends $m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ex extends $m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&cU(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=hx();return this.mutations.forEach(s=>{const o=e.get(s.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=t.has(s.key)?null:d;const f=_x(c,d);f!==null&&r.set(s.key,f),c.isValidDocument()||c.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(t,r)=>AS(t,r))&&Ql(this.baseMutations,e.baseMutations,(t,r)=>AS(t,r))}}class G_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){xe(e.mutations.length===r.length);let s=function(){return eU}();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,r[c].version);return new G_(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Je;function fU(n){switch(n){case re.OK:return Ie();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ie()}}function bx(n){if(n===void 0)return An("GRPC error has no .code"),re.UNKNOWN;switch(n){case Vt.OK:return re.OK;case Vt.CANCELLED:return re.CANCELLED;case Vt.UNKNOWN:return re.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return re.INTERNAL;case Vt.UNAVAILABLE:return re.UNAVAILABLE;case Vt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Vt.NOT_FOUND:return re.NOT_FOUND;case Vt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Vt.ABORTED:return re.ABORTED;case Vt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Vt.DATA_LOSS:return re.DATA_LOSS;default:return Ie()}}(Je=Vt||(Vt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=new Zs([4294967295,4294967295],0);function xS(n){const e=hU().encode(n),t=new SR;return t.update(e),new Uint8Array(t.digest())}function CS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Zs([t,r],0),new Zs([s,o],0)]}class K_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zu(`Invalid padding: ${t}`);if(r<0)throw new zu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Zs.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(Zs.fromNumber(r)));return s.compare(mU)===1&&(s=new Zs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=xS(e),[r,s]=CS(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(r,s,o);if(!this.Re(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new K_(o,s,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ee===0)return;const t=xS(e),[r,s]=CS(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(r,s,o);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Km(De.min(),s,new yt(Le),Gn(),ze())}}class Dd{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Dd(r,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class Tx{constructor(e,t){this.targetId=e,this.ge=t}}class Sx{constructor(e,t,r=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class NS{constructor(){this.pe=0,this.ye=DS(),this.we=Lt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=ze(),t=ze(),r=ze();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ie()}}),new Dd(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=DS()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,xe(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class pU{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Gn(),this.$e=hh(),this.Ke=hh(),this.Ue=new yt(Le)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(lm(o))if(r===0){const c=new _e(o.path);this.ze(t,c,Ct.newNoDocument(c,De.min()))}else xe(r===1);else{const c=this.et(t);if(c!==r){const d=this.tt(e),f=d?this.nt(d,e,c):1;if(f!==0){this.Ye(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,m)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let c,d;try{c=Yi(r).toUint8Array()}catch(f){if(f instanceof $R)return rd("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new K_(c,s,o)}catch(f){return rd(f instanceof zu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Ee===0?null:d}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,c)=>{const d=this.Xe(c);if(d){if(o.current&&lm(d.target)){const f=new _e(d.target.path);this._t(f).has(c)||this.ut(c,f)||this.ze(c,f,Ct.newNoDocument(f,e))}o.ve&&(t.set(c,o.Fe()),o.Me())}});let r=ze();this.Ke.forEach((o,c)=>{let d=!0;c.forEachWhile(f=>{const m=this.Xe(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(o))}),this.Qe.forEach((o,c)=>c.setReadTime(e));const s=new Km(e,t,this.Ue,this.Qe,r);return this.Qe=Gn(),this.$e=hh(),this.Ke=hh(),this.Ue=new yt(Le),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new NS,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new lt(Le),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new lt(Le),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new NS),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function hh(){return new yt(_e.comparator)}function DS(){return new yt(_e.comparator)}const gU={asc:"ASCENDING",desc:"DESCENDING"},yU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vU={and:"AND",or:"OR"};class _U{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dv(n,e){return n.useProto3Json||Lm(e)?e:{value:e}}function ic(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ax(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wU(n,e){return ic(n,e.toTimestamp())}function Rn(n){return xe(!!n),De.fromTimestamp(function(t){const r=Ki(t);return new it(r.seconds,r.nanos)}(n))}function Y_(n,e){return Pv(n,e).canonicalString()}function Pv(n,e){const t=function(s){return new at(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Ix(n){const e=at.fromString(n);return xe(Vx(e)),e}function dm(n,e){return Y_(n.databaseId,e.path)}function mo(n,e){const t=Ix(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(Cx(t))}function Rx(n,e){return Y_(n.databaseId,e)}function xx(n){const e=Ix(n);return e.length===4?at.emptyPath():Cx(e)}function Ov(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Cx(n){return xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function PS(n,e,t){return{name:dm(n,e),fields:t.value.mapValue.fields}}function EU(n,e,t){const r=mo(n,e.name),s=Rn(e.updateTime),o=e.createTime?Rn(e.createTime):De.min(),c=new hn({mapValue:{fields:e.fields}}),d=Ct.newFoundDocument(r,s,o,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function bU(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,y){return m.useProto3Json?(xe(y===void 0||typeof y=="string"),Lt.fromBase64String(y||"")):(xe(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Lt.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(m){const y=m.code===void 0?re.UNKNOWN:bx(m.code);return new ge(y,m.message||"")}(c);t=new Sx(r,s,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mo(n,r.document.name),o=Rn(r.document.updateTime),c=r.document.createTime?Rn(r.document.createTime):De.min(),d=new hn({mapValue:{fields:r.document.fields}}),f=Ct.newFoundDocument(s,o,c,d),m=r.targetIds||[],y=r.removedTargetIds||[];t=new Fh(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mo(n,r.document),o=r.readTime?Rn(r.readTime):De.min(),c=Ct.newNoDocument(s,o),d=r.removedTargetIds||[];t=new Fh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mo(n,r.document),o=r.removedTargetIds||[];t=new Fh([],o,s,null)}else{if(!("filter"in e))return Ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,c=new dU(s,o),d=r.targetId;t=new Tx(d,c)}}return t}function fm(n,e){let t;if(e instanceof vc)t={update:PS(n,e.key,e.value)};else if(e instanceof q_)t={delete:dm(n,e.key)};else if(e instanceof Zi)t={update:PS(n,e.key,e.data),updateMask:xU(e.fieldMask)};else{if(!(e instanceof Ex))return Ie();t={verify:dm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const d=c.transform;if(d instanceof pd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof wo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Eo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof gd)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw Ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:wU(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie()}(n,e.precondition)),t}function Mv(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?In.updateTime(Rn(o.updateTime)):o.exists!==void 0?In.exists(o.exists):In.none()}(e.currentDocument):In.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(c,d){let f=null;if("setToServerValue"in d)xe(d.setToServerValue==="REQUEST_TIME"),f=new pd;else if("appendMissingElements"in d){const y=d.appendMissingElements.values||[];f=new wo(y)}else if("removeAllFromArray"in d){const y=d.removeAllFromArray.values||[];f=new Eo(y)}else"increment"in d?f=new gd(c,d.increment):Ie();const m=Tt.fromServerFormat(d.fieldPath);return new z_(m,f)}(n,s)):[];if(e.update){e.update.name;const s=mo(n,e.update.name),o=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(f){const m=f.fieldPaths||[];return new On(m.map(y=>Tt.fromServerFormat(y)))}(e.updateMask);return new Zi(s,o,c,t,r)}return new vc(s,o,t,r)}if(e.delete){const s=mo(n,e.delete);return new q_(s,t)}if(e.verify){const s=mo(n,e.verify);return new Ex(s,t)}return Ie()}function TU(n,e){return n&&n.length>0?(xe(e!==void 0),n.map(t=>function(s,o){let c=s.updateTime?Rn(s.updateTime):Rn(o);return c.isEqual(De.min())&&(c=Rn(o)),new lU(c,s.transformResults||[])}(t,e))):[]}function Nx(n,e){return{documents:[Rx(n,e.path)]}}function Dx(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Rx(n,s);const o=function(m){if(m.length!==0)return Mx(ot.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(m){if(m.length!==0)return m.map(y=>function(w){return{field:Ll(w.field),direction:AU(w.dir)}}(y))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Dv(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ht:t,parent:s}}function Px(n){let e=xx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){xe(r===1);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(v){const w=Ox(v);return w instanceof ot&&B_(w)?w.getFilters():[w]}(t.where));let c=[];t.orderBy&&(c=function(v){return v.map(w=>function(A){return new md(Ul(A.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(v){let w;return w=typeof v=="object"?v.value:v,Lm(w)?null:w}(t.limit));let f=null;t.startAt&&(f=function(v){const w=!!v.before,b=v.values||[];return new nc(b,w)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const w=!v.before,b=v.values||[];return new nc(b,w)}(t.endAt)),Q4(e,s,c,o,d,"F",f,m)}function SU(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ox(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ul(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ul(t.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ul(t.unaryFilter.field);return Ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ul(t.unaryFilter.field);return Ye.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(n):n.fieldFilter!==void 0?function(t){return Ye.create(Ul(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ot.create(t.compositeFilter.filters.map(r=>Ox(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie()}}(t.compositeFilter.op))}(n):Ie()}function AU(n){return gU[n]}function IU(n){return yU[n]}function RU(n){return vU[n]}function Ll(n){return{fieldPath:n.canonicalString()}}function Ul(n){return Tt.fromServerFormat(n.fieldPath)}function Mx(n){return n instanceof Ye?function(t){if(t.op==="=="){if(gS(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NAN"}};if(pS(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gS(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NOT_NAN"}};if(pS(t.value))return{unaryFilter:{field:Ll(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(t.field),op:IU(t.op),value:t.value}}}(n):n instanceof ot?function(t){const r=t.getFilters().map(s=>Mx(s));return r.length===1?r[0]:{compositeFilter:{op:RU(t.op),filters:r}}}(n):Ie()}function xU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Vx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t,r,s,o=De.min(),c=De.min(),d=Lt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.Tt=e}}function CU(n,e){let t;if(e.document)t=EU(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_e.fromSegments(e.noDocument.path),s=To(e.noDocument.readTime);t=Ct.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie();{const r=_e.fromSegments(e.unknownDocument.path),s=To(e.unknownDocument.version);t=Ct.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const o=new it(s[0],s[1]);return De.fromTimestamp(o)}(e.readTime)),t}function OS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,c){return{name:dm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:ic(o,c.version.toTimestamp()),createTime:ic(o,c.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:bo(e.version)};else{if(!e.isUnknownDocument())return Ie();r.unknownDocument={path:t.path.toArray(),version:bo(e.version)}}return r}function hm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function To(n){const e=new it(n.seconds,n.nanoseconds);return De.fromTimestamp(e)}function so(n,e){const t=(e.baseMutations||[]).map(o=>Mv(n.Tt,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const d=e.mutations[o+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>Mv(n.Tt,o)),s=it.fromMillis(e.localWriteTimeMs);return new H_(e.batchId,s,t,r)}function qu(n){const e=To(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?To(n.lastLimboFreeSnapshotVersion):De.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return xe(o.documents.length===1),gr(qm(xx(o.documents[0])))}(n.query):function(o){return gr(Px(o))}(n.query),new Fi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Lt.fromBase64String(n.resumeToken))}function Lx(n,e){const t=bo(e.snapshotVersion),r=bo(e.lastLimboFreeSnapshotVersion);let s;s=lm(e.target)?Nx(n.Tt,e.target):Dx(n.Tt,e.target).ht;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_o(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Ux(n){const e=Px({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?um(e,e.limit,"L"):e}function jy(n,e){return new $_(e.largestBatchId,Mv(n.Tt,e.overlayMutation))}function MS(n,e){const t=e.path.lastSegment();return[n,pn(e.path.popLast()),t]}function VS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:bo(r.readTime),documentKey:pn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{getBundleMetadata(e,t){return kS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:To(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return kS(e).put(function(s){return{bundleId:s.id,createTime:bo(Rn(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return LS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Ux(o.bundledQuery),readTime:To(o.readTime)}}(r)})}saveNamedQuery(e,t){return LS(e).put(function(s){return{name:s.name,readTime:bo(Rn(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function kS(n){return $t(n,Um)}function LS(n){return $t(n,jm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new Ym(e,r)}getOverlay(e,t){return Ou(e).get(MS(this.userId,t)).next(r=>r?jy(this.serializer,r):null)}getOverlays(e,t){const r=ri();return W.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((o,c)=>{const d=new $_(t,c);s.push(this.Et(e,d))}),W.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(pn(c.getCollectionPath())));const o=[];return s.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(Ou(e).J(Tv,d))}),W.waitFor(o)}getOverlaysForCollection(e,t,r){const s=ri(),o=pn(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ou(e).G(Tv,c).next(d=>{for(const f of d){const m=jy(this.serializer,f);s.set(m.getKey(),m)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const o=ri();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ou(e).Z({index:FR,range:d},(f,m,y)=>{const v=jy(this.serializer,m);o.size()<s||v.largestBatchId===c?(o.set(v.getKey(),v),c=v.largestBatchId):y.done()}).next(()=>o)}Et(e,t){return Ou(e).put(function(s,o,c){const[d,f,m]=MS(o,c.mutation.key);return{userId:o,collectionPath:f,documentId:m,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:fm(s.Tt,c.mutation)}}(this.serializer,this.userId,t))}}function Ou(n){return $t(n,Bm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{dt(e){return $t(e,V_)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Lt.fromUint8Array(r):Lt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),ad(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=Ki(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(Yi(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?ZR(e)?this.ft(t,Number.MAX_SAFE_INTEGER):zm(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):Ie()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const s of Object.keys(r))this.wt(s,t),this.Rt(r[s],t)}vt(e,t){var r,s;const o=e.fields||{};this.ft(t,53);const c=ec,d=((s=(r=o[c].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.ft(t,15),t.gt(pt(d)),this.wt(c,t),this.Rt(o[c],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const s of r)this.Rt(s,t)}Dt(e,t){this.ft(t,37),_e.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}ao.xt=new ao;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=255;function PU(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function US(n){const e=64-function(r){let s=0;for(let o=0;o<8;++o){const c=PU(255&r[o]);if(s+=c,c!==8)break}return s}(n);return Math.ceil(e/8)}class OU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const s=t.codePointAt(0);this.Nt(240|s>>>18),this.Nt(128|63&s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const s=t.codePointAt(0);this.kt(240|s>>>18),this.kt(128|63&s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s)}}this.qt()}Kt(e){const t=this.Ut(e),r=US(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Gt(e){const t=this.Ut(e),r=US(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}zt(){this.jt(Rl),this.jt(255)}Ht(){this.Jt(Rl),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Rl?(this.jt(Rl),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Rl?(this.Jt(Rl),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class MU{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class VU{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Mu{constructor(){this.Zt=new OU,this.Xt=new MU(this.Zt),this.en=new VU(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new oo(this.indexId,this.documentKey,this.arrayValue,r)}}function Ls(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=jS(n.arrayValue,e.arrayValue),t!==0?t:(t=jS(n.directionalValue,e.directionalValue),t!==0?t:_e.comparator(n.documentKey,e.documentKey)))}function jS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.rn=new lt((t,r)=>Tt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(xe(e.collectionGroup===this.collectionId),this.an)return!1;const t=wv(e);if(t!==void 0&&!this.cn(t))return!1;const r=to(e);let s=new Set,o=0,c=0;for(;o<r.length&&this.cn(r[o]);++o)s=s.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!s.has(d.field.canonicalString())){const f=r[o];if(!this.ln(d,f)||!this.hn(this.sn[c++],f))return!1}++o}for(;o<r.length;++o){const d=r[o];if(c>=this.sn.length||!this.hn(this.sn[c++],d))return!1}return!0}Pn(){if(this.an)return null;let e=new lt(Tt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Mh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Mh(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Mh(r.field,r.dir==="asc"?0:1)));return new tm(tm.UNKNOWN_ID,this.collectionId,t,sd.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(n){var e,t;if(xe(n instanceof Ye||n instanceof ot),n instanceof Ye){if(n instanceof ox){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Ye.create(n.field,"==",o)))||[];return ot.create(s,"or")}return n}const r=n.filters.map(s=>jx(s));return ot.create(r,n.op)}function kU(n){if(n.getFilters().length===0)return[];const e=Lv(jx(n));return xe(Bx(e)),Vv(e)||kv(e)?[e]:e.getFilters()}function Vv(n){return n instanceof Ye}function kv(n){return n instanceof ot&&B_(n)}function Bx(n){return Vv(n)||kv(n)||function(t){if(t instanceof ot&&Rv(t)){for(const r of t.getFilters())if(!Vv(r)&&!kv(r))return!1;return!0}return!1}(n)}function Lv(n){if(xe(n instanceof Ye||n instanceof ot),n instanceof Ye)return n;if(n.filters.length===1)return Lv(n.filters[0]);const e=n.filters.map(r=>Lv(r));let t=ot.create(e,n.op);return t=mm(t),Bx(t)?t:(xe(t instanceof ot),xe(rc(t)),xe(t.filters.length>1),t.filters.reduce((r,s)=>Q_(r,s)))}function Q_(n,e){let t;return xe(n instanceof Ye||n instanceof ot),xe(e instanceof Ye||e instanceof ot),t=n instanceof Ye?e instanceof Ye?function(s,o){return ot.create([s,o],"and")}(n,e):FS(n,e):e instanceof Ye?FS(e,n):function(s,o){if(xe(s.filters.length>0&&o.filters.length>0),rc(s)&&rc(o))return ix(s,o.getFilters());const c=Rv(s)?s:o,d=Rv(s)?o:s,f=c.filters.map(m=>Q_(m,d));return ot.create(f,"or")}(n,e),mm(t)}function FS(n,e){if(rc(e))return ix(e,n.getFilters());{const t=e.filters.map(r=>Q_(n,r));return ot.create(t,"or")}}function mm(n){if(xe(n instanceof Ye||n instanceof ot),n instanceof Ye)return n;const e=n.getFilters();if(e.length===1)return mm(e[0]);if(nx(n))return n;const t=e.map(s=>mm(s)),r=[];return t.forEach(s=>{s instanceof Ye?r.push(s):s instanceof ot&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:ot.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this.Tn=new W_}addToCollectionParentIndex(e,t){return this.Tn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Yn.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Yn.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class W_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new lt(at.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="IndexedDbIndexManager",mh=new Uint8Array(0);class UU{constructor(e,t){this.databaseId=t,this.In=new W_,this.En=new Xi(r=>_o(r),(r,s)=>Cd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const o={collectionId:r,parent:pn(s)};return qS(e).put(o)}return W.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[DR(t),""],!1,!0);return qS(e).G(s).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(ni(c.parent))}return r})}addFieldIndex(e,t){const r=Vu(e),s=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])}}(t);delete s.indexId;const o=r.add(s);if(t.indexState){const c=Cl(e);return o.next(d=>{c.put(VS(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Vu(e),s=Cl(e),o=xl(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Vu(e),r=xl(e),s=Cl(e);return t.J().next(()=>r.J()).next(()=>s.J())}createTargetIndexes(e,t){return W.forEach(this.dn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const o=new BS(r).Pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=xl(e);let s=!0;const o=new Map;return W.forEach(this.dn(t),c=>this.An(e,c).next(d=>{s&&(s=!!d),o.set(c,d)})).next(()=>{if(s){let c=ze();const d=[];return W.forEach(o,(f,m)=>{ue(zS,`Using index ${function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map($=>`${$.fieldPath}:${$.kind}`).join(",")}`}(f)} to execute ${_o(t)}`);const y=function(k,$){const G=wv($);if(G===void 0)return null;for(const Y of cm(k,G.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(m,f),v=function(k,$){const G=new Map;for(const Y of to($))for(const V of cm(k,Y.fieldPath))switch(V.op){case"==":case"in":G.set(Y.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return G.set(Y.fieldPath.canonicalString(),V.value),Array.from(G.values())}return null}(m,f),w=function(k,$){const G=[];let Y=!0;for(const V of to($)){const P=V.kind===0?ES(k,V.fieldPath,k.startAt):bS(k,V.fieldPath,k.startAt);G.push(P.value),Y&&(Y=P.inclusive)}return new nc(G,Y)}(m,f),b=function(k,$){const G=[];let Y=!0;for(const V of to($)){const P=V.kind===0?bS(k,V.fieldPath,k.endAt):ES(k,V.fieldPath,k.endAt);G.push(P.value),Y&&(Y=P.inclusive)}return new nc(G,Y)}(m,f),A=this.Rn(f,m,w),I=this.Rn(f,m,b),x=this.Vn(f,m,v),C=this.mn(f.indexId,y,A,w.inclusive,I,b.inclusive,x);return W.forEach(C,M=>r.H(M,t.limit).next(k=>{k.forEach($=>{const G=_e.fromSegments($.documentKey);c.has(G)||(c=c.add(G),d.push(G))})}))}).next(()=>d)}return W.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=kU(ot.create(e.filters,"and")).map(r=>Cv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,s,o,c,d){const f=(t!=null?t.length:1)*Math.max(r.length,o.length),m=f/(t!=null?t.length:1),y=[];for(let v=0;v<f;++v){const w=t?this.fn(t[v/m]):mh,b=this.gn(e,w,r[v%m],s),A=this.pn(e,w,o[v%m],c),I=d.map(x=>this.gn(e,w,x,!0));y.push(...this.createRange(b,A,I))}return y}gn(e,t,r,s){const o=new oo(e,_e.empty(),t,r);return s?o:o.nn()}pn(e,t,r,s){const o=new oo(e,_e.empty(),t,r);return s?o.nn():o}An(e,t){const r=new BS(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(o=>{let c=null;for(const d of o)r.un(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const s=this.dn(t);return W.forEach(s,o=>this.An(e,o).next(c=>{c?r!==0&&c.fields.length<function(f){let m=new lt(Tt.comparator),y=!1;for(const v of f.filters)for(const w of v.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?y=!0:m=m.add(w.field));for(const v of f.orderBy)v.field.isKeyField()||(m=m.add(v.field));return m.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&s.length>1&&r===2?1:r)}yn(e,t){const r=new Mu;for(const s of to(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const c=r.tn(s.kind);ao.xt.At(o,c)}return r.Yt()}fn(e){const t=new Mu;return ao.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new Mu;return ao.xt.At(fd(this.databaseId,t),r.tn(function(o){const c=to(o);return c.length===0?0:c[c.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let s=[];s.push(new Mu);let o=0;for(const c of to(e)){const d=r[o++];for(const f of s)if(this.bn(t,c.fieldPath)&&hd(d))s=this.Sn(s,c,d);else{const m=f.tn(c.kind);ao.xt.At(d,m)}}return this.Dn(s)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}Sn(e,t,r){const s=[...e],o=[];for(const c of r.arrayValue.values||[])for(const d of s){const f=new Mu;f.seed(d.Yt()),ao.xt.At(c,f.tn(t.kind)),o.push(f)}return o}bn(e,t){return!!e.filters.find(r=>r instanceof Ye&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Vu(e),s=Cl(e);return(t?r.G(bv,IDBKeyRange.bound(t,t)):r.G()).next(o=>{const c=[];return W.forEach(o,d=>s.get([d.indexId,this.uid]).next(f=>{c.push(function(y,v){const w=v?new sd(v.sequenceNumber,new Yn(To(v.readTime),new _e(ni(v.documentKey)),v.largestBatchId)):sd.empty(),b=y.fields.map(([A,I])=>new Mh(Tt.fromServerFormat(A),I));return new tm(y.indexId,y.collectionGroup,b,w)}(d,f))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const o=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Le(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Vu(e),o=Cl(e);return this.vn(e).next(c=>s.G(bv,IDBKeyRange.bound(t,t)).next(d=>W.forEach(d,f=>o.put(VS(f.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return W.forEach(t,(s,o)=>{const c=r.get(s.collectionGroup);return(c?W.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(d=>(r.set(s.collectionGroup,d),W.forEach(d,f=>this.Cn(e,s,f).next(m=>{const y=this.Fn(o,f);return m.isEqual(y)?W.resolve():this.Mn(e,o,f,m,y)}))))})}xn(e,t,r,s){return xl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,s){return xl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const s=xl(e);let o=new lt(Ls);return s.Z({index:BR,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(c,d)=>{o=o.add(new oo(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>o)}Fn(e,t){let r=new lt(Ls);const s=this.yn(t,e);if(s==null)return r;const o=wv(t);if(o!=null){const c=e.data.field(o.fieldPath);if(hd(c))for(const d of c.arrayValue.values||[])r=r.add(new oo(t.indexId,e.key,this.fn(d),s))}else r=r.add(new oo(t.indexId,e.key,mh,s));return r}Mn(e,t,r,s,o){ue(zS,"Updating index entries for document '%s'",t.key);const c=[];return function(f,m,y,v,w){const b=f.getIterator(),A=m.getIterator();let I=Il(b),x=Il(A);for(;I||x;){let C=!1,M=!1;if(I&&x){const k=y(I,x);k<0?M=!0:k>0&&(C=!0)}else I!=null?M=!0:C=!0;C?(v(x),x=Il(A)):M?(w(I),I=Il(b)):(I=Il(b),x=Il(A))}}(s,o,Ls,d=>{c.push(this.xn(e,t,r,d))},d=>{c.push(this.On(e,t,r,d))}),W.waitFor(c)}vn(e){let t=1;return Cl(e).Z({index:jR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,o)=>{o.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>Ls(c,d)).filter((c,d,f)=>!d||Ls(c,f[d-1])!==0);const s=[];s.push(e);for(const c of r){const d=Ls(c,e),f=Ls(c,t);if(d===0)s[0]=e.nn();else if(d>0&&f<0)s.push(c),s.push(c.nn());else if(f>0)break}s.push(t);const o=[];for(let c=0;c<s.length;c+=2){if(this.Nn(s[c],s[c+1]))return[];const d=[s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,mh,[]],f=[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,mh,[]];o.push(IDBKeyRange.bound(d,f))}return o}Nn(e,t){return Ls(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(HS)}getMinOffset(e,t){return W.mapArray(this.dn(t),r=>this.An(e,r).next(s=>s||Ie())).next(HS)}}function qS(n){return $t(n,cd)}function xl(n){return $t(n,am)}function Vu(n){return $t(n,M_)}function Cl(n){return $t(n,sm)}function HS(n){xe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;D_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Yn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fx=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n,e,t){const r=n.store(Rr),s=n.store(Wl),o=[],c=IDBKeyRange.only(t.batchId);let d=0;const f=r.Z({range:c},(y,v,w)=>(d++,w.delete()));o.push(f.next(()=>{xe(d===1)}));const m=[];for(const y of t.mutations){const v=kR(e,y.key.path,t.batchId);o.push(s.delete(v)),m.push(y.key)}return W.waitFor(o).next(()=>m)}function pm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ie();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(Fx,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);class Qm{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Bn={}}static It(e,t,r,s){xe(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new Qm(o,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Us(e).Z({index:lo,range:r},(s,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const o=jl(e),c=Us(e);return c.add({}).next(d=>{xe(typeof d=="number");const f=new H_(d,t,r,s),m=function(b,A,I){const x=I.baseMutations.map(M=>fm(b.Tt,M)),C=I.mutations.map(M=>fm(b.Tt,M));return{userId:A,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:x,mutations:C}}(this.serializer,this.userId,f),y=[];let v=new lt((w,b)=>Le(w.canonicalString(),b.canonicalString()));for(const w of s){const b=kR(this.userId,w.key.path,d);v=v.add(w.key.path.popLast()),y.push(c.put(m)),y.push(o.put(b,h4))}return v.forEach(w=>{y.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Bn[d]=f.keys()}),W.waitFor(y).next(()=>f)})}lookupMutationBatch(e,t){return Us(e).get(t).next(r=>r?(xe(r.userId===this.userId),so(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?W.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Bn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Us(e).Z({index:lo,range:s},(c,d,f)=>{d.userId===this.userId&&(xe(d.batchId>=r),o=so(this.serializer,d)),f.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=fo;return Us(e).Z({index:lo,range:t,reverse:!0},(s,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,fo],[this.userId,Number.POSITIVE_INFINITY]);return Us(e).G(lo,t).next(r=>r.map(s=>so(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=[];return jl(e).Z({range:s},(c,d,f)=>{const[m,y,v]=c,w=ni(y);if(m===this.userId&&t.path.isEqual(w))return Us(e).get(v).next(b=>{if(!b)throw Ie();xe(b.userId===this.userId),o.push(so(this.serializer,b))});f.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new lt(Le);const s=[];return t.forEach(o=>{const c=Vh(this.userId,o.path),d=IDBKeyRange.lowerBound(c),f=jl(e).Z({range:d},(m,y,v)=>{const[w,b,A]=m,I=ni(b);w===this.userId&&o.path.isEqual(I)?r=r.add(A):v.done()});s.push(f)}),W.waitFor(s).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,o=Vh(this.userId,r),c=IDBKeyRange.lowerBound(o);let d=new lt(Le);return jl(e).Z({range:c},(f,m,y)=>{const[v,w,b]=f,A=ni(w);v===this.userId&&r.isPrefixOf(A)?A.length===s&&(d=d.add(b)):y.done()}).next(()=>this.kn(e,d))}kn(e,t){const r=[],s=[];return t.forEach(o=>{s.push(Us(e).get(o).next(c=>{if(c===null)throw Ie();xe(c.userId===this.userId),r.push(so(this.serializer,c))}))}),W.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return zx(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),W.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return W.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),s=[];return jl(e).Z({range:r},(o,c,d)=>{if(o[0]===this.userId){const f=ni(o[1]);s.push(f)}else d.done()}).next(()=>{xe(s.length===0)})})}containsKey(e,t){return qx(e,this.userId,t)}Qn(e){return Hx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:fo,lastStreamToken:""})}}function qx(n,e,t){const r=Vh(e,t.path),s=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return jl(n).Z({range:o,Y:!0},(d,f,m)=>{const[y,v,w]=d;y===e&&v===s&&(c=!0),m.done()}).next(()=>c)}function Us(n){return $t(n,Rr)}function jl(n){return $t(n,Wl)}function Hx(n){return $t(n,od)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new So(0)}static Un(){return new So(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new So(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>De.fromTimestamp(new it(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Gn(e,s)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Nl(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(xe(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let s=0;const o=[];return Nl(e).Z((c,d)=>{const f=qu(d);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,o.push(this.removeTargetData(e,f)))}).next(()=>W.waitFor(o)).next(()=>s)}forEachTarget(e,t){return Nl(e).Z((r,s)=>{const o=qu(s);t(o)})}Wn(e){return $S(e).get(im).next(t=>(xe(t!==null),t))}Gn(e,t){return $S(e).put(im,t)}zn(e,t){return Nl(e).put(Lx(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_o(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Nl(e).Z({range:s,index:UR},(c,d,f)=>{const m=qu(d);Cd(t,m.target)&&(o=m,f.done())}).next(()=>o)}addMatchingKeys(e,t,r){const s=[],o=Ks(e);return t.forEach(c=>{const d=pn(c.path);s.push(o.put({targetId:r,path:d})),s.push(this.referenceDelegate.addReference(e,r,c))}),W.waitFor(s)}removeMatchingKeys(e,t,r){const s=Ks(e);return W.forEach(t,o=>{const c=pn(o.path);return W.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Ks(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ks(e);let o=ze();return s.Z({range:r,Y:!0},(c,d,f)=>{const m=ni(c[1]),y=new _e(m);o=o.add(y)}).next(()=>o)}containsKey(e,t){const r=pn(t.path),s=IDBKeyRange.bound([r],[DR(r)],!1,!0);let o=0;return Ks(e).Z({index:O_,Y:!0,range:s},([c,d],f,m)=>{c!==0&&(o++,m.done())}).next(()=>o>0)}lt(e,t){return Nl(e).get(t).next(r=>r?qu(r):null)}}function Nl(n){return $t(n,Xl)}function $S(n){return $t(n,ho)}function Ks(n){return $t(n,Zl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="LruGarbageCollector",Gx=1048576;function YS([n,e],[t,r]){const s=Le(n,t);return s===0?Le(e,r):s}class BU{constructor(e){this.Hn=e,this.buffer=new lt(YS),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();YS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $x{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ue(KS,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){da(t)?ue(KS,"Ignoring IndexedDB error during garbage collection: ",t):await Mo(t)}await this.er(3e5)})}}class FU{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(hr.ae);const r=new BU(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(GS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GS):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,c,d,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,d=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),Vl()<=Ke.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${o} targets in `+(f-d)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function Kx(n,e){return new FU(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,t){this.db=e,this.garbageCollector=Kx(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,s)=>t(s))}addReference(e,t,r){return ph(e,r)}removeReference(e,t,r){return ph(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ph(e,t)}ar(e,t){return function(s,o){let c=!1;return Hx(s).X(d=>qx(s,d,o).next(f=>(f&&(c=!0),W.resolve(!f)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this._r(e,(c,d)=>{if(d<=t){const f=this.ar(e,c).next(m=>{if(!m)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,De.min()),Ks(e).delete(function(v){return[0,pn(v.path)]}(c))))});s.push(f)}}).next(()=>W.waitFor(s)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ph(e,t)}_r(e,t){const r=Ks(e);let s,o=hr.ae;return r.Z({index:O_},([c,d],{path:f,sequenceNumber:m})=>{c===0?(o!==hr.ae&&t(new _e(ni(s)),o),o=m,s=f):o=hr.ae}).next(()=>{o!==hr.ae&&t(new _e(ni(s)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ph(n,e){return Ks(n).put(function(r,s){return{targetId:0,path:pn(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.changes=new Xi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wa(e).put(r)}removeEntry(e,t,r){return Wa(e).delete(function(o,c){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],hm(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=Ct.newInvalidDocument(t);return Wa(e).Z({index:kh,range:IDBKeyRange.only(ku(t))},(s,o)=>{r=this.cr(t,o)}).next(()=>r)}lr(e,t){let r={size:0,document:Ct.newInvalidDocument(t)};return Wa(e).Z({index:kh,range:IDBKeyRange.only(ku(t))},(s,o)=>{r={document:this.cr(t,o),size:pm(o)}}).next(()=>r)}getEntries(e,t){let r=Gn();return this.hr(e,t,(s,o)=>{const c=this.cr(s,o);r=r.insert(s,c)}).next(()=>r)}Pr(e,t){let r=Gn(),s=new yt(_e.comparator);return this.hr(e,t,(o,c)=>{const d=this.cr(o,c);r=r.insert(o,d),s=s.insert(o,pm(c))}).next(()=>({documents:r,Tr:s}))}hr(e,t,r){if(t.isEmpty())return W.resolve();let s=new lt(XS);t.forEach(f=>s=s.add(f));const o=IDBKeyRange.bound(ku(s.first()),ku(s.last())),c=s.getIterator();let d=c.getNext();return Wa(e).Z({index:kh,range:o},(f,m,y)=>{const v=_e.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&XS(d,v)<0;)r(d,null),d=c.getNext();d&&d.isEqual(v)&&(r(d,m),d=c.hasNext()?c.getNext():null),d?y.W(ku(d)):y.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,o){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),hm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wa(e).G(IDBKeyRange.bound(d,f,!0)).next(m=>{o==null||o.incrementDocumentReadCount(m.length);let y=Gn();for(const v of m){const w=this.cr(_e.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);w.isFoundDocument()&&(Nd(t,w)||s.has(w.key))&&(y=y.insert(w.key,w))}return y})}getAllFromCollectionGroup(e,t,r,s){let o=Gn();const c=WS(t,r),d=WS(t,Yn.max());return Wa(e).Z({index:LR,range:IDBKeyRange.bound(c,d,!0)},(f,m,y)=>{const v=this.cr(_e.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);o=o.insert(v.key,v),o.size===s&&y.done()}).next(()=>o)}newChangeBuffer(e){return new HU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QS(e).get(Ev).next(t=>(xe(!!t),t))}ur(e,t){return QS(e).put(Ev,t)}cr(e,t){if(t){const r=CU(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(De.min())))return r}return Ct.newInvalidDocument(e)}}function Qx(n){return new qU(n)}class HU extends Yx{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new Xi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new lt((o,c)=>Le(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const d=this.Er.get(o);if(t.push(this.Ir.removeEntry(e,o,d.readTime)),c.isValidDocument()){const f=OS(this.Ir.serializer,c);s=s.add(o.path.popLast());const m=pm(f);r+=m-d.size,t.push(this.Ir.addEntry(e,o,f))}else if(r-=d.size,this.trackRemovals){const f=OS(this.Ir.serializer,c.convertToNoDocument(De.min()));t.push(this.Ir.addEntry(e,o,f))}}),s.forEach(o=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Ir.updateMetadata(e,r)),W.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:s})=>(s.forEach((o,c)=>{this.Er.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function QS(n){return $t(n,ld)}function Wa(n){return $t(n,rm)}function ku(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WS(n,e){const t=e.documentKey.path.toArray();return[n,hm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XS(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(s=Le(t[o],r[o]),s)return s;return s=Le(t.length,r.length),s||(s=Le(t[t.length-2],r[r.length-2]),s||Le(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Xu(r.mutation,s,On.empty(),it.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ze()){const s=ri();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let c=Fu();return o.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ri();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ze()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,s){let o=Gn();const c=Wu(),d=function(){return Wu()}();return t.forEach((f,m)=>{const y=r.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof Zi)?o=o.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),Xu(y.mutation,m,y.mutation.getFieldMask(),it.now())):c.set(m.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((m,y)=>c.set(m,y)),t.forEach((m,y)=>{var v;return d.set(m,new GU(y,(v=c.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Wu();let s=new yt((c,d)=>c-d),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let y=r.get(f)||On.empty();y=d.applyToLocalView(m,y),r.set(f,y);const v=(s.get(d.batchId)||ze()).add(f);s=s.insert(d.batchId,v)})}).next(()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,y=f.value,v=hx();y.forEach(w=>{if(!o.has(w)){const b=_x(t.get(w),r.get(w));b!==null&&v.set(w,b),o=o.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return W.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):W.resolve(ri());let d=id,f=o;return c.next(m=>W.forEach(m,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),o.get(y)?W.resolve():this.remoteDocumentCache.getEntry(e,y).next(w=>{f=f.insert(y,w)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,f,m,ze())).next(y=>({batchId:d,changes:fx(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let s=Fu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let c=Fu();return this.indexManager.getCollectionParents(e,o).next(d=>W.forEach(d,f=>{const m=function(v,w){return new yc(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(y=>{y.forEach((v,w)=>{c=c.insert(v,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(c=>{o.forEach((f,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,Ct.newInvalidDocument(y)))});let d=Fu();return c.forEach((f,m)=>{const y=o.get(f);y!==void 0&&Xu(y.mutation,m,On.empty(),it.now()),Nd(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return W.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Rn(s.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:Ux(s.bundledQuery),readTime:Rn(s.readTime)}}(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(){this.overlays=new yt(_e.comparator),this.Rr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ri();return W.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),W.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){const s=ri(),o=t.length+1,c=new _e(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return W.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new yt((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=o.get(m.largestBatchId);y===null&&(y=ri(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=ri(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=s)););return W.resolve(d)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new $_(t,r));let o=this.Rr.get(t);o===void 0&&(o=ze(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(){this.Vr=new lt(tn.mr),this.gr=new lt(tn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new tn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new tn(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new _e(new at([])),r=new tn(t,e),s=new tn(t,e+1),o=[];return this.gr.forEachInRange([r,s],c=>{this.wr(c),o.push(c.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new _e(new at([])),r=new tn(t,e),s=new tn(t,e+1);let o=ze();return this.gr.forEachInRange([r,s],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new tn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return _e.comparator(e.key,t.key)||Le(e.Cr,t.Cr)}static pr(e,t){return Le(e.Cr,t.Cr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new lt(tn.mr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new H_(o,t,r,s);this.mutationQueue.push(c);for(const d of s)this.Mr=this.Mr.add(new tn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return W.resolve(c)}lookupMutationBatch(e,t){return W.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return W.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?fo:this.Fr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tn(t,0),s=new tn(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],c=>{const d=this.Or(c.Cr);o.push(d)}),W.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new lt(Le);return t.forEach(s=>{const o=new tn(s,0),c=new tn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,c],d=>{r=r.add(d.Cr)})}),W.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const c=new tn(new _e(o),0);let d=new lt(Le);return this.Mr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Cr)),!0)},c),W.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){xe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return W.forEach(t.mutations,s=>{const o=new tn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new tn(t,0),s=this.Mr.firstAfterOrEqual(r);return W.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.kr=e,this.docs=function(){return new yt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,c=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():Ct.newInvalidDocument(t))}getEntries(e,t){let r=Gn();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Ct.newInvalidDocument(s))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Gn();const c=t.path,d=new _e(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||D_(PR(y),r)<=0||(s.has(y.key)||Nd(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return W.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ie()}qr(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XU(this)}getSize(e){return W.resolve(this.size)}}class XU extends Yx{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.persistence=e,this.Qr=new Xi(t=>_o(t),Cd),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Kr=new X_,this.targetCount=0,this.Ur=So.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),W.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new So(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.zn(t),W.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Qr.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)}),W.waitFor(o).next(()=>s)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(c=>{o.push(s.markPotentiallyOrphaned(e,c))}),W.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new hr(0),this.zr=!1,this.zr=!0,this.jr=new YU,this.referenceDelegate=e(this),this.Hr=new ZU(this),this.indexManager=new LU,this.remoteDocumentCache=function(s){return new WU(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new kx(t),this.Yr=new $U(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new QU(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const s=new JU(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return W.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class JU extends MR{constructor(e){super(),this.currentSequenceNumber=e}}class Wm{constructor(e){this.persistence=e,this.ti=new X_,this.ni=null}static ri(e){return new Wm(e)}get ii(){if(this.ni)return this.ni;throw Ie()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),W.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ii,r=>{const s=_e.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,De.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return W.or([()=>W.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class gm{constructor(e,t){this.persistence=e,this.oi=new Xi(r=>pn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Kx(this,t)}static ri(e,t){return new gm(e,t)}Zr(){}Xr(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return W.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?W.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,c=>this.ar(e,c,t).next(d=>{d||(r++,o.removeEntry(c,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),W.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}ar(e,t,r){return W.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return W.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.serializer=e}B(e,t,r,s){const o=new km("createOrUpgrade",t);r<1&&s>=1&&(function(f){f.createObjectStore(xd)}(e),function(f){f.createObjectStore(od,{keyPath:f4}),f.createObjectStore(Rr,{keyPath:cS,autoIncrement:!0}).createIndex(lo,uS,{unique:!0}),f.createObjectStore(Wl)}(e),ZS(e),function(f){f.createObjectStore(no)}(e));let c=W.resolve();return r<3&&s>=3&&(r!==0&&(function(f){f.deleteObjectStore(Zl),f.deleteObjectStore(Xl),f.deleteObjectStore(ho)}(e),ZS(e)),c=c.next(()=>function(f){const m=f.store(ho),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return m.put(im,y)}(o))),r<4&&s>=4&&(r!==0&&(c=c.next(()=>function(f,m){return m.store(Rr).G().next(v=>{f.deleteObjectStore(Rr),f.createObjectStore(Rr,{keyPath:cS,autoIncrement:!0}).createIndex(lo,uS,{unique:!0});const w=m.store(Rr),b=v.map(A=>w.put(A));return W.waitFor(b)})}(e,o))),c=c.next(()=>{(function(f){f.createObjectStore(Jl,{keyPath:E4})})(e)})),r<5&&s>=5&&(c=c.next(()=>this._i(o))),r<6&&s>=6&&(c=c.next(()=>(function(f){f.createObjectStore(ld)}(e),this.ai(o)))),r<7&&s>=7&&(c=c.next(()=>this.ui(o))),r<8&&s>=8&&(c=c.next(()=>this.ci(e,o))),r<9&&s>=9&&(c=c.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(c=c.next(()=>this.li(o))),r<11&&s>=11&&(c=c.next(()=>{(function(f){f.createObjectStore(Um,{keyPath:b4})})(e),function(f){f.createObjectStore(jm,{keyPath:T4})}(e)})),r<12&&s>=12&&(c=c.next(()=>{(function(f){const m=f.createObjectStore(Bm,{keyPath:N4});m.createIndex(Tv,D4,{unique:!1}),m.createIndex(FR,P4,{unique:!1})})(e)})),r<13&&s>=13&&(c=c.next(()=>function(f){const m=f.createObjectStore(rm,{keyPath:m4});m.createIndex(kh,p4),m.createIndex(LR,g4)}(e)).next(()=>this.hi(e,o)).next(()=>e.deleteObjectStore(no))),r<14&&s>=14&&(c=c.next(()=>this.Pi(e,o))),r<15&&s>=15&&(c=c.next(()=>function(f){f.createObjectStore(M_,{keyPath:S4,autoIncrement:!0}).createIndex(bv,A4,{unique:!1}),f.createObjectStore(sm,{keyPath:I4}).createIndex(jR,R4,{unique:!1}),f.createObjectStore(am,{keyPath:x4}).createIndex(BR,C4,{unique:!1})}(e))),r<16&&s>=16&&(c=c.next(()=>{t.objectStore(sm).clear()}).next(()=>{t.objectStore(am).clear()})),r<17&&s>=17&&(c=c.next(()=>{(function(f){f.createObjectStore(V_,{keyPath:O4})})(e)})),c}ai(e){let t=0;return e.store(no).Z((r,s)=>{t+=pm(s)}).next(()=>{const r={byteSize:t};return e.store(ld).put(Ev,r)})}_i(e){const t=e.store(od),r=e.store(Rr);return t.G().next(s=>W.forEach(s,o=>{const c=IDBKeyRange.bound([o.userId,fo],[o.userId,o.lastAcknowledgedBatchId]);return r.G(lo,c).next(d=>W.forEach(d,f=>{xe(f.userId===o.userId);const m=so(this.serializer,f);return zx(e,o.userId,m).next(()=>{})}))}))}ui(e){const t=e.store(Zl),r=e.store(no);return e.store(ho).get(im).next(s=>{const o=[];return r.Z((c,d)=>{const f=new at(c),m=function(v){return[0,pn(v)]}(f);o.push(t.get(m).next(y=>y?W.resolve():(v=>t.put({targetId:0,path:pn(v),sequenceNumber:s.highestListenSequenceNumber}))(f)))}).next(()=>W.waitFor(o))})}ci(e,t){e.createObjectStore(cd,{keyPath:w4});const r=t.store(cd),s=new W_,o=c=>{if(s.add(c)){const d=c.lastSegment(),f=c.popLast();return r.put({collectionId:d,parent:pn(f)})}};return t.store(no).Z({Y:!0},(c,d)=>{const f=new at(c);return o(f.popLast())}).next(()=>t.store(Wl).Z({Y:!0},([c,d,f],m)=>{const y=ni(d);return o(y.popLast())}))}li(e){const t=e.store(Xl);return t.Z((r,s)=>{const o=qu(s),c=Lx(this.serializer,o);return t.put(c)})}hi(e,t){const r=t.store(no),s=[];return r.Z((o,c)=>{const d=t.store(rm),f=function(v){return v.document?new _e(at.fromString(v.document.name).popFirst(5)):v.noDocument?_e.fromSegments(v.noDocument.path):v.unknownDocument?_e.fromSegments(v.unknownDocument.path):Ie()}(c).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(d.put(m))}).next(()=>W.waitFor(s))}Pi(e,t){const r=t.store(Rr),s=Qx(this.serializer),o=new Z_(Wm.ri,this.serializer.Tt);return r.G().next(c=>{const d=new Map;return c.forEach(f=>{var m;let y=(m=d.get(f.userId))!==null&&m!==void 0?m:ze();so(this.serializer,f).keys().forEach(v=>y=y.add(v)),d.set(f.userId,y)}),W.forEach(d,(f,m)=>{const y=new Sn(m),v=Ym.It(this.serializer,y),w=o.getIndexManager(y),b=Qm.It(y,this.serializer,w,o.referenceDelegate);return new Wx(s,b,v,w).recalculateAndSaveOverlaysForDocumentKeys(new Sv(t,hr.ae),f).next()})})}}function ZS(n){n.createObjectStore(Zl,{keyPath:v4}).createIndex(O_,_4,{unique:!0}),n.createObjectStore(Xl,{keyPath:"targetId"}).createIndex(UR,y4,{unique:!0}),n.createObjectStore(ho)}const js="IndexedDbPersistence",By=18e5,Fy=5e3,zy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tj="main";class J_{constructor(e,t,r,s,o,c,d,f,m,y,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=o,this.window=c,this.document=d,this.Ii=m,this.Ei=y,this.di=v,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=w=>Promise.resolve(),!J_.D())throw new ge(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zU(this,s),this.gi=t+tj,this.serializer=new kx(f),this.pi=new Js(this.gi,this.di,new ej(this.serializer)),this.jr=new DU,this.Hr=new jU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Qx(this.serializer),this.Yr=new NU,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,y===!1&&An(js,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(re.FAILED_PRECONDITION,zy);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new hr(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(da(e))return ue(js,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue(js,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Lu(e).get(Al).next(t=>W.resolve(this.Ni(t)))}Bi(e){return gh(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,By)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=$t(t,Jl);return r.G().next(s=>{const o=this.qi(s,By),c=s.filter(d=>o.indexOf(d)===-1);return W.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?W.resolve(!0):Lu(e).get(Al).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Fy)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ge(re.FAILED_PRECONDITION,zy);return!1}}return!(!this.networkEnabled||!this.inForeground)||gh(e).G().next(r=>this.qi(r,Fy).find(s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,d=this.networkEnabled===s.networkEnabled;if(o||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ue(js,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[xd,Jl],e=>{const t=new Sv(e,hr.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>gh(e).G().next(t=>this.qi(t,By).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Qm.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UU(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Ym.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){ue(js,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=function(f){return f===17?k4:f===16?V4:f===15?k_:f===14?HR:f===13?qR:f===12?M4:f===11?zR:void Ie()}(this.di);let c;return this.pi.runTransaction(e,s,o,d=>(c=new Sv(d,this.Gr?this.Gr.next():hr.ae),t==="readwrite-primary"?this.Fi(c).next(f=>!!f||this.Mi(c)).next(f=>{if(!f)throw An(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ge(re.FAILED_PRECONDITION,OR);return r(c)}).next(f=>this.Oi(c).next(()=>f)):this.ji(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}ji(e){return Lu(e).get(Al).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Fy)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(re.FAILED_PRECONDITION,zy)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lu(e).put(Al,t)}static D(){return Js.D()}xi(e){const t=Lu(e);return t.get(Al).next(r=>this.Ni(r)?(ue(js,"Releasing primary lease."),t.delete(Al)):W.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(An(`Detected an update time that is in the future: ${e} > ${r}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;MI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return ue(js,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return An(js,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){An("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lu(n){return $t(n,xd)}function gh(n){return $t(n,Jl)}function nj(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=ze(),s=ze();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new ew(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return MI()?8:VR(Gt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new rj;return this._s(e,t,c).next(d=>{if(o.result=d,this.Xi)return this.us(e,t,c,d.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(Vl()<=Ke.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",kl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),W.resolve()):(Vl()<=Ke.DEBUG&&ue("QueryEngine","Query:",kl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Vl()<=Ke.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",kl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(t))):W.resolve())}rs(e,t){if(TS(t))return W.resolve(null);let r=gr(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=um(t,null,"F"),r=gr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=ze(...o);return this.ns.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.cs(t,d);return this.ls(t,m,c,f.readTime)?this.rs(e,um(t,null,"F")):this.hs(e,m,t,f)}))})))}ss(e,t,r,s){return TS(t)||s.isEqual(De.min())?W.resolve(null):this.ns.getDocuments(e,r).next(o=>{const c=this.cs(t,o);return this.ls(t,c,r,s)?W.resolve(null):(Vl()<=Ke.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),kl(t)),this.hs(e,c,t,s4(s,id)).next(d=>d))})}cs(e,t){let r=new lt(ux(e));return t.forEach((s,o)=>{Nd(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return Vl()<=Ke.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",kl(t)),this.ns.getDocumentsMatchingQuery(e,t,Yn.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="LocalStore",ij=3e8;class sj{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new yt(Le),this.Is=new Xi(o=>_o(o),Cd),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wx(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function Zx(n,e,t,r){return new sj(n,e,t,r)}async function Jx(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],d=[];let f=ze();for(const m of s){c.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of o){d.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next(m=>({Rs:m,removedBatchIds:c,addedBatchIds:d}))})})}function aj(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,f,m,y){const v=m.batch,w=v.keys();let b=W.resolve();return w.forEach(A=>{b=b.next(()=>y.getEntry(f,A)).next(I=>{const x=m.docVersions.get(A);xe(x!==null),I.version.compareTo(x)<0&&(v.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),y.addEntry(I)))})}),b.next(()=>d.mutationQueue.removeMutationBatch(f,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=ze();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function eC(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function oj(n,e){const t=Me(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const d=[];e.targetChanges.forEach((y,v)=>{const w=s.get(v);if(!w)return;d.push(t.Hr.removeMatchingKeys(o,y.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,y.addedDocuments,v)));let b=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Lt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,r)),s=s.insert(v,b),function(I,x,C){return I.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=ij?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(w,b,y)&&d.push(t.Hr.updateTargetData(o,b))});let f=Gn(),m=ze();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),d.push(lj(o,c,e.documentUpdates).next(y=>{f=y.Vs,m=y.fs})),!r.isEqual(De.min())){const y=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(y)}return W.waitFor(d).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,m)).next(()=>f)}).then(o=>(t.Ts=s,o))}function lj(n,e,t){let r=ze(),s=ze();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=Gn();return t.forEach((d,f)=>{const m=o.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(De.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):ue(tw,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Vs:c,fs:s}})}function cj(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fo),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uj(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,W.resolve(s)):t.Hr.allocateTargetId(r).next(c=>(s=new Fi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Uv(n,e,t){const r=Me(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!da(c))throw c;ue(tw,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function jv(n,e,t){const r=Me(n);let s=De.min(),o=ze();return r.persistence.runTransaction("Execute query","readwrite",c=>function(f,m,y){const v=Me(f),w=v.Is.get(y);return w!==void 0?W.resolve(v.Ts.get(w)):v.Hr.getTargetData(m,y)}(r,c,gr(e)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,d.targetId).next(f=>{o=f})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,e,t?s:De.min(),t?o:ze())).next(d=>(dj(r,X4(e),d),{documents:d,gs:o})))}function dj(n,e,t){let r=n.Es.get(e)||De.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class JS{constructor(){this.activeTargetIds=rU()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tC{constructor(){this.ho=new JS,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new JS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="ConnectivityMonitor";class tA{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ue(eA,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ue(eA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function Bv(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="RestConnection",hj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mj{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===om?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,t,r,s,o){const c=Bv(),d=this.So(e,t.toUriEncodedString());ue(qy,`Sending RPC '${e}' ${c}:`,d,r);const f={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(f,s,o),this.vo(e,d,f,r).then(m=>(ue(qy,`Received RPC '${e}' ${c}: `,m),m),m=>{throw rd(qy,`RPC '${e}' ${c} failed with error: `,m,"url: ",d,"request:",r),m})}Co(e,t,r,s,o,c){return this.bo(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}So(e,t){const r=hj[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class gj extends mj{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=Bv();return new Promise((c,d)=>{const f=new AR;f.setWithCredentials(!0),f.listenOnce(IR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Oh.NO_ERROR:const y=f.getResponseJson();ue(dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),c(y);break;case Oh.TIMEOUT:ue(dn,`RPC '${e}' ${o} timed out`),d(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case Oh.HTTP_ERROR:const v=f.getStatus();if(ue(dn,`RPC '${e}' ${o} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w==null?void 0:w.error;if(b&&b.status&&b.message){const A=function(x){const C=x.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(C)>=0?C:re.UNKNOWN}(b.status);d(new ge(A,b.message))}else d(new ge(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ge(re.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{ue(dn,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);ue(dn,`RPC '${e}' ${o} sending request:`,s),f.send(t,"POST",m,r,15)})}Wo(e,t,r){const s=Bv(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=CR(),d=xR(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Do(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=o.join("");ue(dn,`Creating RPC '${e}' stream ${s}: ${y}`,f);const v=c.createWebChannel(y,f);let w=!1,b=!1;const A=new pj({Fo:x=>{b?ue(dn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(w||(ue(dn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),w=!0),ue(dn,`RPC '${e}' stream ${s} sending:`,x),v.send(x))},Mo:()=>v.close()}),I=(x,C,M)=>{x.listen(C,k=>{try{M(k)}catch($){setTimeout(()=>{throw $},0)}})};return I(v,Bu.EventType.OPEN,()=>{b||(ue(dn,`RPC '${e}' stream ${s} transport opened.`),A.Qo())}),I(v,Bu.EventType.CLOSE,()=>{b||(b=!0,ue(dn,`RPC '${e}' stream ${s} transport closed`),A.Ko())}),I(v,Bu.EventType.ERROR,x=>{b||(b=!0,rd(dn,`RPC '${e}' stream ${s} transport errored:`,x),A.Ko(new ge(re.UNAVAILABLE,"The operation could not be completed")))}),I(v,Bu.EventType.MESSAGE,x=>{var C;if(!b){const M=x.data[0];xe(!!M);const k=M,$=(k==null?void 0:k.error)||((C=k[0])===null||C===void 0?void 0:C.error);if($){ue(dn,`RPC '${e}' stream ${s} received error:`,$);const G=$.status;let Y=function(D){const U=Vt[D];if(U!==void 0)return bx(U)}(G),V=$.message;Y===void 0&&(Y=re.INTERNAL,V="Unknown error status: "+G+" with message "+$.message),b=!0,A.Ko(new ge(Y,V)),v.close()}else ue(dn,`RPC '${e}' stream ${s} received:`,M),A.Uo(M)}}),I(d,RR.STAT_EVENT,x=>{x.stat===_v.PROXY?ue(dn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===_v.NOPROXY&&ue(dn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.$o()},0),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(){return typeof window<"u"?window:null}function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n){return new _U(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="PersistentStream";class rC{constructor(e,t,r,s,o,c,d,f){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new nC(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(An(t.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new ge(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ue(nA,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ue(nA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vj extends rC{constructor(e,t,r,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=bU(this.serializer,e),r=function(o){if(!("targetChange"in o))return De.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?De.min():c.readTime?Rn(c.readTime):De.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Ov(this.serializer),t.addTarget=function(o,c){let d;const f=c.target;if(d=lm(f)?{documents:Nx(o,f)}:{query:Dx(o,f).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Ax(o,c.resumeToken);const m=Dv(o,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(De.min())>0){d.readTime=ic(o,c.snapshotVersion.toTimestamp());const m=Dv(o,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=SU(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Ov(this.serializer),t.removeTarget=e,this.I_(t)}}class _j extends rC{constructor(e,t,r,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=TU(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Ov(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fm(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{}class Ej extends wj{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.bo(e,Pv(t,r),s,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(re.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(e,Pv(t,r),s,c,d,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(re.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class bj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(An(t),this.N_=!1):ue("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="RemoteStore";class Tj{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(c=>{r.enqueueAndForget(async()=>{Vo(this)&&(ue(Ao,"Restarting streams for network reachability change."),await async function(f){const m=Me(f);m.W_.add(4),await Pd(m),m.j_.set("Unknown"),m.W_.delete(4),await Zm(m)}(this))})}),this.j_=new bj(r,s)}}async function Zm(n){if(Vo(n))for(const e of n.G_)await e(!0)}async function Pd(n){for(const e of n.G_)await e(!1)}function iC(n,e){const t=Me(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),sw(t)?iw(t):_c(t).c_()&&rw(t,e))}function nw(n,e){const t=Me(n),r=_c(t);t.U_.delete(e),r.c_()&&sC(t,e),t.U_.size===0&&(r.c_()?r.P_():Vo(t)&&t.j_.set("Unknown"))}function rw(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_c(n).y_(e)}function sC(n,e){n.H_.Ne(e),_c(n).w_(e)}function iw(n){n.H_=new pU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),_c(n).start(),n.j_.B_()}function sw(n){return Vo(n)&&!_c(n).u_()&&n.U_.size>0}function Vo(n){return Me(n).W_.size===0}function aC(n){n.H_=void 0}async function Sj(n){n.j_.set("Online")}async function Aj(n){n.U_.forEach((e,t)=>{rw(n,e)})}async function Ij(n,e){aC(n),sw(n)?(n.j_.q_(e),iw(n)):n.j_.set("Unknown")}async function Rj(n,e,t){if(n.j_.set("Online"),e instanceof Sx&&e.state===2&&e.cause)try{await async function(s,o){const c=o.cause;for(const d of o.targetIds)s.U_.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.U_.delete(d),s.H_.removeTarget(d))}(n,e)}catch(r){ue(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ym(n,r)}else if(e instanceof Fh?n.H_.We(e):e instanceof Tx?n.H_.Ze(e):n.H_.je(e),!t.isEqual(De.min()))try{const r=await eC(n.localStore);t.compareTo(r)>=0&&await function(o,c){const d=o.H_.ot(c);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.U_.get(m);y&&o.U_.set(m,y.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,m)=>{const y=o.U_.get(f);if(!y)return;o.U_.set(f,y.withResumeToken(Lt.EMPTY_BYTE_STRING,y.snapshotVersion)),sC(o,f);const v=new Fi(y.target,f,m,y.sequenceNumber);rw(o,v)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){ue(Ao,"Failed to raise snapshot:",r),await ym(n,r)}}async function ym(n,e,t){if(!da(e))throw e;n.W_.add(1),await Pd(n),n.j_.set("Offline"),t||(t=()=>eC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue(Ao,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Zm(n)})}function oC(n,e){return e().catch(t=>ym(n,t,e))}async function Od(n){const e=Me(n),t=ra(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:fo;for(;xj(e);)try{const s=await cj(e.localStore,r);if(s===null){e.K_.length===0&&t.P_();break}r=s.batchId,Cj(e,s)}catch(s){await ym(e,s)}lC(e)&&cC(e)}function xj(n){return Vo(n)&&n.K_.length<10}function Cj(n,e){n.K_.push(e);const t=ra(n);t.c_()&&t.b_&&t.S_(e.mutations)}function lC(n){return Vo(n)&&!ra(n).u_()&&n.K_.length>0}function cC(n){ra(n).start()}async function Nj(n){ra(n).C_()}async function Dj(n){const e=ra(n);for(const t of n.K_)e.S_(t.mutations)}async function Pj(n,e,t){const r=n.K_.shift(),s=G_.from(r,e,t);await oC(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Od(n)}async function Oj(n,e){e&&ra(n).b_&&await async function(r,s){if(function(c){return fU(c)&&c!==re.ABORTED}(s.code)){const o=r.K_.shift();ra(r).h_(),await oC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Od(r)}}(n,e),lC(n)&&cC(n)}async function rA(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),ue(Ao,"RemoteStore received new credentials");const r=Vo(t);t.W_.add(3),await Pd(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Zm(t)}async function Mj(n,e){const t=Me(n);e?(t.W_.delete(2),await Zm(t)):e||(t.W_.add(2),await Pd(t),t.j_.set("Unknown"))}function _c(n){return n.J_||(n.J_=function(t,r,s){const o=Me(t);return o.M_(),new vj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:Sj.bind(null,n),No:Aj.bind(null,n),Lo:Ij.bind(null,n),p_:Rj.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),sw(n)?iw(n):n.j_.set("Unknown")):(await n.J_.stop(),aC(n))})),n.J_}function ra(n){return n.Y_||(n.Y_=function(t,r,s){const o=Me(t);return o.M_(),new _j(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:Nj.bind(null,n),Lo:Oj.bind(null,n),D_:Dj.bind(null,n),v_:Pj.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Od(n)):(await n.Y_.stop(),n.K_.length>0&&(ue(Ao,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const c=Date.now()+r,d=new aw(e,t,c,s,o);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Md(n,e){if(An("AsyncQueue",`${e}: ${n}`),da(n))return new ge(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{static emptySet(e){return new Gl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Fu(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Gl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.Z_=new yt(_e.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ie():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class sc{constructor(e,t,r,s,o,c,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,o){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new sc(e,t,Gl.emptySet(t),c,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class kj{constructor(){this.queries=sA(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=Me(t),o=s.queries;s.queries=sA(),o.forEach((c,d)=>{for(const f of d.ta)f.onError(r)})})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function sA(){return new Xi(n=>cx(n),Hm)}async function uC(n,e){const t=Me(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new Vj,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=Md(c,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&ow(t)}async function dC(n,e){const t=Me(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const c=o.ta.indexOf(e);c>=0&&(o.ta.splice(c,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Lj(n,e){const t=Me(n);let r=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const d of c.ta)d.oa(s)&&(r=!0);c.ea=s}}r&&ow(t)}function Uj(n,e,t){const r=Me(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function ow(n){n.ia.forEach(e=>{e.next()})}var Fv,aA;(aA=Fv||(Fv={}))._a="default",aA.Cache="cache";class fC{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new sc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Fv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.key=e}}class mC{constructor(e){this.key=e}}class pC{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ze(),this.mutatedKeys=ze(),this.ya=ux(e),this.wa=new Gl(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new iA,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const w=s.get(y),b=Nd(this.query,v)?v:null,A=!!w&&this.mutatedKeys.has(w.key),I=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let x=!1;w&&b?w.data.isEqual(b.data)?A!==I&&(r.track({type:3,doc:b}),x=!0):this.va(w,b)||(r.track({type:2,doc:b}),x=!0,(f&&this.ya(b,f)>0||m&&this.ya(b,m)<0)&&(d=!0)):!w&&b?(r.track({type:0,doc:b}),x=!0):w&&!b&&(r.track({type:1,doc:w}),x=!0,(f||m)&&(d=!0)),x&&(b?(c=c.add(b),o=I?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{wa:c,Da:r,ls:d,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((y,v)=>function(b,A){const I=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return I(b)-I(A)}(y.type,v.type)||this.ya(y.doc,v.doc)),this.Ca(r),s=s!=null&&s;const d=t&&!s?this.Fa():[],f=this.pa.size===0&&this.current&&!s?1:0,m=f!==this.ga;return this.ga=f,c.length!==0||m?{snapshot:new sc(this.query,e.wa,o,c,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new iA,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ze(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new mC(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new hC(r))}),t}Oa(e){this.fa=e.gs,this.pa=ze();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return sc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const lw="SyncEngine";class jj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Bj{constructor(e){this.key=e,this.Ba=!1}}class Fj{constructor(e,t,r,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new Xi(d=>cx(d),Hm),this.qa=new Map,this.Qa=new Set,this.$a=new yt(_e.comparator),this.Ka=new Map,this.Ua=new X_,this.Wa={},this.Ga=new Map,this.za=So.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function zj(n,e,t=!0){const r=EC(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await gC(r,e,t,!0),s}async function qj(n,e){const t=EC(n);await gC(t,e,!0,!1)}async function gC(n,e,t,r){const s=await uj(n.localStore,gr(e)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let d;return r&&(d=await Hj(n,e,o,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&iC(n.remoteStore,s),d}async function Hj(n,e,t,r,s){n.Ha=(v,w,b)=>async function(I,x,C,M){let k=x.view.Sa(C);k.ls&&(k=await jv(I.localStore,x.query,!1).then(({documents:V})=>x.view.Sa(V,k)));const $=M&&M.targetChanges.get(x.targetId),G=M&&M.targetMismatches.get(x.targetId)!=null,Y=x.view.applyChanges(k,I.isPrimaryClient,$,G);return lA(I,x.targetId,Y.Ma),Y.snapshot}(n,v,w,b);const o=await jv(n.localStore,e,!0),c=new pC(e,o.gs),d=c.Sa(o.documents),f=Dd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(d,n.isPrimaryClient,f);lA(n,t,m.Ma);const y=new jj(e,t,c);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),m.snapshot}async function Gj(n,e,t){const r=Me(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(c=>!Hm(c,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Uv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&nw(r.remoteStore,s.targetId),zv(r,s.targetId)}).catch(Mo)):(zv(r,s.targetId),await Uv(r.localStore,s.targetId,!0))}async function $j(n,e){const t=Me(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nw(t.remoteStore,r.targetId))}async function Kj(n,e,t){const r=bC(n);try{const s=await function(c,d){const f=Me(c),m=it.now(),y=d.reduce((b,A)=>b.add(A.key),ze());let v,w;return f.persistence.runTransaction("Locally write mutations","readwrite",b=>{let A=Gn(),I=ze();return f.ds.getEntries(b,y).next(x=>{A=x,A.forEach((C,M)=>{M.isValidDocument()||(I=I.add(C))})}).next(()=>f.localDocuments.getOverlayedDocuments(b,A)).next(x=>{v=x;const C=[];for(const M of d){const k=uU(M,v.get(M.key).overlayedDocument);k!=null&&C.push(new Zi(M.key,k,ex(k.value.mapValue),In.exists(!0)))}return f.mutationQueue.addMutationBatch(b,m,C,d)}).next(x=>{w=x;const C=x.applyToLocalDocumentSet(v,I);return f.documentOverlayCache.saveOverlays(b,x.batchId,C)})}).then(()=>({batchId:w.batchId,changes:fx(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,d,f){let m=c.Wa[c.currentUser.toKey()];m||(m=new yt(Le)),m=m.insert(d,f),c.Wa[c.currentUser.toKey()]=m}(r,s.batchId,t),await Vd(r,s.changes),await Od(r.remoteStore)}catch(s){const o=Md(s,"Failed to persist write");t.reject(o)}}async function yC(n,e){const t=Me(n);try{const r=await oj(t.localStore,e);e.targetChanges.forEach((s,o)=>{const c=t.Ka.get(o);c&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.Ba=!0:s.modifiedDocuments.size>0?xe(c.Ba):s.removedDocuments.size>0&&(xe(c.Ba),c.Ba=!1))}),await Vd(t,r,e)}catch(r){await Mo(r)}}function oA(n,e,t){const r=Me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,c)=>{const d=c.view.sa(e);d.snapshot&&s.push(d.snapshot)}),function(c,d){const f=Me(c);f.onlineState=d;let m=!1;f.queries.forEach((y,v)=>{for(const w of v.ta)w.sa(d)&&(m=!0)}),m&&ow(f)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yj(n,e,t){const r=Me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ka.get(e),o=s&&s.key;if(o){let c=new yt(_e.comparator);c=c.insert(o,Ct.newNoDocument(o,De.min()));const d=ze().add(o),f=new Km(De.min(),new Map,new yt(Le),c,d);await yC(r,f),r.$a=r.$a.remove(o),r.Ka.delete(e),cw(r)}else await Uv(r.localStore,e,!1).then(()=>zv(r,e,t)).catch(Mo)}async function Qj(n,e){const t=Me(n),r=e.batch.batchId;try{const s=await aj(t.localStore,e);_C(t,r,null),vC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Vd(t,s)}catch(s){await Mo(s)}}async function Wj(n,e,t){const r=Me(n);try{const s=await function(c,d){const f=Me(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.mutationQueue.lookupMutationBatch(m,d).next(v=>(xe(v!==null),y=v.keys(),f.mutationQueue.removeMutationBatch(m,v))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>f.localDocuments.getDocuments(m,y))})}(r.localStore,e);_C(r,e,t),vC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Vd(r,s)}catch(s){await Mo(s)}}function vC(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function _C(n,e,t){const r=Me(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function zv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||wC(n,r)})}function wC(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(nw(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),cw(n))}function lA(n,e,t){for(const r of t)r instanceof hC?(n.Ua.addReference(r.key,e),Xj(n,r)):r instanceof mC?(ue(lw,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||wC(n,r.key)):Ie()}function Xj(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ue(lw,"New document in limbo: "+t),n.Qa.add(r),cw(n))}function cw(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new _e(at.fromString(e)),r=n.za.next();n.Ka.set(r,new Bj(t)),n.$a=n.$a.insert(t,r),iC(n.remoteStore,new Fi(gr(qm(t.path)),r,"TargetPurposeLimboResolution",hr.ae))}}async function Vd(n,e,t){const r=Me(n),s=[],o=[],c=[];r.ka.isEmpty()||(r.ka.forEach((d,f)=>{c.push(r.Ha(f,e,t).then(m=>{var y;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(m){s.push(m);const v=ew.Yi(f.targetId,m);o.push(v)}}))}),await Promise.all(c),r.La.p_(s),await async function(f,m){const y=Me(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>W.forEach(m,w=>W.forEach(w.Hi,b=>y.persistence.referenceDelegate.addReference(v,w.targetId,b)).next(()=>W.forEach(w.Ji,b=>y.persistence.referenceDelegate.removeReference(v,w.targetId,b)))))}catch(v){if(!da(v))throw v;ue(tw,"Failed to update sequence numbers: "+v)}for(const v of m){const w=v.targetId;if(!v.fromCache){const b=y.Ts.get(w),A=b.snapshotVersion,I=b.withLastLimboFreeSnapshotVersion(A);y.Ts=y.Ts.insert(w,I)}}}(r.localStore,o))}async function Zj(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){ue(lw,"User change. New user:",e.toKey());const r=await Jx(t.localStore,e);t.currentUser=e,function(o,c){o.Ga.forEach(d=>{d.forEach(f=>{f.reject(new ge(re.CANCELLED,c))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vd(t,r.Rs)}}function Jj(n,e){const t=Me(n),r=t.Ka.get(e);if(r&&r.Ba)return ze().add(r.key);{let s=ze();const o=t.qa.get(e);if(!o)return s;for(const c of o){const d=t.ka.get(c);s=s.unionWith(d.view.ba)}return s}}function EC(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yj.bind(null,e),e.La.p_=Lj.bind(null,e.eventManager),e.La.Ja=Uj.bind(null,e.eventManager),e}function bC(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wj.bind(null,e),e}class yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Zx(this.persistence,new Xx,e.initialUser,this.serializer)}Xa(e){return new Z_(Wm.ri,this.serializer)}Za(e){return new tC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yd.provider={build:()=>new yd};class e9 extends yd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){xe(this.persistence.referenceDelegate instanceof gm);const r=this.persistence.referenceDelegate.garbageCollector;return new $x(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new Z_(r=>gm.ri(r,t),this.serializer)}}class t9 extends yd{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await bC(this.ru.syncEngine),await Od(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return Zx(this.persistence,new Xx,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new $x(r,e.asyncQueue,t)}nu(e,t){const r=new c4(t,this.persistence);return new l4(e.asyncQueue,r)}Xa(e){const t=nj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new J_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yj(),zh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new tC}}class vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zj.bind(null,this.syncEngine),await Mj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kj}()}createDatastore(e){const t=Xm(e.databaseInfo.databaseId),r=function(o){return new gj(o)}(e.databaseInfo);return function(o,c,d,f){return new Ej(o,c,d,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,c,d){return new Tj(r,s,o,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>oA(this.syncEngine,t,0),function(){return tA.D()?new tA:new fj}())}createSyncEngine(e,t){return function(s,o,c,d,f,m,y){const v=new Fj(s,o,c,d,f,m);return y&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=Me(s);ue(Ao,"RemoteStore shutting down."),o.W_.add(5),await Pd(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}vm.provider={build:()=>new vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="FirestoreClient";class n9{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Sn.UNAUTHENTICATED,this.clientId=NR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{ue(ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ue(ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Md(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hy(n,e){n.asyncQueue.verifyOperationInProgress(),ue(ia,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Jx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function cA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await SC(n);ue(ia,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>rA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>rA(e.remoteStore,s)),n._onlineComponents=e}async function SC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(ia,"Using user provided OfflineComponentProvider");try{await Hy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;rd("Error using user provided cache. Falling back to memory cache: "+t),await Hy(n,new yd)}}else ue(ia,"Using default OfflineComponentProvider"),await Hy(n,new e9(void 0));return n._offlineComponents}async function AC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(ia,"Using user provided OnlineComponentProvider"),await cA(n,n._uninitializedComponentsProvider._online)):(ue(ia,"Using default OnlineComponentProvider"),await cA(n,new vm))),n._onlineComponents}function IC(n){return SC(n).then(e=>e.localStore)}function r9(n){return AC(n).then(e=>e.syncEngine)}async function RC(n){const e=await AC(n),t=e.eventManager;return t.onListen=zj.bind(null,e.syncEngine),t.onUnlisten=Gj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$j.bind(null,e.syncEngine),t}function i9(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,c){try{const d=await function(m,y){const v=Me(m);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,y))}(s,o);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ge(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Md(d,`Failed to get document '${o} from cache`);c.reject(f)}}(await IC(n),e,t)),t.promise}function s9(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,d,f,m){const y=new TC({next:w=>{y.su(),c.enqueueAndForget(()=>dC(o,v));const b=w.docs.has(d);!b&&w.fromCache?m.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&f&&f.source==="server"?m.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),v=new fC(qm(d.path),y,{includeMetadataChanges:!0,Ta:!0});return uC(o,v)}(await RC(n),n.asyncQueue,e,t,r)),r.promise}function a9(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,c){try{const d=await jv(s,o,!0),f=new pC(o,d.gs),m=f.Sa(d.documents),y=f.applyChanges(m,!1);c.resolve(y.snapshot)}catch(d){const f=Md(d,`Failed to execute query '${o} against cache`);c.reject(f)}}(await IC(n),e,t)),t.promise}function o9(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,d,f,m){const y=new TC({next:w=>{y.su(),c.enqueueAndForget(()=>dC(o,v)),w.fromCache&&f.source==="server"?m.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),v=new fC(d,y,{includeMetadataChanges:!0,Ta:!0});return uC(o,v)}(await RC(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n,e,t){if(!t)throw new ge(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function l9(n,e,t,r){if(e===!0&&r===!0)throw new ge(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dA(n){if(!_e.isDocumentKey(n))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fA(n){if(_e.isDocumentKey(n))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie()}function Qn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jm(n);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9="firestore.googleapis.com",hA=!0;class mA{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c9,this.ssl=hA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hA;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Gx)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uw{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZL;switch(r.type){case"firstParty":return new t4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=uA.get(t);r&&(ue("ComponentProvider","Removing Datastore"),uA.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class ea extends Ji{constructor(e,t,r){super(e,t,qm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new _e(e))}withConverter(e){return new ea(this.firestore,e,this._path)}}function Cr(n,e,...t){if(n=kt(n),CC("collection","path",e),n instanceof uw){const r=at.fromString(e,...t);return fA(r),new ea(n,null,r)}{if(!(n instanceof gn||n instanceof ea))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return fA(r),new ea(n.firestore,null,r)}}function Pn(n,e,...t){if(n=kt(n),arguments.length===1&&(e=NR.newId()),CC("doc","path",e),n instanceof uw){const r=at.fromString(e,...t);return dA(r),new gn(n,null,new _e(r))}{if(!(n instanceof gn||n instanceof ea))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return dA(r),new gn(n.firestore,n instanceof ea?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="AsyncQueue";class gA{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new nC(this,"async_queue_retry"),this.bu=()=>{const r=zh();r&&ue(pA,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new pr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!da(e))throw e;ue(pA,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw An("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=aw.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ie()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=-1;class ha extends uw{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new gA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gA(e),this._firestoreClient=void 0,await e}}}function d9(n,e,t){t||(t=om);const r=Po(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),o=r.getOptions(t);if(oi(o,e))return s;throw new ge(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ge(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Gx)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function kd(n){if(n._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||f9(n),n._firestoreClient}function f9(n){var e,t,r;const s=n._freezeSettings(),o=function(d,f,m,y){return new U4(d,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,xC(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new n9(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(Lt.fromBase64String(e))}catch(t){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=/^__.*__$/;class m9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new vc(e,this.data,t,this.fieldTransforms)}}class NC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class tp{constructor(e,t,r,s,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new tp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return _m(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(DC(this.Lu)&&h9.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class p9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xm(e)}ju(e,t,r,s=!1){return new tp({Lu:e,methodName:t,zu:r,path:Tt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function np(n){const e=n._freezeSettings(),t=Xm(n._databaseId);return new p9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PC(n,e,t,r,s,o={}){const c=n.ju(o.merge||o.mergeFields?2:0,e,t,s);pw("Data must be an object, but it was:",c,r);const d=MC(r,c);let f,m;if(o.merge)f=new On(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const w=qv(e,v,t);if(!c.contains(w))throw new ge(re.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);kC(y,w)||y.push(w)}f=new On(y),m=c.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,m=c.fieldTransforms;return new m9(new hn(d),f,m)}class rp extends Ld{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rp}}function OC(n,e,t){return new tp({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hw extends Ld{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=OC(this,e,!0),r=this.Hu.map(o=>ko(o,t)),s=new wo(r);return new z_(e.path,s)}isEqual(e){return e instanceof hw&&oi(this.Hu,e.Hu)}}class mw extends Ld{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=OC(this,e,!0),r=this.Hu.map(o=>ko(o,t)),s=new Eo(r);return new z_(e.path,s)}isEqual(e){return e instanceof mw&&oi(this.Hu,e.Hu)}}function g9(n,e,t,r){const s=n.ju(1,e,t);pw("Data must be an object, but it was:",s,r);const o=[],c=hn.empty();fa(r,(f,m)=>{const y=gw(e,f,t);m=kt(m);const v=s.Ku(y);if(m instanceof rp)o.push(y);else{const w=ko(m,v);w!=null&&(o.push(y),c.set(y,w))}});const d=new On(o);return new NC(c,d,s.fieldTransforms)}function y9(n,e,t,r,s,o){const c=n.ju(1,e,t),d=[qv(e,r,t)],f=[s];if(o.length%2!=0)throw new ge(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)d.push(qv(e,o[w])),f.push(o[w+1]);const m=[],y=hn.empty();for(let w=d.length-1;w>=0;--w)if(!kC(m,d[w])){const b=d[w];let A=f[w];A=kt(A);const I=c.Ku(b);if(A instanceof rp)m.push(b);else{const x=ko(A,I);x!=null&&(m.push(b),y.set(b,x))}}const v=new On(m);return new NC(y,v,c.fieldTransforms)}function v9(n,e,t,r=!1){return ko(t,n.ju(r?4:3,e))}function ko(n,e){if(VC(n=kt(n)))return pw("Unsupported field value:",e,n),MC(n,e);if(n instanceof Ld)return function(r,s){if(!DC(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let c=0;for(const d of r){let f=ko(d,s.Uu(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=it.fromDate(r);return{timestampValue:ic(s.serializer,o)}}if(r instanceof it){const o=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ic(s.serializer,o)}}if(r instanceof dw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ac)return{bytesValue:Ax(s.serializer,r._byteString)};if(r instanceof gn){const o=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw s.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Y_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fw)return function(c,d){return{mapValue:{fields:{[U_]:{stringValue:j_},[ec]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.Wu("VectorValues must only contain numeric values.");return F_(d.serializer,m)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Jm(r)}`)}(n,e)}function MC(n,e){const t={};return GR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(n,(r,s)=>{const o=ko(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function VC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof dw||n instanceof ac||n instanceof gn||n instanceof Ld||n instanceof fw)}function pw(n,e,t){if(!VC(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Jm(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function qv(n,e,t){if((e=kt(e))instanceof ep)return e._internalPath;if(typeof e=="string")return gw(n,e);throw _m("Field path arguments must be of type string or ",n,!1,void 0,t)}const _9=new RegExp("[~\\*/\\[\\]]");function gw(n,e,t){if(e.search(_9)>=0)throw _m(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ep(...e.split("."))._internalPath}catch{throw _m(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _m(n,e,t,r,s){const o=r&&!r.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${r}`),c&&(f+=` in document ${s}`),f+=")"),new ge(re.INVALID_ARGUMENT,d+n+f)}function kC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new w9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ip("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class w9 extends LC{data(){return super.data()}}function ip(n,e){return typeof e=="string"?gw(n,e):e instanceof ep?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yw{}class vw extends yw{}function Qs(n,e,...t){let r=[];e instanceof yw&&r.push(e),r=r.concat(t),function(o){const c=o.filter(f=>f instanceof _w).length,d=o.filter(f=>f instanceof sp).length;if(c>1||c>0&&d>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class sp extends vw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new sp(e,t,r)}_apply(e){const t=this._parse(e);return UC(e._query,t),new Ji(e.firestore,e.converter,Nv(e._query,t))}_parse(e){const t=np(e.firestore);return function(o,c,d,f,m,y,v){let w;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){_A(v,y);const A=[];for(const I of v)A.push(vA(f,o,I));w={arrayValue:{values:A}}}else w=vA(f,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||_A(v,y),w=v9(d,c,v,y==="in"||y==="not-in");return Ye.create(m,y,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function xr(n,e,t){const r=e,s=ip("where",n);return sp._create(s,r,t)}class _w extends yw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _w(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ot.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let c=s;const d=o.getFlattenedFilters();for(const f of d)UC(c,f),c=Nv(c,f)}(e._query,t),new Ji(e.firestore,e.converter,Nv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ww extends vw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ww(e,t)}_apply(e){const t=function(s,o,c){if(s.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new md(o,c)}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(s,o){const c=s.explicitOrderBy.concat([o]);return new yc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function yA(n,e="asc"){const t=e,r=ip("orderBy",n);return ww._create(r,t)}class Ew extends vw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ew(e,t,r)}_apply(e){return new Ji(e.firestore,e.converter,um(e._query,this._limit,this._limitType))}}function b9(n){return Ew._create("limit",n,"F")}function vA(n,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lx(e)&&t.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(at.fromString(t));if(!_e.isDocumentKey(r))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fd(n,new _e(r))}if(t instanceof gn)return fd(n,t._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jm(t)}.`)}function _A(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UC(n,e){const t=function(s,o){for(const c of s)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class T9{convertValue(e,t="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fa(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[ec].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>pt(c.doubleValue));return new fw(o)}convertGeoPoint(e){return new dw(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Fm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ud(e));default:return null}}convertTimestamp(e){const t=Ki(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=at.fromString(e);xe(Vx(r));const s=new vo(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return s.isEqual(t)||An(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bw extends LC{constructor(e,t,r,s,o,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ip("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qh extends bw{data(e={}){return super.data(e)}}class BC{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Fl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qh(this._firestore,this._userDataWriter,r.key,r,new Fl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(d=>{const f=new qh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Fl(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>o||d.type!==3).map(d=>{const f=new qh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Fl(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:S9(d.type),doc:f,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function S9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(n){n=Qn(n,gn);const e=Qn(n.firestore,ha);return s9(kd(e),n._key).then(t=>R9(e,n,t))}class ap extends T9{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function A9(n){n=Qn(n,gn);const e=Qn(n.firestore,ha),t=kd(e),r=new ap(e);return i9(t,n._key).then(s=>new bw(e,r,n._key,s,new Fl(s!==null&&s.hasLocalMutations,!0),n.converter))}function co(n){n=Qn(n,Ji);const e=Qn(n.firestore,ha),t=kd(e),r=new ap(e);return E9(n._query),o9(t,n._query).then(s=>new BC(e,r,n,s))}function wA(n){n=Qn(n,Ji);const e=Qn(n.firestore,ha),t=kd(e),r=new ap(e);return a9(t,n._query).then(s=>new BC(e,r,n,s))}function wm(n,e,t){n=Qn(n,gn);const r=Qn(n.firestore,ha),s=jC(n.converter,e);return Tw(r,[PC(np(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,In.none())])}function Hh(n,e,t,...r){n=Qn(n,gn);const s=Qn(n.firestore,ha),o=np(s);let c;return c=typeof(e=kt(e))=="string"||e instanceof ep?y9(o,"updateDoc",n._key,e,t,r):g9(o,"updateDoc",n._key,e),Tw(s,[c.toMutation(n._key,In.exists(!0))])}function I9(n,e){const t=Qn(n.firestore,ha),r=Pn(n),s=jC(n.converter,e);return Tw(t,[PC(np(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,In.exists(!1))]).then(()=>r)}function Tw(n,e){return function(r,s){const o=new pr;return r.asyncQueue.enqueueAndForget(async()=>Kj(await r9(r),s,o)),o.promise}(kd(n),e)}function R9(n,e,t){const r=t.docs.get(e._key),s=new ap(n);return new bw(n,s,e._key,r,new Fl(t.hasPendingWrites,t.fromCache),e.converter)}class x9{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=D9(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function C9(n){return new x9(n)}class N9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=vm.provider,this._offlineComponentProvider={build:t=>new t9(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function D9(n){return new N9(void 0)}function P9(...n){return new hw("arrayUnion",n)}function O9(...n){return new mw("arrayRemove",n)}(function(e,t=!0){(function(s){gc=s})(mc),li(new Pr("firestore",(r,{instanceIdentifier:s,options:o})=>{const c=r.getProvider("app").getImmediate(),d=new ha(new JL(r.getProvider("auth-internal")),new n4(c,r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vo(m.options.projectId,y)}(c,s),c);return o=Object.assign({useFetchStreams:t},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),mr(tS,nS,e),mr(tS,nS,"esm2017")})();const FC="@firebase/installations",Sw="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=1e4,qC=`w:${Sw}`,HC="FIS_v2",M9="https://firebaseinstallations.googleapis.com/v1",V9=60*60*1e3,k9="installations",L9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Io=new Do(k9,L9,U9);function GC(n){return n instanceof yr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C({projectId:n}){return`${M9}/projects/${n}/installations`}function KC(n){return{token:n.token,requestStatus:2,expiresIn:B9(n.expiresIn),creationTime:Date.now()}}async function YC(n,e){const r=(await e.json()).error;return Io.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function QC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function j9(n,{refreshToken:e}){const t=QC(n);return t.append("Authorization",F9(e)),t}async function WC(n){const e=await n();return e.status>=500&&e.status<600?n():e}function B9(n){return Number(n.replace("s","000"))}function F9(n){return`${HC} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z9({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=$C(n),s=QC(n),o=e.getImmediate({optional:!0});if(o){const m=await o.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const c={fid:t,authVersion:HC,appId:n.appId,sdkVersion:qC},d={method:"POST",headers:s,body:JSON.stringify(c)},f=await WC(()=>fetch(r,d));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:KC(m.authToken)}}else throw await YC("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=/^[cdef][\w-]{21}$/,Hv="";function G9(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=$9(n);return H9.test(t)?t:Hv}catch{return Hv}}function $9(n){return q9(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new Map;function JC(n,e){const t=op(n);e1(t,e),K9(t,e)}function e1(n,e){const t=ZC.get(n);if(t)for(const r of t)r(e)}function K9(n,e){const t=Y9();t&&t.postMessage({key:n,fid:e}),Q9()}let uo=null;function Y9(){return!uo&&"BroadcastChannel"in self&&(uo=new BroadcastChannel("[Firebase] FID Change"),uo.onmessage=n=>{e1(n.data.key,n.data.fid)}),uo}function Q9(){ZC.size===0&&uo&&(uo.close(),uo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9="firebase-installations-database",X9=1,Ro="firebase-installations-store";let Gy=null;function Aw(){return Gy||(Gy=UI(W9,X9,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ro)}}})),Gy}async function Em(n,e){const t=op(n),s=(await Aw()).transaction(Ro,"readwrite"),o=s.objectStore(Ro),c=await o.get(t);return await o.put(e,t),await s.done,(!c||c.fid!==e.fid)&&JC(n,e.fid),e}async function t1(n){const e=op(n),r=(await Aw()).transaction(Ro,"readwrite");await r.objectStore(Ro).delete(e),await r.done}async function lp(n,e){const t=op(n),s=(await Aw()).transaction(Ro,"readwrite"),o=s.objectStore(Ro),c=await o.get(t),d=e(c);return d===void 0?await o.delete(t):await o.put(d,t),await s.done,d&&(!c||c.fid!==d.fid)&&JC(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(n){let e;const t=await lp(n.appConfig,r=>{const s=Z9(r),o=J9(n,s);return e=o.registrationPromise,o.installationEntry});return t.fid===Hv?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Z9(n){const e=n||{fid:G9(),registrationStatus:0};return n1(e)}function J9(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Io.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=e6(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:t6(n)}:{installationEntry:e}}async function e6(n,e){try{const t=await z9(n,e);return Em(n.appConfig,t)}catch(t){throw GC(t)&&t.customData.serverCode===409?await t1(n.appConfig):await Em(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function t6(n){let e=await EA(n.appConfig);for(;e.registrationStatus===1;)await XC(100),e=await EA(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Iw(n);return r||t}return e}function EA(n){return lp(n,e=>{if(!e)throw Io.create("installation-not-found");return n1(e)})}function n1(n){return n6(n)?{fid:n.fid,registrationStatus:0}:n}function n6(n){return n.registrationStatus===1&&n.registrationTime+zC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r6({appConfig:n,heartbeatServiceProvider:e},t){const r=i6(n,t),s=j9(n,t),o=e.getImmediate({optional:!0});if(o){const m=await o.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const c={installation:{sdkVersion:qC,appId:n.appId}},d={method:"POST",headers:s,body:JSON.stringify(c)},f=await WC(()=>fetch(r,d));if(f.ok){const m=await f.json();return KC(m)}else throw await YC("Generate Auth Token",f)}function i6(n,{fid:e}){return`${$C(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rw(n,e=!1){let t;const r=await lp(n.appConfig,o=>{if(!r1(o))throw Io.create("not-registered");const c=o.authToken;if(!e&&o6(c))return o;if(c.requestStatus===1)return t=s6(n,e),o;{if(!navigator.onLine)throw Io.create("app-offline");const d=c6(o);return t=a6(n,d),d}});return t?await t:r.authToken}async function s6(n,e){let t=await bA(n.appConfig);for(;t.authToken.requestStatus===1;)await XC(100),t=await bA(n.appConfig);const r=t.authToken;return r.requestStatus===0?Rw(n,e):r}function bA(n){return lp(n,e=>{if(!r1(e))throw Io.create("not-registered");const t=e.authToken;return u6(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function a6(n,e){try{const t=await r6(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Em(n.appConfig,r),t}catch(t){if(GC(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await t1(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Em(n.appConfig,r)}throw t}}function r1(n){return n!==void 0&&n.registrationStatus===2}function o6(n){return n.requestStatus===2&&!l6(n)}function l6(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+V9}function c6(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function u6(n){return n.requestStatus===1&&n.requestTime+zC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(n){const e=n,{installationEntry:t,registrationPromise:r}=await Iw(e);return r?r.catch(console.error):Rw(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(n,e=!1){const t=n;return await h6(t),(await Rw(t,e)).token}async function h6(n){const{registrationPromise:e}=await Iw(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(n){if(!n||!n.options)throw $y("App Configuration");if(!n.name)throw $y("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw $y(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function $y(n){return Io.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="installations",p6="installations-internal",g6=n=>{const e=n.getProvider("app").getImmediate(),t=m6(e),r=Po(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},y6=n=>{const e=n.getProvider("app").getImmediate(),t=Po(e,i1).getImmediate();return{getId:()=>d6(t),getToken:s=>f6(t,s)}};function v6(){li(new Pr(i1,g6,"PUBLIC")),li(new Pr(p6,y6,"PRIVATE"))}v6();mr(FC,Sw);mr(FC,Sw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="analytics",_6="firebase_id",w6="origin",E6=60*1e3,b6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new Pm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$n=new Do("analytics","Analytics",T6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(n){if(!n.startsWith(xw)){const e=$n.create("invalid-gtag-resource",{gtagURL:n});return Mn.warn(e.message),""}return n}function s1(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function A6(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function I6(n,e){const t=A6("firebase-js-sdk-policy",{createScriptURL:S6}),r=document.createElement("script"),s=`${xw}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function R6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function x6(n,e,t,r,s,o){const c=r[s];try{if(c)await e[c];else{const f=(await s1(t)).find(m=>m.measurementId===s);f&&await e[f.appId]}}catch(d){Mn.error(d)}n("config",s,o)}async function C6(n,e,t,r,s){try{let o=[];if(s&&s.send_to){let c=s.send_to;Array.isArray(c)||(c=[c]);const d=await s1(t);for(const f of c){const m=d.find(v=>v.measurementId===f),y=m&&e[m.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,s||{})}catch(o){Mn.error(o)}}function N6(n,e,t,r){async function s(o,...c){try{if(o==="event"){const[d,f]=c;await C6(n,e,t,d,f)}else if(o==="config"){const[d,f]=c;await x6(n,e,t,r,d,f)}else if(o==="consent"){const[d,f]=c;n("consent",d,f)}else if(o==="get"){const[d,f,m]=c;n("get",d,f,m)}else if(o==="set"){const[d]=c;n("set",d)}else n(o,...c)}catch(d){Mn.error(d)}}return s}function D6(n,e,t,r,s){let o=function(...c){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=N6(o,n,e,t),{gtagCore:o,wrappedGtag:window[s]}}function P6(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(xw)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=30,M6=1e3;class V6{constructor(e={},t=M6){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const a1=new V6;function k6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function L6(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:k6(r)},o=b6.replace("{app-id}",t),c=await fetch(o,s);if(c.status!==200&&c.status!==304){let d="";try{const f=await c.json();!((e=f.error)===null||e===void 0)&&e.message&&(d=f.error.message)}catch{}throw $n.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function U6(n,e=a1,t){const{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw $n.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw $n.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new F6;return setTimeout(async()=>{d.abort()},E6),o1({appId:r,apiKey:s,measurementId:o},c,d,e)}async function o1(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=a1){var o;const{appId:c,measurementId:d}=n;try{await j6(r,e)}catch(f){if(d)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:c,measurementId:d};throw f}try{const f=await L6(n);return s.deleteThrottleMetadata(c),f}catch(f){const m=f;if(!B6(m)){if(s.deleteThrottleMetadata(c),d)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:c,measurementId:d};throw f}const y=Number((o=m==null?void 0:m.customData)===null||o===void 0?void 0:o.httpStatus)===503?IT(t,s.intervalMillis,O6):IT(t,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return s.setThrottleMetadata(c,v),Mn.debug(`Calling attemptFetch again in ${y} millis`),o1(n,v,r,s)}}function j6(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(o),r($n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function B6(n){if(!(n instanceof yr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class F6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function z6(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const o=await e,c=Object.assign(Object.assign({},r),{send_to:o});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q6(){if(w_())try{await VI()}catch(n){return Mn.warn($n.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Mn.warn($n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function H6(n,e,t,r,s,o,c){var d;const f=U6(n);f.then(b=>{t[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>Mn.error(b)),e.push(f);const m=q6().then(b=>{if(b)return r.getId()}),[y,v]=await Promise.all([f,m]);P6(o)||I6(o,y.measurementId),s("js",new Date);const w=(d=c==null?void 0:c.config)!==null&&d!==void 0?d:{};return w[w6]="firebase",w.update=!0,v!=null&&(w[_6]=v),s("config",y.measurementId,w),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e){this.app=e}_delete(){return delete Zu[this.app.options.appId],Promise.resolve()}}let Zu={},TA=[];const SA={};let Ky="dataLayer",$6="gtag",AA,l1,IA=!1;function K6(){const n=[];if(OI()&&n.push("This is a browser extension environment."),yM()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=$n.create("invalid-analytics-context",{errorInfo:e});Mn.warn(t.message)}}function Y6(n,e,t){K6();const r=n.options.appId;if(!r)throw $n.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $n.create("no-api-key");if(Zu[r]!=null)throw $n.create("already-exists",{id:r});if(!IA){R6(Ky);const{wrappedGtag:o,gtagCore:c}=D6(Zu,TA,SA,Ky,$6);l1=o,AA=c,IA=!0}return Zu[r]=H6(n,TA,SA,e,AA,Ky,t),new G6(n)}function Q6(n=BI()){n=kt(n);const e=Po(n,bm);return e.isInitialized()?e.getImmediate():W6(n)}function W6(n,e={}){const t=Po(n,bm);if(t.isInitialized()){const s=t.getImmediate();if(oi(e,t.getOptions()))return s;throw $n.create("already-initialized")}return t.initialize({options:e})}function X6(n,e,t,r){n=kt(n),z6(l1,Zu[n.app.options.appId],e,t,r).catch(s=>Mn.error(s))}const RA="@firebase/analytics",xA="0.10.12";function Z6(){li(new Pr(bm,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Y6(r,s,t)},"PUBLIC")),li(new Pr("analytics-internal",n,"PRIVATE")),mr(RA,xA),mr(RA,xA,"esm2017");function n(e){try{const t=e.getProvider(bm).getImmediate();return{logEvent:(r,s,o)=>X6(t,r,s,o)}}catch(t){throw $n.create("interop-component-reg-failed",{reason:t})}}}Z6();var J6="firebase",eB="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(J6,eB,"app");const tB={apiKey:"AIzaSyDHs8YUxFv8NmJKw0i66FwZC0rxleYNCps",authDomain:"rm-expense-tracker-acb95.firebaseapp.com",projectId:"rm-expense-tracker-acb95",storageBucket:"rm-expense-tracker-acb95.firebasestorage.app",messagingSenderId:"527810663288",appId:"1:527810663288:web:b82b9b318ce4c443932e8d",measurementId:"G-19N7V7HTBW"},Cw=jI(tB),vh=QL(Cw),xt=d9(Cw,{localCache:C9({cacheSizeBytes:u9})});Q6(Cw);function cp(){const[n,e]=E.useState(!1),[t,r]=E.useState(null),s=E.useCallback(async(f,m)=>{try{e(!0),r(null);const y=it.now();await wm(Pn(xt,"users",f),{...m,id:f,createdAt:y,updatedAt:y})}catch(y){throw r(y instanceof Error?y:new Error("Failed to create user profile")),y}finally{e(!1)}},[]),o=E.useCallback(async f=>{try{e(!0),r(null);const m=Pn(xt,"users",f);try{const w=await A9(m);if(w.exists()){const b=w.data();return{...b,id:w.id,createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate()}}}catch(w){console.log("Cache miss for user profile, fetching from server:",w)}const y=await $l(m);if(!y.exists())return null;const v=y.data();return{...v,id:y.id,createdAt:v.createdAt.toDate(),updatedAt:v.updatedAt.toDate()}}catch(m){throw r(m instanceof Error?m:new Error("Failed to get user profile")),m}finally{e(!1)}},[]),c=E.useCallback(async()=>{try{e(!0),r(null);const f=Qs(Cr(xt,"users"));try{const y=await wA(f);if(!y.empty)return y.docs.map(v=>{const w=v.data();return{...w,id:v.id,createdAt:w.createdAt.toDate(),updatedAt:w.updatedAt.toDate()}})}catch(y){console.log("Cache miss for all users, fetching from server:",y)}return(await co(f)).docs.map(y=>{const v=y.data();return{...v,id:y.id,createdAt:v.createdAt.toDate(),updatedAt:v.updatedAt.toDate()}})}catch(f){throw r(f instanceof Error?f:new Error("Failed to get users")),f}finally{e(!1)}},[]),d=E.useCallback(async f=>{try{e(!0),r(null);const m=Qs(Cr(xt,"users"),xr("email",">=",f),xr("email","<=",f+""));try{const v=await wA(m);if(!v.empty)return v.docs.map(w=>{const b=w.data();return{...b,id:w.id,createdAt:b.createdAt.toDate(),updatedAt:b.updatedAt.toDate()}})}catch(v){console.log("Cache miss for user search, fetching from server:",v)}return(await co(m)).docs.map(v=>{const w=v.data();return{...w,id:v.id,createdAt:w.createdAt.toDate(),updatedAt:w.updatedAt.toDate()}})}catch(m){throw r(m instanceof Error?m:new Error("Failed to search users")),m}finally{e(!1)}},[]);return{loading:n,error:t,createUserProfile:s,getUserProfile:o,getAllUsers:c,searchUsers:d}}async function nB(n,e,t,r){const s=await Ok(n,e,t),o=it.now(),c=s.user.uid,d={id:c,uid:c,email:s.user.email||"",createdAt:o,updatedAt:o,displayName:r||null};return await wm(Pn(xt,"users",c),d),s}async function rB(n,e,t){return Mk(n,e,t)}async function iB(n){return Uk(n)}const c1=E.createContext(null),ma=()=>{const n=E.useContext(c1);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},sB=({children:n})=>{const[e,t]=E.useState(null),[r,s]=E.useState(!0),[o,c]=E.useState(null),{getUserProfile:d}=cp();E.useEffect(()=>Lk(vh,async b=>{if(console.log("Auth state changed:",b?"User logged in":"No user"),b)try{const A=await d(b.uid);A&&t({...A,uid:A.id})}catch(A){console.error("Error fetching user profile:",A),c(A)}else t(null);s(!1)}),[d]);const v={user:e,loading:r,error:o,signIn:async(w,b)=>{try{c(null),await rB(vh,w,b)}catch(A){throw console.error("Sign in error:",A),c(A),A}},signUp:async(w,b,A)=>{try{c(null),await nB(vh,w,b,A)}catch(I){throw console.error("Sign up error:",I),c(I),I}},signOut:async()=>{try{c(null),await iB(vh)}catch(w){throw console.error("Sign out error:",w),c(w),w}}};return R.jsx(c1.Provider,{value:v,children:n})};function Yy({children:n}){const{user:e,loading:t}=ma();return t?R.jsx("div",{className:"flex min-h-screen items-center justify-center",children:R.jsx("div",{className:"text-muted-foreground",children:"Loading..."})}):e?R.jsx(R.Fragment,{children:n}):R.jsx(EI,{to:"/login"})}function je(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function CA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function u1(...n){return e=>{let t=!1;const r=n.map(s=>{const o=CA(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():CA(n[s],null)}}}}function vt(...n){return E.useCallback(u1(...n),n)}function pa(n,e=[]){let t=[];function r(o,c){const d=E.createContext(c),f=t.length;t=[...t,c];const m=v=>{var C;const{scope:w,children:b,...A}=v,I=((C=w==null?void 0:w[n])==null?void 0:C[f])||d,x=E.useMemo(()=>A,Object.values(A));return R.jsx(I.Provider,{value:x,children:b})};m.displayName=o+"Provider";function y(v,w){var I;const b=((I=w==null?void 0:w[n])==null?void 0:I[f])||d,A=E.useContext(b);if(A)return A;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${o}\``)}return[m,y]}const s=()=>{const o=t.map(c=>E.createContext(c));return function(d){const f=(d==null?void 0:d[n])||o;return E.useMemo(()=>({[`__scope${n}`]:{...d,[n]:f}}),[d,f])}};return s.scopeName=n,[r,aB(s,...e)]}function aB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const c=r.reduce((d,{useScope:f,scopeName:m})=>{const v=f(o)[`__scope${m}`];return{...d,...v}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var oc=E.forwardRef((n,e)=>{const{children:t,...r}=n,s=E.Children.toArray(t),o=s.find(lB);if(o){const c=o.props.children,d=s.map(f=>f===o?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:f);return R.jsx(Gv,{...r,ref:e,children:E.isValidElement(c)?E.cloneElement(c,void 0,d):null})}return R.jsx(Gv,{...r,ref:e,children:t})});oc.displayName="Slot";var Gv=E.forwardRef((n,e)=>{const{children:t,...r}=n;if(E.isValidElement(t)){const s=uB(t),o=cB(r,t.props);return t.type!==E.Fragment&&(o.ref=e?u1(e,s):s),E.cloneElement(t,o)}return E.Children.count(t)>1?E.Children.only(null):null});Gv.displayName="SlotClone";var oB=({children:n})=>R.jsx(R.Fragment,{children:n});function lB(n){return E.isValidElement(n)&&n.type===oB}function cB(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...d)=>{o(...d),s(...d)}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function uB(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Nw(n){const e=n+"CollectionProvider",[t,r]=pa(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:A,children:I}=b,x=Fs.useRef(null),C=Fs.useRef(new Map).current;return R.jsx(s,{scope:A,itemMap:C,collectionRef:x,children:I})};c.displayName=e;const d=n+"CollectionSlot",f=Fs.forwardRef((b,A)=>{const{scope:I,children:x}=b,C=o(d,I),M=vt(A,C.collectionRef);return R.jsx(oc,{ref:M,children:x})});f.displayName=d;const m=n+"CollectionItemSlot",y="data-radix-collection-item",v=Fs.forwardRef((b,A)=>{const{scope:I,children:x,...C}=b,M=Fs.useRef(null),k=vt(A,M),$=o(m,I);return Fs.useEffect(()=>($.itemMap.set(M,{ref:M,...C}),()=>void $.itemMap.delete(M))),R.jsx(oc,{[y]:"",ref:k,children:x})});v.displayName=m;function w(b){const A=o(n+"CollectionConsumer",b);return Fs.useCallback(()=>{const x=A.collectionRef.current;if(!x)return[];const C=Array.from(x.querySelectorAll(`[${y}]`));return Array.from(A.itemMap.values()).sort(($,G)=>C.indexOf($.ref.current)-C.indexOf(G.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:c,Slot:f,ItemSlot:v},w,r]}var dB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],et=dB.reduce((n,e)=>{const t=E.forwardRef((r,s)=>{const{asChild:o,...c}=r,d=o?oc:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),R.jsx(d,{...c,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function d1(n,e){n&&hc.flushSync(()=>n.dispatchEvent(e))}function Vn(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function fB(n,e=globalThis==null?void 0:globalThis.document){const t=Vn(n);E.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var hB="DismissableLayer",$v="dismissableLayer.update",mB="dismissableLayer.pointerDownOutside",pB="dismissableLayer.focusOutside",NA,f1=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Dw=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:c,onDismiss:d,...f}=n,m=E.useContext(f1),[y,v]=E.useState(null),w=(y==null?void 0:y.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),A=vt(e,V=>v(V)),I=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),C=I.indexOf(x),M=y?I.indexOf(y):-1,k=m.layersWithOutsidePointerEventsDisabled.size>0,$=M>=C,G=yB(V=>{const P=V.target,D=[...m.branches].some(U=>U.contains(P));!$||D||(s==null||s(V),c==null||c(V),V.defaultPrevented||d==null||d())},w),Y=vB(V=>{const P=V.target;[...m.branches].some(U=>U.contains(P))||(o==null||o(V),c==null||c(V),V.defaultPrevented||d==null||d())},w);return fB(V=>{M===m.layers.size-1&&(r==null||r(V),!V.defaultPrevented&&d&&(V.preventDefault(),d()))},w),E.useEffect(()=>{if(y)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(NA=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(y)),m.layers.add(y),DA(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=NA)}},[y,w,t,m]),E.useEffect(()=>()=>{y&&(m.layers.delete(y),m.layersWithOutsidePointerEventsDisabled.delete(y),DA())},[y,m]),E.useEffect(()=>{const V=()=>b({});return document.addEventListener($v,V),()=>document.removeEventListener($v,V)},[]),R.jsx(et.div,{...f,ref:A,style:{pointerEvents:k?$?"auto":"none":void 0,...n.style},onFocusCapture:je(n.onFocusCapture,Y.onFocusCapture),onBlurCapture:je(n.onBlurCapture,Y.onBlurCapture),onPointerDownCapture:je(n.onPointerDownCapture,G.onPointerDownCapture)})});Dw.displayName=hB;var gB="DismissableLayerBranch",h1=E.forwardRef((n,e)=>{const t=E.useContext(f1),r=E.useRef(null),s=vt(e,r);return E.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),R.jsx(et.div,{...n,ref:s})});h1.displayName=gB;function yB(n,e=globalThis==null?void 0:globalThis.document){const t=Vn(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const o=d=>{if(d.target&&!r.current){let f=function(){m1(mB,t,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=f,e.addEventListener("click",s.current,{once:!0})):f()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function vB(n,e=globalThis==null?void 0:globalThis.document){const t=Vn(n),r=E.useRef(!1);return E.useEffect(()=>{const s=o=>{o.target&&!r.current&&m1(pB,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function DA(){const n=new CustomEvent($v);document.dispatchEvent(n)}function m1(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?d1(s,o):s.dispatchEvent(o)}var _B=Dw,wB=h1,yn=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},EB="Portal",Pw=E.forwardRef((n,e)=>{var d;const{container:t,...r}=n,[s,o]=E.useState(!1);yn(()=>o(!0),[]);const c=t||s&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?tM.createPortal(R.jsx(et.div,{...r,ref:e}),c):null});Pw.displayName=EB;function bB(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var Ow=n=>{const{present:e,children:t}=n,r=TB(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),o=vt(r.ref,SB(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:o}):null};Ow.displayName="Presence";function TB(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),o=E.useRef("none"),c=n?"mounted":"unmounted",[d,f]=bB(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=_h(r.current);o.current=d==="mounted"?m:"none"},[d]),yn(()=>{const m=r.current,y=s.current;if(y!==n){const w=o.current,b=_h(m);n?f("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?f("UNMOUNT"):f(y&&w!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,f]),yn(()=>{if(e){let m;const y=e.ownerDocument.defaultView??window,v=b=>{const I=_h(r.current).includes(b.animationName);if(b.target===e&&I&&(f("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",m=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},w=b=>{b.target===e&&(o.current=_h(r.current))};return e.addEventListener("animationstart",w),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{y.clearTimeout(m),e.removeEventListener("animationstart",w),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:E.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function _h(n){return(n==null?void 0:n.animationName)||"none"}function SB(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function lc({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=AB({defaultProp:e,onChange:t}),o=n!==void 0,c=o?n:r,d=Vn(t),f=E.useCallback(m=>{if(o){const v=typeof m=="function"?m(n):m;v!==n&&d(v)}else s(m)},[o,n,s,d]);return[c,f]}function AB({defaultProp:n,onChange:e}){const t=E.useState(n),[r]=t,s=E.useRef(r),o=Vn(e);return E.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),t}var IB="VisuallyHidden",up=E.forwardRef((n,e)=>R.jsx(et.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));up.displayName=IB;var Mw="ToastProvider",[Vw,RB,xB]=Nw("Toast"),[p1,A7]=pa("Toast",[xB]),[CB,dp]=p1(Mw),g1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:c}=n,[d,f]=E.useState(null),[m,y]=E.useState(0),v=E.useRef(!1),w=E.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mw}\`. Expected non-empty \`string\`.`),R.jsx(Vw.Provider,{scope:e,children:R.jsx(CB,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:m,viewport:d,onViewportChange:f,onToastAdd:E.useCallback(()=>y(b=>b+1),[]),onToastRemove:E.useCallback(()=>y(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:w,children:c})})};g1.displayName=Mw;var y1="ToastViewport",NB=["F8"],Kv="toast.viewportPause",Yv="toast.viewportResume",v1=E.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=NB,label:s="Notifications ({hotkey})",...o}=n,c=dp(y1,t),d=RB(t),f=E.useRef(null),m=E.useRef(null),y=E.useRef(null),v=E.useRef(null),w=vt(e,v,c.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=c.toastCount>0;E.useEffect(()=>{const x=C=>{var k;r.length!==0&&r.every($=>C[$]||C.code===$)&&((k=v.current)==null||k.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),E.useEffect(()=>{const x=f.current,C=v.current;if(A&&x&&C){const M=()=>{if(!c.isClosePausedRef.current){const Y=new CustomEvent(Kv);C.dispatchEvent(Y),c.isClosePausedRef.current=!0}},k=()=>{if(c.isClosePausedRef.current){const Y=new CustomEvent(Yv);C.dispatchEvent(Y),c.isClosePausedRef.current=!1}},$=Y=>{!x.contains(Y.relatedTarget)&&k()},G=()=>{x.contains(document.activeElement)||k()};return x.addEventListener("focusin",M),x.addEventListener("focusout",$),x.addEventListener("pointermove",M),x.addEventListener("pointerleave",G),window.addEventListener("blur",M),window.addEventListener("focus",k),()=>{x.removeEventListener("focusin",M),x.removeEventListener("focusout",$),x.removeEventListener("pointermove",M),x.removeEventListener("pointerleave",G),window.removeEventListener("blur",M),window.removeEventListener("focus",k)}}},[A,c.isClosePausedRef]);const I=E.useCallback(({tabbingDirection:x})=>{const M=d().map(k=>{const $=k.ref.current,G=[$,...qB($)];return x==="forwards"?G:G.reverse()});return(x==="forwards"?M.reverse():M).flat()},[d]);return E.useEffect(()=>{const x=v.current;if(x){const C=M=>{var G,Y,V;const k=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!k){const P=document.activeElement,D=M.shiftKey;if(M.target===x&&D){(G=m.current)==null||G.focus();return}const z=I({tabbingDirection:D?"backwards":"forwards"}),L=z.findIndex(le=>le===P);Qy(z.slice(L+1))?M.preventDefault():D?(Y=m.current)==null||Y.focus():(V=y.current)==null||V.focus()}};return x.addEventListener("keydown",C),()=>x.removeEventListener("keydown",C)}},[d,I]),R.jsxs(wB,{ref:f,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:A?void 0:"none"},children:[A&&R.jsx(Qv,{ref:m,onFocusFromOutsideViewport:()=>{const x=I({tabbingDirection:"forwards"});Qy(x)}}),R.jsx(Vw.Slot,{scope:t,children:R.jsx(et.ol,{tabIndex:-1,...o,ref:w})}),A&&R.jsx(Qv,{ref:y,onFocusFromOutsideViewport:()=>{const x=I({tabbingDirection:"backwards"});Qy(x)}})]})});v1.displayName=y1;var _1="ToastFocusProxy",Qv=E.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,o=dp(_1,t);return R.jsx(up,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var m;const d=c.relatedTarget;!((m=o.viewport)!=null&&m.contains(d))&&r()}})});Qv.displayName=_1;var fp="Toast",DB="toast.swipeStart",PB="toast.swipeMove",OB="toast.swipeCancel",MB="toast.swipeEnd",w1=E.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:o,...c}=n,[d=!0,f]=lc({prop:r,defaultProp:s,onChange:o});return R.jsx(Ow,{present:t||d,children:R.jsx(LB,{open:d,...c,ref:e,onClose:()=>f(!1),onPause:Vn(n.onPause),onResume:Vn(n.onResume),onSwipeStart:je(n.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:je(n.onSwipeMove,m=>{const{x:y,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${y}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:je(n.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:je(n.onSwipeEnd,m=>{const{x:y,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${y}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),f(!1)})})})});w1.displayName=fp;var[VB,kB]=p1(fp,{onClose(){}}),LB=E.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:o,onClose:c,onEscapeKeyDown:d,onPause:f,onResume:m,onSwipeStart:y,onSwipeMove:v,onSwipeCancel:w,onSwipeEnd:b,...A}=n,I=dp(fp,t),[x,C]=E.useState(null),M=vt(e,le=>C(le)),k=E.useRef(null),$=E.useRef(null),G=s||I.duration,Y=E.useRef(0),V=E.useRef(G),P=E.useRef(0),{onToastAdd:D,onToastRemove:U}=I,B=Vn(()=>{var Ee;(x==null?void 0:x.contains(document.activeElement))&&((Ee=I.viewport)==null||Ee.focus()),c()}),z=E.useCallback(le=>{!le||le===1/0||(window.clearTimeout(P.current),Y.current=new Date().getTime(),P.current=window.setTimeout(B,le))},[B]);E.useEffect(()=>{const le=I.viewport;if(le){const Ee=()=>{z(V.current),m==null||m()},Z=()=>{const de=new Date().getTime()-Y.current;V.current=V.current-de,window.clearTimeout(P.current),f==null||f()};return le.addEventListener(Kv,Z),le.addEventListener(Yv,Ee),()=>{le.removeEventListener(Kv,Z),le.removeEventListener(Yv,Ee)}}},[I.viewport,G,f,m,z]),E.useEffect(()=>{o&&!I.isClosePausedRef.current&&z(G)},[o,G,I.isClosePausedRef,z]),E.useEffect(()=>(D(),()=>U()),[D,U]);const L=E.useMemo(()=>x?R1(x):null,[x]);return I.viewport?R.jsxs(R.Fragment,{children:[L&&R.jsx(UB,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),R.jsx(VB,{scope:t,onClose:B,children:hc.createPortal(R.jsx(Vw.ItemSlot,{scope:t,children:R.jsx(_B,{asChild:!0,onEscapeKeyDown:je(d,()=>{I.isFocusedToastEscapeKeyDownRef.current||B(),I.isFocusedToastEscapeKeyDownRef.current=!1}),children:R.jsx(et.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":I.swipeDirection,...A,ref:M,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:je(n.onKeyDown,le=>{le.key==="Escape"&&(d==null||d(le.nativeEvent),le.nativeEvent.defaultPrevented||(I.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:je(n.onPointerDown,le=>{le.button===0&&(k.current={x:le.clientX,y:le.clientY})}),onPointerMove:je(n.onPointerMove,le=>{if(!k.current)return;const Ee=le.clientX-k.current.x,Z=le.clientY-k.current.y,de=!!$.current,se=["left","right"].includes(I.swipeDirection),ye=["left","up"].includes(I.swipeDirection)?Math.min:Math.max,F=se?ye(0,Ee):0,ae=se?0:ye(0,Z),ve=le.pointerType==="touch"?10:2,he={x:F,y:ae},ee={originalEvent:le,delta:he};de?($.current=he,wh(PB,v,ee,{discrete:!1})):PA(he,I.swipeDirection,ve)?($.current=he,wh(DB,y,ee,{discrete:!1}),le.target.setPointerCapture(le.pointerId)):(Math.abs(Ee)>ve||Math.abs(Z)>ve)&&(k.current=null)}),onPointerUp:je(n.onPointerUp,le=>{const Ee=$.current,Z=le.target;if(Z.hasPointerCapture(le.pointerId)&&Z.releasePointerCapture(le.pointerId),$.current=null,k.current=null,Ee){const de=le.currentTarget,se={originalEvent:le,delta:Ee};PA(Ee,I.swipeDirection,I.swipeThreshold)?wh(MB,b,se,{discrete:!0}):wh(OB,w,se,{discrete:!0}),de.addEventListener("click",ye=>ye.preventDefault(),{once:!0})}})})})}),I.viewport)})]}):null}),UB=n=>{const{__scopeToast:e,children:t,...r}=n,s=dp(fp,e),[o,c]=E.useState(!1),[d,f]=E.useState(!1);return FB(()=>c(!0)),E.useEffect(()=>{const m=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(m)},[]),d?null:R.jsx(Pw,{asChild:!0,children:R.jsx(up,{...r,children:o&&R.jsxs(R.Fragment,{children:[s.label," ",t]})})})},jB="ToastTitle",E1=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return R.jsx(et.div,{...r,ref:e})});E1.displayName=jB;var BB="ToastDescription",b1=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return R.jsx(et.div,{...r,ref:e})});b1.displayName=BB;var T1="ToastAction",S1=E.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?R.jsx(I1,{altText:t,asChild:!0,children:R.jsx(kw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${T1}\`. Expected non-empty \`string\`.`),null)});S1.displayName=T1;var A1="ToastClose",kw=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=kB(A1,t);return R.jsx(I1,{asChild:!0,children:R.jsx(et.button,{type:"button",...r,ref:e,onClick:je(n.onClick,s.onClose)})})});kw.displayName=A1;var I1=E.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return R.jsx(et.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function R1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),zB(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...R1(r))}}),e}function wh(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?d1(s,o):s.dispatchEvent(o)}var PA=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),o=r>s;return e==="left"||e==="right"?o&&r>t:!o&&s>t};function FB(n=()=>{}){const e=Vn(n);yn(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function zB(n){return n.nodeType===n.ELEMENT_NODE}function qB(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Qy(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var HB=g1,x1=v1,C1=w1,N1=E1,D1=b1,P1=S1,O1=kw;function M1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=M1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function V1(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=M1(n))&&(r&&(r+=" "),r+=e);return r}const OA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,MA=V1,Lw=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return MA(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:o}=e,c=Object.keys(s).map(m=>{const y=t==null?void 0:t[m],v=o==null?void 0:o[m];if(y===null)return null;const w=OA(y)||OA(v);return s[m][w]}),d=t&&Object.entries(t).reduce((m,y)=>{let[v,w]=y;return w===void 0||(m[v]=w),m},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,y)=>{let{class:v,className:w,...b}=y;return Object.entries(b).every(A=>{let[I,x]=A;return Array.isArray(x)?x.includes({...o,...d}[I]):{...o,...d}[I]===x})?[...m,v,w]:m},[]);return MA(n,c,f,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $B={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:c,...d},f)=>E.createElement("svg",{ref:f,...$B,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:k1("lucide",s),...d},[...c.map(([m,y])=>E.createElement(m,y)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=(n,e)=>{const t=E.forwardRef(({className:r,...s},o)=>E.createElement(KB,{ref:o,iconNode:e,className:k1(`lucide-${GB(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],QB=hp("Check",YB);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],XB=hp("ChevronDown",WB);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],JB=hp("Circle",ZB);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],tF=hp("X",eF),Uw="-",nF=n=>{const e=iF(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const d=c.split(Uw);return d[0]===""&&d.length!==1&&d.shift(),L1(d,e)||rF(c)},getConflictingClassGroupIds:(c,d)=>{const f=t[c]||[];return d&&r[c]?[...f,...r[c]]:f}}},L1=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?L1(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(Uw);return(c=e.validators.find(({validator:d})=>d(o)))==null?void 0:c.classGroupId},VA=/^\[(.+)\]$/,rF=n=>{if(VA.test(n)){const e=VA.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},iF=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const s in t)Wv(t[s],r,s,e);return r},Wv=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:kA(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(sF(s)){Wv(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,c])=>{Wv(c,kA(e,o),t,r)})})},kA=(n,e)=>{let t=n;return e.split(Uw).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},sF=n=>n.isThemeGetter,aF=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,c)=>{t.set(o,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let c=t.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return s(o,c),c},set(o,c){t.has(o)?t.set(o,c):s(o,c)}}},Xv="!",Zv=":",oF=Zv.length,lF=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const o=[];let c=0,d=0,f=0,m;for(let A=0;A<s.length;A++){let I=s[A];if(c===0&&d===0){if(I===Zv){o.push(s.slice(f,A)),f=A+oF;continue}if(I==="/"){m=A;continue}}I==="["?c++:I==="]"?c--:I==="("?d++:I===")"&&d--}const y=o.length===0?s:s.substring(f),v=cF(y),w=v!==y,b=m&&m>f?m-f:void 0;return{modifiers:o,hasImportantModifier:w,baseClassName:v,maybePostfixModifierPosition:b}};if(e){const s=e+Zv,o=r;r=c=>c.startsWith(s)?o(c.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const s=r;r=o=>t({className:o,parseClassName:s})}return r},cF=n=>n.endsWith(Xv)?n.substring(0,n.length-1):n.startsWith(Xv)?n.substring(1):n,uF=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(c=>{c[0]==="["||e[c]?(s.push(...o.sort(),c),o=[]):o.push(c)}),s.push(...o.sort()),s}},dF=n=>({cache:aF(n.cacheSize),parseClassName:lF(n),sortModifiers:uF(n),...nF(n)}),fF=/\s+/,hF=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,c=[],d=n.trim().split(fF);let f="";for(let m=d.length-1;m>=0;m-=1){const y=d[m],{isExternal:v,modifiers:w,hasImportantModifier:b,baseClassName:A,maybePostfixModifierPosition:I}=t(y);if(v){f=y+(f.length>0?" "+f:f);continue}let x=!!I,C=r(x?A.substring(0,I):A);if(!C){if(!x){f=y+(f.length>0?" "+f:f);continue}if(C=r(A),!C){f=y+(f.length>0?" "+f:f);continue}x=!1}const M=o(w).join(":"),k=b?M+Xv:M,$=k+C;if(c.includes($))continue;c.push($);const G=s(C,x);for(let Y=0;Y<G.length;++Y){const V=G[Y];c.push(k+V)}f=y+(f.length>0?" "+f:f)}return f};function mF(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=U1(e))&&(r&&(r+=" "),r+=t);return r}const U1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=U1(n[r]))&&(t&&(t+=" "),t+=e);return t};function pF(n,...e){let t,r,s,o=c;function c(f){const m=e.reduce((y,v)=>v(y),n());return t=dF(m),r=t.cache.get,s=t.cache.set,o=d,d(f)}function d(f){const m=r(f);if(m)return m;const y=hF(f,t);return s(f,y),y}return function(){return o(mF.apply(null,arguments))}}const en=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},j1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,B1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,gF=/^\d+\/\d+$/,yF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_F=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,EF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dl=n=>gF.test(n),$e=n=>!!n&&!Number.isNaN(Number(n)),Xa=n=>!!n&&Number.isInteger(Number(n)),LA=n=>n.endsWith("%")&&$e(n.slice(0,-1)),Bs=n=>yF.test(n),bF=()=>!0,TF=n=>vF.test(n)&&!_F.test(n),jw=()=>!1,SF=n=>wF.test(n),AF=n=>EF.test(n),IF=n=>!Se(n)&&!Ae(n),RF=n=>wc(n,q1,jw),Se=n=>j1.test(n),Za=n=>wc(n,H1,TF),Wy=n=>wc(n,UF,$e),xF=n=>wc(n,F1,jw),CF=n=>wc(n,z1,AF),NF=n=>wc(n,jw,SF),Ae=n=>B1.test(n),Eh=n=>Ec(n,H1),DF=n=>Ec(n,jF),PF=n=>Ec(n,F1),OF=n=>Ec(n,q1),MF=n=>Ec(n,z1),VF=n=>Ec(n,BF,!0),wc=(n,e,t)=>{const r=j1.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Ec=(n,e,t=!1)=>{const r=B1.exec(n);return r?r[1]?e(r[1]):t:!1},F1=n=>n==="position",kF=new Set(["image","url"]),z1=n=>kF.has(n),LF=new Set(["length","size","percentage"]),q1=n=>LF.has(n),H1=n=>n==="length",UF=n=>n==="number",jF=n=>n==="family-name",BF=n=>n==="shadow",FF=()=>{const n=en("color"),e=en("font"),t=en("text"),r=en("font-weight"),s=en("tracking"),o=en("leading"),c=en("breakpoint"),d=en("container"),f=en("spacing"),m=en("radius"),y=en("shadow"),v=en("inset-shadow"),w=en("drop-shadow"),b=en("blur"),A=en("perspective"),I=en("aspect"),x=en("ease"),C=en("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto","contain","none"],Y=()=>[Ae,Se,f],V=()=>[Dl,"full","auto",...Y()],P=()=>[Xa,"none","subgrid",Ae,Se],D=()=>["auto",{span:["full",Xa,Ae,Se]},Ae,Se],U=()=>[Xa,"auto",Ae,Se],B=()=>["auto","min","max","fr",Ae,Se],z=()=>["start","end","center","between","around","evenly","stretch","baseline"],L=()=>["start","end","center","stretch"],le=()=>["auto",...Y()],Ee=()=>[Dl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Y()],Z=()=>[n,Ae,Se],de=()=>[LA,Za],se=()=>["","none","full",m,Ae,Se],ye=()=>["",$e,Eh,Za],F=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ve=()=>["","none",b,Ae,Se],he=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ae,Se],ee=()=>["none",$e,Ae,Se],fe=()=>["none",$e,Ae,Se],we=()=>[$e,Ae,Se],pe=()=>[Dl,"full",...Y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Bs],breakpoint:[Bs],color:[bF],container:[Bs],"drop-shadow":[Bs],ease:["in","out","in-out"],font:[IF],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Bs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Bs],shadow:[Bs],spacing:["px",$e],text:[Bs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Dl,Se,Ae,I]}],container:["container"],columns:[{columns:[$e,Se,Ae,d]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...k(),Se,Ae]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:V()}],"inset-x":[{"inset-x":V()}],"inset-y":[{"inset-y":V()}],start:[{start:V()}],end:[{end:V()}],top:[{top:V()}],right:[{right:V()}],bottom:[{bottom:V()}],left:[{left:V()}],visibility:["visible","invisible","collapse"],z:[{z:[Xa,"auto",Ae,Se]}],basis:[{basis:[Dl,"full","auto",d,...Y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$e,Dl,"auto","initial","none",Se]}],grow:[{grow:["",$e,Ae,Se]}],shrink:[{shrink:["",$e,Ae,Se]}],order:[{order:[Xa,"first","last","none",Ae,Se]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:Y()}],"gap-x":[{"gap-x":Y()}],"gap-y":[{"gap-y":Y()}],"justify-content":[{justify:[...z(),"normal"]}],"justify-items":[{"justify-items":[...L(),"normal"]}],"justify-self":[{"justify-self":["auto",...L()]}],"align-content":[{content:["normal",...z()]}],"align-items":[{items:[...L(),"baseline"]}],"align-self":[{self:["auto",...L(),"baseline"]}],"place-content":[{"place-content":z()}],"place-items":[{"place-items":[...L(),"baseline"]}],"place-self":[{"place-self":["auto",...L()]}],p:[{p:Y()}],px:[{px:Y()}],py:[{py:Y()}],ps:[{ps:Y()}],pe:[{pe:Y()}],pt:[{pt:Y()}],pr:[{pr:Y()}],pb:[{pb:Y()}],pl:[{pl:Y()}],m:[{m:le()}],mx:[{mx:le()}],my:[{my:le()}],ms:[{ms:le()}],me:[{me:le()}],mt:[{mt:le()}],mr:[{mr:le()}],mb:[{mb:le()}],ml:[{ml:le()}],"space-x":[{"space-x":Y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Y()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ee()}],w:[{w:[d,"screen",...Ee()]}],"min-w":[{"min-w":[d,"screen","none",...Ee()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...Ee()]}],h:[{h:["screen",...Ee()]}],"min-h":[{"min-h":["screen","none",...Ee()]}],"max-h":[{"max-h":["screen",...Ee()]}],"font-size":[{text:["base",t,Eh,Za]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ae,Wy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",LA,Se]}],"font-family":[{font:[DF,Se,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ae,Se]}],"line-clamp":[{"line-clamp":[$e,"none",Ae,Wy]}],leading:[{leading:[o,...Y()]}],"list-image":[{"list-image":["none",Ae,Se]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ae,Se]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:[$e,"from-font","auto",Ae,Za]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[$e,"auto",Ae,Se]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae,Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae,Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...k(),PF,xF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",OF,RF]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xa,Ae,Se],radial:["",Ae,Se],conic:[Xa,Ae,Se]},MF,CF]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:de()}],"gradient-via-pos":[{via:de()}],"gradient-to-pos":[{to:de()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...F(),"hidden","none"]}],"divide-style":[{divide:[...F(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...F(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$e,Ae,Se]}],"outline-w":[{outline:["",$e,Eh,Za]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",y,VF,NF]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",Ae,Se,v]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[$e,Za]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":Z()}],opacity:[{opacity:[$e,Ae,Se]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],filter:[{filter:["","none",Ae,Se]}],blur:[{blur:ve()}],brightness:[{brightness:[$e,Ae,Se]}],contrast:[{contrast:[$e,Ae,Se]}],"drop-shadow":[{"drop-shadow":["","none",w,Ae,Se]}],grayscale:[{grayscale:["",$e,Ae,Se]}],"hue-rotate":[{"hue-rotate":[$e,Ae,Se]}],invert:[{invert:["",$e,Ae,Se]}],saturate:[{saturate:[$e,Ae,Se]}],sepia:[{sepia:["",$e,Ae,Se]}],"backdrop-filter":[{"backdrop-filter":["","none",Ae,Se]}],"backdrop-blur":[{"backdrop-blur":ve()}],"backdrop-brightness":[{"backdrop-brightness":[$e,Ae,Se]}],"backdrop-contrast":[{"backdrop-contrast":[$e,Ae,Se]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$e,Ae,Se]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$e,Ae,Se]}],"backdrop-invert":[{"backdrop-invert":["",$e,Ae,Se]}],"backdrop-opacity":[{"backdrop-opacity":[$e,Ae,Se]}],"backdrop-saturate":[{"backdrop-saturate":[$e,Ae,Se]}],"backdrop-sepia":[{"backdrop-sepia":["",$e,Ae,Se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Y()}],"border-spacing-x":[{"border-spacing-x":Y()}],"border-spacing-y":[{"border-spacing-y":Y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ae,Se]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$e,"initial",Ae,Se]}],ease:[{ease:["linear","initial",x,Ae,Se]}],delay:[{delay:[$e,Ae,Se]}],animate:[{animate:["none",C,Ae,Se]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Ae,Se]}],"perspective-origin":[{"perspective-origin":he()}],rotate:[{rotate:ee()}],"rotate-x":[{"rotate-x":ee()}],"rotate-y":[{"rotate-y":ee()}],"rotate-z":[{"rotate-z":ee()}],scale:[{scale:fe()}],"scale-x":[{"scale-x":fe()}],"scale-y":[{"scale-y":fe()}],"scale-z":[{"scale-z":fe()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[Ae,Se,"","none","gpu","cpu"]}],"transform-origin":[{origin:he()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pe()}],"translate-x":[{"translate-x":pe()}],"translate-y":[{"translate-y":pe()}],"translate-z":[{"translate-z":pe()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae,Se]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae,Se]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[$e,Eh,Za,Wy]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},zF=pF(FF);function _t(...n){return zF(V1(n))}const qF=HB,G1=E.forwardRef(({className:n,...e},t)=>R.jsx(x1,{ref:t,className:_t("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));G1.displayName=x1.displayName;const HF=Lw("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),$1=E.forwardRef(({className:n,variant:e,...t},r)=>R.jsx(C1,{ref:r,className:_t(HF({variant:e}),n),...t}));$1.displayName=C1.displayName;const GF=E.forwardRef(({className:n,...e},t)=>R.jsx(P1,{ref:t,className:_t("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));GF.displayName=P1.displayName;const $F=E.forwardRef(({className:n,...e},t)=>R.jsx(O1,{ref:t,className:_t("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:R.jsx(tF,{className:"h-4 w-4"})}));$F.displayName=O1.displayName;const K1=E.forwardRef(({className:n,...e},t)=>R.jsx(N1,{ref:t,className:_t("text-sm font-semibold [&+div]:text-xs",n),...e}));K1.displayName=N1.displayName;const Y1=E.forwardRef(({className:n,...e},t)=>R.jsx(D1,{ref:t,className:_t("text-sm opacity-90",n),...e}));Y1.displayName=D1.displayName;const Q1=E.createContext(void 0);function KF({children:n}){const[e,t]=E.useState([]),r=E.useCallback(({title:c,description:d,variant:f="default"})=>{t(m=>[...m,{id:Math.random().toString(),title:c,description:d,variant:f}])},[]),s=E.useCallback(c=>{t(d=>d.filter(f=>f.id!==c))},[]),o=E.useMemo(()=>({toast:r}),[r]);return R.jsx(Q1.Provider,{value:o,children:R.jsxs(qF,{children:[n,e.map(({id:c,title:d,description:f,variant:m})=>R.jsxs($1,{variant:m,onOpenChange:y=>{y||s(c)},children:[d&&R.jsx(K1,{children:d}),R.jsx(Y1,{children:f})]},c)),R.jsx(G1,{})]})})}const W1=()=>{const n=E.useContext(Q1);if(!n)throw new Error("useToast must be used within a ToastProvider");return n};function Ud(){const[n,e]=E.useState(!1),[t,r]=E.useState(null),{user:s}=ma(),o=E.useCallback(async w=>{if(!s)throw new Error("User must be logged in");try{e(!0),r(null);const b=Pn(Cr(xt,"groups")),A=it.now();await wm(b,{...w,id:b.id,ownerId:s.uid,members:[s.uid],createdAt:A,updatedAt:A})}catch(b){throw r(b instanceof Error?b:new Error("Failed to create group")),b}finally{e(!1)}},[s]),c=E.useCallback(async w=>{try{e(!0),r(null);const b=Pn(xt,"groups",w),A=await $l(b);return A.exists()?{...A.data(),id:A.id}:null}catch(b){throw r(b instanceof Error?b:new Error("Failed to get group")),b}finally{e(!1)}},[]),d=E.useCallback(async()=>{if(!s)throw new Error("User must be logged in");try{e(!0),r(null);const w=Qs(Cr(xt,"groups"),xr("members","array-contains",s.uid),b9(100));return(await co(w)).docs.map(A=>({...A.data(),id:A.id}))}catch(w){throw r(w instanceof Error?w:new Error("Failed to get user groups")),w}finally{e(!1)}},[s]),f=E.useCallback(async(w,b)=>{if(!s)throw new Error("User must be logged in");try{e(!0),r(null);const A=await co(Qs(Cr(xt,"users"),xr("email","==",b)));if(A.empty)throw new Error("User not found");const I=A.docs[0].id,x=await c(w);if(x!=null&&x.members.includes(I))throw new Error("User is already a member of this group");if(!(await co(Qs(Cr(xt,"groupInvitations"),xr("groupId","==",w),xr("inviteeId","==",I),xr("status","==","pending")))).empty)throw new Error("User has already been invited to this group");const M=Pn(Cr(xt,"groupInvitations")),k=it.now();await wm(M,{id:M.id,groupId:w,inviterId:s.uid,inviteeId:I,status:"pending",createdAt:k,updatedAt:k})}catch(A){throw r(A instanceof Error?A:new Error("Failed to invite member")),A}finally{e(!1)}},[s,c]),m=E.useCallback(async()=>{if(!s)throw new Error("User must be logged in");try{e(!0),r(null);const w=Qs(Cr(xt,"groupInvitations"),xr("inviteeId","==",s.uid),xr("status","==","pending"));return(await co(w)).docs.map(A=>({...A.data(),id:A.id}))}catch(w){throw r(w instanceof Error?w:new Error("Failed to get invitations")),w}finally{e(!1)}},[s]),y=E.useCallback(async(w,b)=>{if(!s)throw new Error("User must be logged in");try{e(!0),r(null);const A=Pn(xt,"groupInvitations",w),I=await $l(A);if(!I.exists())throw new Error("Invitation not found");const x=I.data();await Hh(A,{status:b,updatedAt:it.now()}),b==="accepted"&&await Hh(Pn(xt,"groups",x.groupId),{members:P9(s.uid),updatedAt:it.now()})}catch(A){throw r(A instanceof Error?A:new Error("Failed to respond to invitation")),A}finally{e(!1)}},[s]),v=E.useCallback(async(w,b)=>{if(!s)throw new Error("User must be logged in");try{e(!0),r(null);const A=await c(w);if(!A)throw new Error("Group not found");if(A.ownerId!==s.uid)throw new Error("Only the group owner can remove members");if(b===A.ownerId)throw new Error("Cannot remove the group owner");await Hh(Pn(xt,"groups",w),{members:O9(b),updatedAt:it.now()})}catch(A){throw r(A instanceof Error?A:new Error("Failed to remove member")),A}finally{e(!1)}},[s,c]);return{loading:n,error:t,createGroup:o,getGroupById:c,getUserGroups:d,inviteMember:f,getGroupInvitations:m,respondToInvitation:y,removeGroupMember:v}}const YF=Lw("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),mn=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},o)=>{const c=r?oc:"button";return R.jsx(c,{className:_t(YF({variant:e,size:t,className:n})),ref:o,...s})});mn.displayName="Button";const ui=E.forwardRef(({className:n,...e},t)=>R.jsx("div",{ref:t,className:_t("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ui.displayName="Card";const mp=E.forwardRef(({className:n,...e},t)=>R.jsx("div",{ref:t,className:_t("flex flex-col space-y-1.5 p-6",n),...e}));mp.displayName="CardHeader";const pp=E.forwardRef(({className:n,...e},t)=>R.jsx("h3",{ref:t,className:_t("text-2xl font-semibold leading-none tracking-tight",n),...e}));pp.displayName="CardTitle";const QF=E.forwardRef(({className:n,...e},t)=>R.jsx("p",{ref:t,className:_t("text-sm text-muted-foreground",n),...e}));QF.displayName="CardDescription";const gp=E.forwardRef(({className:n,...e},t)=>R.jsx("div",{ref:t,className:_t("p-6 pt-0",n),...e}));gp.displayName="CardContent";const WF=E.forwardRef(({className:n,...e},t)=>R.jsx("div",{ref:t,className:_t("flex items-center p-6 pt-0",n),...e}));WF.displayName="CardFooter";function XF(){const[n,e]=E.useState([]),{getGroupInvitations:t,respondToInvitation:r,loading:s,error:o}=Ud(),[c,d]=E.useState(null);E.useEffect(()=>{f()},[]);const f=async()=>{try{const y=await t();e(y)}catch(y){console.error("Failed to load invitations:",y)}},m=async(y,v)=>{d(y);try{await r(y,v?"accepted":"declined"),e(w=>w.filter(b=>b.id!==y))}catch(w){console.error("Failed to respond to invitation:",w)}finally{d(null)}};return n.length===0&&!s?null:R.jsxs("div",{className:"space-y-4",children:[R.jsx("h2",{className:"text-xl font-semibold",children:"Group Invitations"}),o&&R.jsx("p",{className:"text-sm text-red-600",role:"alert",children:o.message}),R.jsx("div",{className:"grid gap-3",children:n.map(y=>R.jsx(ui,{className:"p-4",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{className:"space-y-1",children:[R.jsx("p",{className:"font-medium",children:"You've been invited to join a group"}),R.jsxs("p",{className:"text-sm text-gray-500",children:["Invitation sent"," ",new Date(y.createdAt.toDate()).toLocaleDateString()]})]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx(mn,{variant:"outline",onClick:()=>m(y.id,!1),disabled:s||c===y.id,children:c===y.id?"Declining...":"Decline"}),R.jsx(mn,{onClick:()=>m(y.id,!0),disabled:s||c===y.id,children:c===y.id?"Accepting...":"Accept"})]})]})},y.id))})]})}const Nr=E.forwardRef(({className:n,type:e,...t},r)=>R.jsx("input",{type:e,className:_t("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:r,...t}));Nr.displayName="Input";function ZF({group:n,totalAmount:e,recentExpenseCount:t}){const r=No(),{inviteMember:s}=Ud(),{toast:o}=W1(),[c,d]=E.useState(!1),[f,m]=E.useState(""),[y,v]=E.useState(!1),w=async()=>{if(f.trim())try{v(!0),await s(n.id,f.trim()),o({title:"Success",description:"Invitation sent successfully"}),m(""),d(!1)}catch(b){o({title:"Error",description:b instanceof Error?b.message:"Failed to send invitation",variant:"destructive"})}finally{v(!1)}};return R.jsxs(ui,{children:[R.jsx(mp,{children:R.jsxs(pp,{className:"flex justify-between items-center",children:[R.jsx("span",{children:n.name}),R.jsx("div",{className:"flex gap-2 items-center",children:R.jsx(mn,{variant:"outline",size:"sm",onClick:()=>r(`/groups/${n.id}`),children:"View Details"})})]})}),R.jsxs(gp,{children:[R.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Expenses"}),R.jsxs("p",{className:"text-2xl font-bold",children:["$",e.toFixed(2)]})]}),R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-muted-foreground",children:"Members"}),R.jsx("p",{className:"text-2xl font-bold",children:n.members.length})]})]}),R.jsxs("div",{className:"mt-4",children:[R.jsx("p",{className:"text-sm text-muted-foreground",children:"Recent Activity"}),R.jsx("p",{className:"text-sm",children:t>0?`${t} expense${t===1?"":"s"} in the last 30 days`:"No recent expenses"})]}),R.jsxs("div",{className:"mt-4 space-y-4",children:[c&&R.jsxs("div",{className:"flex gap-2",children:[R.jsx(Nr,{type:"email",placeholder:"Enter email to invite",value:f,onChange:b=>m(b.target.value),disabled:y}),R.jsx(mn,{variant:"outline",size:"sm",onClick:w,disabled:y,children:y?"Inviting...":"Send"})]}),R.jsxs("div",{className:"flex justify-end gap-2",children:[R.jsx(mn,{variant:"outline",onClick:()=>d(!c),children:c?"Cancel":"Invite Member"}),R.jsx(mn,{className:"bg-green-600 hover:bg-green-700",onClick:()=>r(`/groups/${n.id}/expense/new`),children:"Add Expense"})]})]})]})]})}function Bw(){const[n,e]=E.useState(!1),[t,r]=E.useState(null),{user:s}=ma(),{getUserProfile:o}=cp(),c=E.useCallback(async y=>{if(!s)throw new Error("User must be authenticated");try{if(e(!0),r(null),y.groupId){const b=await $l(Pn(xt,"groups",y.groupId));if(!b.exists())throw new Error("Group not found");if(!b.data().members.includes(s.uid))throw new Error("You are not a member of this group")}const v=it.now(),w={payerId:s.uid,amount:y.amount,description:y.description,splits:y.splits,participants:y.participants,splitType:y.splitType,groupId:y.groupId,createdAt:v,updatedAt:v};await I9(Cr(xt,"expenses"),w)}catch(v){throw r(v instanceof Error?v:new Error("Failed to create expense")),v}finally{e(!1)}},[s]),d=E.useCallback(async y=>{if(!s)throw new Error("User must be authenticated");try{e(!0),r(null);let v;y?v=Qs(Cr(xt,"expenses"),xr("groupId","==",y),yA("createdAt","desc")):v=Qs(Cr(xt,"expenses"),xr("participants","array-contains",s.uid),yA("createdAt","desc"));const b=(await co(v)).docs,A=await Promise.all([...new Set(b.map(C=>C.data().payerId))].map(C=>o(C))),I=new Map(A.map(C=>[C==null?void 0:C.id,C]));let x=b.map(C=>{const M=C.data(),k=I.get(M.payerId);return{id:C.id,...M,createdAt:M.createdAt.toDate(),updatedAt:M.updatedAt.toDate(),payerName:k?k.displayName||k.email:"Unknown User"}});if(y){const C=await $l(Pn(xt,"groups",y));if(!C.exists())throw new Error("Group not found");if(!C.data().members.includes(s.uid))throw new Error("You are not a member of this group");x=x.filter(k=>k.groupId===y)}return console.log("Fetching expenses for user:",s.uid),console.log("Fetched expenses:",x),x}catch(v){throw console.error("Error fetching expenses:",v),r(v instanceof Error?v:new Error("Failed to fetch expenses")),v}finally{e(!1)}},[s]),f=E.useCallback(async y=>{if(!s)throw new Error("User must be authenticated");try{e(!0);const v=await d(y),w=new Map,b=new Map,A=y?v.filter(C=>C.groupId===y):v.filter(C=>!C.groupId),I=new Set;return A.forEach(C=>{I.add(C.payerId),C.splits.forEach(M=>I.add(M.userId))}),I.forEach(C=>{C!==s.uid&&w.set(C,0)}),await Promise.all(Array.from(I).map(async C=>{const M=await o(C);M&&b.set(C,M)})),A.forEach(C=>{if(C.payerId===s.uid)C.splits.forEach(M=>{if(M.userId!==s.uid){const k=w.get(M.userId)||0;w.set(M.userId,k+M.amount)}});else if(C.splits.some(M=>M.userId===s.uid)){const M=C.splits.find(k=>k.userId===s.uid);if(M){const k=w.get(C.payerId)||0;w.set(C.payerId,k-M.amount)}}}),Array.from(w.entries()).map(([C,M])=>{const k=b.get(C);return k?{userId:C,email:k.email,displayName:k.displayName||null,balance:M}:null}).filter(C=>C!==null)}catch(v){throw r(v instanceof Error?v:new Error("Failed to calculate balances")),v}finally{e(!1)}},[s,d,o]),m=E.useCallback((y,v)=>{const w=y/v.length;return v.map(b=>({userId:b,amount:w}))},[]);return{loading:n,error:t,createExpense:c,getExpenses:d,calculateBalances:f,calculateSplitAmounts:m,updateExpense:async(y,v)=>{if(!s)throw new Error("User must be authenticated");try{if(e(!0),r(null),v.groupId){const A=await $l(Pn(xt,"groups",v.groupId));if(!A.exists())throw new Error("Group not found");if(!A.data().members.includes(s.uid))throw new Error("You are not a member of this group")}const w=it.now(),b={payerId:v.payerId,amount:v.amount,description:v.description,splits:v.splits,participants:v.participants,splitType:v.splitType,groupId:v.groupId,updatedAt:w};await Hh(Pn(xt,"expenses",y),b)}catch(w){throw r(w instanceof Error?w:new Error("Failed to update expense")),w}finally{e(!1)}}}}function JF(){const{signOut:n}=ma(),[e,t]=E.useState([]),[r,s]=E.useState(!0),{getUserGroups:o}=Ud(),{getExpenses:c}=Bw(),d=E.useCallback(async()=>{try{s(!0);const f=await o();console.log(f);const m=await Promise.allSettled(f.map(async y=>{const v=await c(y.id),w=v.reduce((I,x)=>I+x.amount,0),b=new Date;b.setDate(b.getDate()-30);const A=v.filter(I=>new Date(I.createdAt)>b).length;return{...y,totalAmount:w,recentExpenseCount:A}}));t(m.filter(y=>y.status==="fulfilled").map(y=>y.value))}catch(f){console.error("Failed to load groups:",f)}finally{s(!1)}},[o,c]);return E.useEffect(()=>{d()},[d]),R.jsxs("div",{className:"min-h-screen bg-background",children:[R.jsx("header",{className:"border-b",children:R.jsxs("div",{className:"container flex h-16 items-center px-4",children:[R.jsx("h1",{className:"text-lg font-semibold",children:"Expense Tracker"}),R.jsx("div",{className:"ml-auto flex items-center space-x-4",children:R.jsx(mn,{variant:"outline",onClick:n,children:"Sign out"})})]})}),R.jsx("main",{className:"container px-4 py-8",children:R.jsxs("div",{className:"grid gap-8",children:[R.jsx(XF,{}),R.jsxs("div",{className:"space-y-4",children:[R.jsx("h2",{className:"text-2xl font-bold",children:"Your Groups"}),R.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:r?R.jsxs(R.Fragment,{children:[R.jsx(ui,{className:"animate-pulse",children:R.jsx("div",{className:"h-48"})}),R.jsx(ui,{className:"animate-pulse",children:R.jsx("div",{className:"h-48"})})]}):e.length>0?e.map(f=>R.jsx(ZF,{group:f,totalAmount:f.totalAmount,recentExpenseCount:f.recentExpenseCount},f.id)):R.jsx("div",{className:"col-span-2 text-center py-8",children:R.jsx("p",{className:"text-muted-foreground",children:"You haven't created or joined any groups yet."})})})]})]})})]})}var ez="Label",X1=E.forwardRef((n,e)=>R.jsx(et.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));X1.displayName=ez;var Z1=X1;const tz=Lw("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),J1=E.forwardRef(({className:n,...e},t)=>R.jsx(Z1,{ref:t,className:_t(tz(),n),...e}));J1.displayName=Z1.displayName;function Fw(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function zw(n){const[e,t]=E.useState(void 0);return yn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let c,d;if("borderBoxSize"in o){const f=o.borderBoxSize,m=Array.isArray(f)?f[0]:f;c=m.inlineSize,d=m.blockSize}else c=n.offsetWidth,d=n.offsetHeight;t({width:c,height:d})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var qw="Switch",[nz,I7]=pa(qw),[rz,iz]=nz(qw),eN=E.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:o,required:c,disabled:d,value:f="on",onCheckedChange:m,form:y,...v}=n,[w,b]=E.useState(null),A=vt(e,k=>b(k)),I=E.useRef(!1),x=w?y||!!w.closest("form"):!0,[C=!1,M]=lc({prop:s,defaultProp:o,onChange:m});return R.jsxs(rz,{scope:t,checked:C,disabled:d,children:[R.jsx(et.button,{type:"button",role:"switch","aria-checked":C,"aria-required":c,"data-state":rN(C),"data-disabled":d?"":void 0,disabled:d,value:f,...v,ref:A,onClick:je(n.onClick,k=>{M($=>!$),x&&(I.current=k.isPropagationStopped(),I.current||k.stopPropagation())})}),x&&R.jsx(sz,{control:w,bubbles:!I.current,name:r,value:f,checked:C,required:c,disabled:d,form:y,style:{transform:"translateX(-100%)"}})]})});eN.displayName=qw;var tN="SwitchThumb",nN=E.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=iz(tN,t);return R.jsx(et.span,{"data-state":rN(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});nN.displayName=tN;var sz=n=>{const{control:e,checked:t,bubbles:r=!0,...s}=n,o=E.useRef(null),c=Fw(t),d=zw(e);return E.useEffect(()=>{const f=o.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==t&&v){const w=new Event("click",{bubbles:r});v.call(f,t),f.dispatchEvent(w)}},[c,t,r]),R.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:o,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function rN(n){return n?"checked":"unchecked"}var iN=eN,az=nN;const sN=E.forwardRef(({className:n,...e},t)=>R.jsx(iN,{className:_t("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:R.jsx(az,{className:_t("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));sN.displayName=iN.displayName;function Hw(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var oz=["color"],lz=E.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=Hw(n,oz);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),E.createElement("path",{d:"M7.49991 0.877045C3.84222 0.877045 0.877075 3.84219 0.877075 7.49988C0.877075 11.1575 3.84222 14.1227 7.49991 14.1227C11.1576 14.1227 14.1227 11.1575 14.1227 7.49988C14.1227 3.84219 11.1576 0.877045 7.49991 0.877045ZM1.82708 7.49988C1.82708 4.36686 4.36689 1.82704 7.49991 1.82704C10.6329 1.82704 13.1727 4.36686 13.1727 7.49988C13.1727 10.6329 10.6329 13.1727 7.49991 13.1727C4.36689 13.1727 1.82708 10.6329 1.82708 7.49988ZM10.1589 5.53774C10.3178 5.31191 10.2636 5.00001 10.0378 4.84109C9.81194 4.68217 9.50004 4.73642 9.34112 4.96225L6.51977 8.97154L5.35681 7.78706C5.16334 7.59002 4.84677 7.58711 4.64973 7.78058C4.45268 7.97404 4.44978 8.29061 4.64325 8.48765L6.22658 10.1003C6.33054 10.2062 6.47617 10.2604 6.62407 10.2483C6.77197 10.2363 6.90686 10.1591 6.99226 10.0377L10.1589 5.53774Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),cz=["color"],uz=E.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=Hw(n,cz);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),E.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),dz=["color"],fz=E.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=Hw(n,dz);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),E.createElement("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM7.50003 4C7.77617 4 8.00003 4.22386 8.00003 4.5V7H10.5C10.7762 7 11 7.22386 11 7.5C11 7.77614 10.7762 8 10.5 8H8.00003V10.5C8.00003 10.7761 7.77617 11 7.50003 11C7.22389 11 7.00003 10.7761 7.00003 10.5V8H4.50003C4.22389 8 4.00003 7.77614 4.00003 7.5C4.00003 7.22386 4.22389 7 4.50003 7H7.00003V4.5C7.00003 4.22386 7.22389 4 7.50003 4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const hz={"auth/invalid-email":"The email address is not valid.","auth/user-disabled":"This account has been disabled.","auth/user-not-found":"No account found with this email.","auth/wrong-password":"Incorrect password.","auth/email-already-in-use":"An account already exists with this email.","auth/weak-password":"Password should be at least 6 characters long.","auth/operation-not-allowed":"This operation is not allowed.","auth/network-request-failed":"A network error occurred. Please check your connection.","auth/popup-closed-by-user":"Sign in was cancelled.","auth/unauthorized-domain":"This domain is not authorized.","auth/timeout":"The operation has timed out."},UA={"permission-denied":"You don't have permission to perform this action.",unavailable:"The service is currently unavailable.","data-loss":"Unrecoverable data loss or corruption.","invalid-argument":"Invalid data provided."};function Gw(n){if(n instanceof yr){if(n.code.startsWith("auth/"))return{type:"auth",message:hz[n.code]||"Authentication failed.",code:n.code};if(n.code in UA)return{type:"database",message:UA[n.code],code:n.code};if(n.code==="network-request-failed")return{type:"network",message:"A network error occurred. Please check your connection.",code:n.code}}return{type:"unknown",message:n instanceof Error?n.message:"An unexpected error occurred.",code:"unknown"}}var mz=oO.useId||(()=>{}),pz=0;function yp(n){const[e,t]=E.useState(mz());return yn(()=>{t(r=>r??String(pz++))},[n]),e?`radix-${e}`:""}var gz=E.createContext(void 0);function $w(n){const e=E.useContext(gz);return n||e||"ltr"}var Xy="rovingFocusGroup.onEntryFocus",yz={bubbles:!1,cancelable:!0},vp="RovingFocusGroup",[Jv,aN,vz]=Nw(vp),[_z,oN]=pa(vp,[vz]),[wz,Ez]=_z(vp),lN=E.forwardRef((n,e)=>R.jsx(Jv.Provider,{scope:n.__scopeRovingFocusGroup,children:R.jsx(Jv.Slot,{scope:n.__scopeRovingFocusGroup,children:R.jsx(bz,{...n,ref:e})})}));lN.displayName=vp;var bz=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:y=!1,...v}=n,w=E.useRef(null),b=vt(e,w),A=$w(o),[I=null,x]=lc({prop:c,defaultProp:d,onChange:f}),[C,M]=E.useState(!1),k=Vn(m),$=aN(t),G=E.useRef(!1),[Y,V]=E.useState(0);return E.useEffect(()=>{const P=w.current;if(P)return P.addEventListener(Xy,k),()=>P.removeEventListener(Xy,k)},[k]),R.jsx(wz,{scope:t,orientation:r,dir:A,loop:s,currentTabStopId:I,onItemFocus:E.useCallback(P=>x(P),[x]),onItemShiftTab:E.useCallback(()=>M(!0),[]),onFocusableItemAdd:E.useCallback(()=>V(P=>P+1),[]),onFocusableItemRemove:E.useCallback(()=>V(P=>P-1),[]),children:R.jsx(et.div,{tabIndex:C||Y===0?-1:0,"data-orientation":r,...v,ref:b,style:{outline:"none",...n.style},onMouseDown:je(n.onMouseDown,()=>{G.current=!0}),onFocus:je(n.onFocus,P=>{const D=!G.current;if(P.target===P.currentTarget&&D&&!C){const U=new CustomEvent(Xy,yz);if(P.currentTarget.dispatchEvent(U),!U.defaultPrevented){const B=$().filter(Z=>Z.focusable),z=B.find(Z=>Z.active),L=B.find(Z=>Z.id===I),Ee=[z,L,...B].filter(Boolean).map(Z=>Z.ref.current);dN(Ee,y)}}G.current=!1}),onBlur:je(n.onBlur,()=>M(!1))})})}),cN="RovingFocusGroupItem",uN=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:o,...c}=n,d=yp(),f=o||d,m=Ez(cN,t),y=m.currentTabStopId===f,v=aN(t),{onFocusableItemAdd:w,onFocusableItemRemove:b}=m;return E.useEffect(()=>{if(r)return w(),()=>b()},[r,w,b]),R.jsx(Jv.ItemSlot,{scope:t,id:f,focusable:r,active:s,children:R.jsx(et.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:je(n.onMouseDown,A=>{r?m.onItemFocus(f):A.preventDefault()}),onFocus:je(n.onFocus,()=>m.onItemFocus(f)),onKeyDown:je(n.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){m.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const I=Az(A,m.orientation,m.dir);if(I!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let C=v().filter(M=>M.focusable).map(M=>M.ref.current);if(I==="last")C.reverse();else if(I==="prev"||I==="next"){I==="prev"&&C.reverse();const M=C.indexOf(A.currentTarget);C=m.loop?Iz(C,M+1):C.slice(M+1)}setTimeout(()=>dN(C))}})})})});uN.displayName=cN;var Tz={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Sz(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Az(n,e,t){const r=Sz(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Tz[r]}function dN(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function Iz(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var Rz=lN,xz=uN,Kw="Radio",[Cz,fN]=pa(Kw),[Nz,Dz]=Cz(Kw),hN=E.forwardRef((n,e)=>{const{__scopeRadio:t,name:r,checked:s=!1,required:o,disabled:c,value:d="on",onCheck:f,form:m,...y}=n,[v,w]=E.useState(null),b=vt(e,x=>w(x)),A=E.useRef(!1),I=v?m||!!v.closest("form"):!0;return R.jsxs(Nz,{scope:t,checked:s,disabled:c,children:[R.jsx(et.button,{type:"button",role:"radio","aria-checked":s,"data-state":gN(s),"data-disabled":c?"":void 0,disabled:c,value:d,...y,ref:b,onClick:je(n.onClick,x=>{s||f==null||f(),I&&(A.current=x.isPropagationStopped(),A.current||x.stopPropagation())})}),I&&R.jsx(Pz,{control:v,bubbles:!A.current,name:r,value:d,checked:s,required:o,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});hN.displayName=Kw;var mN="RadioIndicator",pN=E.forwardRef((n,e)=>{const{__scopeRadio:t,forceMount:r,...s}=n,o=Dz(mN,t);return R.jsx(Ow,{present:r||o.checked,children:R.jsx(et.span,{"data-state":gN(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e})})});pN.displayName=mN;var Pz=n=>{const{control:e,checked:t,bubbles:r=!0,...s}=n,o=E.useRef(null),c=Fw(t),d=zw(e);return E.useEffect(()=>{const f=o.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==t&&v){const w=new Event("click",{bubbles:r});v.call(f,t),f.dispatchEvent(w)}},[c,t,r]),R.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:o,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function gN(n){return n?"checked":"unchecked"}var Oz=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Yw="RadioGroup",[Mz,R7]=pa(Yw,[oN,fN]),yN=oN(),vN=fN(),[Vz,kz]=Mz(Yw),_N=E.forwardRef((n,e)=>{const{__scopeRadioGroup:t,name:r,defaultValue:s,value:o,required:c=!1,disabled:d=!1,orientation:f,dir:m,loop:y=!0,onValueChange:v,...w}=n,b=yN(t),A=$w(m),[I,x]=lc({prop:o,defaultProp:s,onChange:v});return R.jsx(Vz,{scope:t,name:r,required:c,disabled:d,value:I,onValueChange:x,children:R.jsx(Rz,{asChild:!0,...b,orientation:f,dir:A,loop:y,children:R.jsx(et.div,{role:"radiogroup","aria-required":c,"aria-orientation":f,"data-disabled":d?"":void 0,dir:A,...w,ref:e})})})});_N.displayName=Yw;var wN="RadioGroupItem",EN=E.forwardRef((n,e)=>{const{__scopeRadioGroup:t,disabled:r,...s}=n,o=kz(wN,t),c=o.disabled||r,d=yN(t),f=vN(t),m=E.useRef(null),y=vt(e,m),v=o.value===s.value,w=E.useRef(!1);return E.useEffect(()=>{const b=I=>{Oz.includes(I.key)&&(w.current=!0)},A=()=>w.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",A),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",A)}},[]),R.jsx(xz,{asChild:!0,...d,focusable:!c,active:v,children:R.jsx(hN,{disabled:c,required:o.required,checked:v,...f,...s,name:o.name,ref:y,onCheck:()=>o.onValueChange(s.value),onKeyDown:je(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:je(s.onFocus,()=>{var b;w.current&&((b=m.current)==null||b.click())})})})});EN.displayName=wN;var Lz="RadioGroupIndicator",bN=E.forwardRef((n,e)=>{const{__scopeRadioGroup:t,...r}=n,s=vN(t);return R.jsx(pN,{...s,...r,ref:e})});bN.displayName=Lz;var TN=_N,SN=EN,Uz=bN;const AN=E.forwardRef(({className:n,...e},t)=>R.jsx(TN,{className:_t("grid gap-2",n),...e,ref:t}));AN.displayName=TN.displayName;const e_=E.forwardRef(({className:n,...e},t)=>R.jsx(SN,{ref:t,className:_t("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:R.jsx(Uz,{className:"flex items-center justify-center",children:R.jsx(JB,{className:"h-2.5 w-2.5 fill-current text-current"})})}));e_.displayName=SN.displayName;function jA(n,[e,t]){return Math.min(t,Math.max(e,n))}var Zy=0;function jz(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??BA()),document.body.insertAdjacentElement("beforeend",n[1]??BA()),Zy++,()=>{Zy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Zy--}},[])}function BA(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Jy="focusScope.autoFocusOnMount",ev="focusScope.autoFocusOnUnmount",FA={bubbles:!1,cancelable:!0},Bz="FocusScope",IN=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...c}=n,[d,f]=E.useState(null),m=Vn(s),y=Vn(o),v=E.useRef(null),w=vt(e,I=>f(I)),b=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let I=function(k){if(b.paused||!d)return;const $=k.target;d.contains($)?v.current=$:zs(v.current,{select:!0})},x=function(k){if(b.paused||!d)return;const $=k.relatedTarget;$!==null&&(d.contains($)||zs(v.current,{select:!0}))},C=function(k){if(document.activeElement===document.body)for(const G of k)G.removedNodes.length>0&&zs(d)};document.addEventListener("focusin",I),document.addEventListener("focusout",x);const M=new MutationObserver(C);return d&&M.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",I),document.removeEventListener("focusout",x),M.disconnect()}}},[r,d,b.paused]),E.useEffect(()=>{if(d){qA.add(b);const I=document.activeElement;if(!d.contains(I)){const C=new CustomEvent(Jy,FA);d.addEventListener(Jy,m),d.dispatchEvent(C),C.defaultPrevented||(Fz($z(RN(d)),{select:!0}),document.activeElement===I&&zs(d))}return()=>{d.removeEventListener(Jy,m),setTimeout(()=>{const C=new CustomEvent(ev,FA);d.addEventListener(ev,y),d.dispatchEvent(C),C.defaultPrevented||zs(I??document.body,{select:!0}),d.removeEventListener(ev,y),qA.remove(b)},0)}}},[d,m,y,b]);const A=E.useCallback(I=>{if(!t&&!r||b.paused)return;const x=I.key==="Tab"&&!I.altKey&&!I.ctrlKey&&!I.metaKey,C=document.activeElement;if(x&&C){const M=I.currentTarget,[k,$]=zz(M);k&&$?!I.shiftKey&&C===$?(I.preventDefault(),t&&zs(k,{select:!0})):I.shiftKey&&C===k&&(I.preventDefault(),t&&zs($,{select:!0})):C===M&&I.preventDefault()}},[t,r,b.paused]);return R.jsx(et.div,{tabIndex:-1,...c,ref:w,onKeyDown:A})});IN.displayName=Bz;function Fz(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(zs(r,{select:e}),document.activeElement!==t)return}function zz(n){const e=RN(n),t=zA(e,n),r=zA(e.reverse(),n);return[t,r]}function RN(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function zA(n,e){for(const t of n)if(!qz(t,{upTo:e}))return t}function qz(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Hz(n){return n instanceof HTMLInputElement&&"select"in n}function zs(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Hz(n)&&e&&n.select()}}var qA=Gz();function Gz(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=HA(n,e),n.unshift(e)},remove(e){var t;n=HA(n,e),(t=n[0])==null||t.resume()}}}function HA(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function $z(n){return n.filter(e=>e.tagName!=="A")}const Kz=["top","right","bottom","left"],sa=Math.min,Hn=Math.max,Tm=Math.round,bh=Math.floor,ai=n=>({x:n,y:n}),Yz={left:"right",right:"left",bottom:"top",top:"bottom"},Qz={start:"end",end:"start"};function t_(n,e,t){return Hn(n,sa(e,t))}function Qi(n,e){return typeof n=="function"?n(e):n}function Wi(n){return n.split("-")[0]}function bc(n){return n.split("-")[1]}function Qw(n){return n==="x"?"y":"x"}function Ww(n){return n==="y"?"height":"width"}function aa(n){return["top","bottom"].includes(Wi(n))?"y":"x"}function Xw(n){return Qw(aa(n))}function Wz(n,e,t){t===void 0&&(t=!1);const r=bc(n),s=Xw(n),o=Ww(s);let c=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=Sm(c)),[c,Sm(c)]}function Xz(n){const e=Sm(n);return[n_(n),e,n_(e)]}function n_(n){return n.replace(/start|end/g,e=>Qz[e])}function Zz(n,e,t){const r=["left","right"],s=["right","left"],o=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?o:c;default:return[]}}function Jz(n,e,t,r){const s=bc(n);let o=Zz(Wi(n),t==="start",r);return s&&(o=o.map(c=>c+"-"+s),e&&(o=o.concat(o.map(n_)))),o}function Sm(n){return n.replace(/left|right|bottom|top/g,e=>Yz[e])}function e3(n){return{top:0,right:0,bottom:0,left:0,...n}}function xN(n){return typeof n!="number"?e3(n):{top:n,right:n,bottom:n,left:n}}function Am(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function GA(n,e,t){let{reference:r,floating:s}=n;const o=aa(e),c=Xw(e),d=Ww(c),f=Wi(e),m=o==="y",y=r.x+r.width/2-s.width/2,v=r.y+r.height/2-s.height/2,w=r[d]/2-s[d]/2;let b;switch(f){case"top":b={x:y,y:r.y-s.height};break;case"bottom":b={x:y,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:v};break;case"left":b={x:r.x-s.width,y:v};break;default:b={x:r.x,y:r.y}}switch(bc(e)){case"start":b[c]-=w*(t&&m?-1:1);break;case"end":b[c]+=w*(t&&m?-1:1);break}return b}const t3=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:c}=t,d=o.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:n,floating:e,strategy:s}),{x:y,y:v}=GA(m,r,f),w=r,b={},A=0;for(let I=0;I<d.length;I++){const{name:x,fn:C}=d[I],{x:M,y:k,data:$,reset:G}=await C({x:y,y:v,initialPlacement:r,placement:w,strategy:s,middlewareData:b,rects:m,platform:c,elements:{reference:n,floating:e}});y=M??y,v=k??v,b={...b,[x]:{...b[x],...$}},G&&A<=50&&(A++,typeof G=="object"&&(G.placement&&(w=G.placement),G.rects&&(m=G.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:s}):G.rects),{x:y,y:v}=GA(m,w,f)),I=-1)}return{x:y,y:v,placement:w,strategy:s,middlewareData:b}};async function vd(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:c,elements:d,strategy:f}=n,{boundary:m="clippingAncestors",rootBoundary:y="viewport",elementContext:v="floating",altBoundary:w=!1,padding:b=0}=Qi(e,n),A=xN(b),x=d[w?v==="floating"?"reference":"floating":v],C=Am(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(x)))==null||t?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(d.floating)),boundary:m,rootBoundary:y,strategy:f})),M=v==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d.floating)),$=await(o.isElement==null?void 0:o.isElement(k))?await(o.getScale==null?void 0:o.getScale(k))||{x:1,y:1}:{x:1,y:1},G=Am(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:M,offsetParent:k,strategy:f}):M);return{top:(C.top-G.top+A.top)/$.y,bottom:(G.bottom-C.bottom+A.bottom)/$.y,left:(C.left-G.left+A.left)/$.x,right:(G.right-C.right+A.right)/$.x}}const n3=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:c,elements:d,middlewareData:f}=e,{element:m,padding:y=0}=Qi(n,e)||{};if(m==null)return{};const v=xN(y),w={x:t,y:r},b=Xw(s),A=Ww(b),I=await c.getDimensions(m),x=b==="y",C=x?"top":"left",M=x?"bottom":"right",k=x?"clientHeight":"clientWidth",$=o.reference[A]+o.reference[b]-w[b]-o.floating[A],G=w[b]-o.reference[b],Y=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let V=Y?Y[k]:0;(!V||!await(c.isElement==null?void 0:c.isElement(Y)))&&(V=d.floating[k]||o.floating[A]);const P=$/2-G/2,D=V/2-I[A]/2-1,U=sa(v[C],D),B=sa(v[M],D),z=U,L=V-I[A]-B,le=V/2-I[A]/2+P,Ee=t_(z,le,L),Z=!f.arrow&&bc(s)!=null&&le!==Ee&&o.reference[A]/2-(le<z?U:B)-I[A]/2<0,de=Z?le<z?le-z:le-L:0;return{[b]:w[b]+de,data:{[b]:Ee,centerOffset:le-Ee-de,...Z&&{alignmentOffset:de}},reset:Z}}}),r3=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:c,initialPlacement:d,platform:f,elements:m}=e,{mainAxis:y=!0,crossAxis:v=!0,fallbackPlacements:w,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:I=!0,...x}=Qi(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const C=Wi(s),M=aa(d),k=Wi(d)===d,$=await(f.isRTL==null?void 0:f.isRTL(m.floating)),G=w||(k||!I?[Sm(d)]:Xz(d)),Y=A!=="none";!w&&Y&&G.push(...Jz(d,I,A,$));const V=[d,...G],P=await vd(e,x),D=[];let U=((r=o.flip)==null?void 0:r.overflows)||[];if(y&&D.push(P[C]),v){const le=Wz(s,c,$);D.push(P[le[0]],P[le[1]])}if(U=[...U,{placement:s,overflows:D}],!D.every(le=>le<=0)){var B,z;const le=(((B=o.flip)==null?void 0:B.index)||0)+1,Ee=V[le];if(Ee)return{data:{index:le,overflows:U},reset:{placement:Ee}};let Z=(z=U.filter(de=>de.overflows[0]<=0).sort((de,se)=>de.overflows[1]-se.overflows[1])[0])==null?void 0:z.placement;if(!Z)switch(b){case"bestFit":{var L;const de=(L=U.filter(se=>{if(Y){const ye=aa(se.placement);return ye===M||ye==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(ye=>ye>0).reduce((ye,F)=>ye+F,0)]).sort((se,ye)=>se[1]-ye[1])[0])==null?void 0:L[0];de&&(Z=de);break}case"initialPlacement":Z=d;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};function $A(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function KA(n){return Kz.some(e=>n[e]>=0)}const i3=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Qi(n,e);switch(r){case"referenceHidden":{const o=await vd(e,{...s,elementContext:"reference"}),c=$A(o,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:KA(c)}}}case"escaped":{const o=await vd(e,{...s,altBoundary:!0}),c=$A(o,t.floating);return{data:{escapedOffsets:c,escaped:KA(c)}}}default:return{}}}}};async function s3(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Wi(t),d=bc(t),f=aa(t)==="y",m=["left","top"].includes(c)?-1:1,y=o&&f?-1:1,v=Qi(e,n);let{mainAxis:w,crossAxis:b,alignmentAxis:A}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return d&&typeof A=="number"&&(b=d==="end"?A*-1:A),f?{x:b*y,y:w*m}:{x:w*m,y:b*y}}const a3=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:c,middlewareData:d}=e,f=await s3(e,n);return c===((t=d.offset)==null?void 0:t.placement)&&(r=d.arrow)!=null&&r.alignmentOffset?{}:{x:s+f.x,y:o+f.y,data:{...f,placement:c}}}}},o3=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:c=!1,limiter:d={fn:x=>{let{x:C,y:M}=x;return{x:C,y:M}}},...f}=Qi(n,e),m={x:t,y:r},y=await vd(e,f),v=aa(Wi(s)),w=Qw(v);let b=m[w],A=m[v];if(o){const x=w==="y"?"top":"left",C=w==="y"?"bottom":"right",M=b+y[x],k=b-y[C];b=t_(M,b,k)}if(c){const x=v==="y"?"top":"left",C=v==="y"?"bottom":"right",M=A+y[x],k=A-y[C];A=t_(M,A,k)}const I=d.fn({...e,[w]:b,[v]:A});return{...I,data:{x:I.x-t,y:I.y-r,enabled:{[w]:o,[v]:c}}}}}},l3=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:c}=e,{offset:d=0,mainAxis:f=!0,crossAxis:m=!0}=Qi(n,e),y={x:t,y:r},v=aa(s),w=Qw(v);let b=y[w],A=y[v];const I=Qi(d,e),x=typeof I=="number"?{mainAxis:I,crossAxis:0}:{mainAxis:0,crossAxis:0,...I};if(f){const k=w==="y"?"height":"width",$=o.reference[w]-o.floating[k]+x.mainAxis,G=o.reference[w]+o.reference[k]-x.mainAxis;b<$?b=$:b>G&&(b=G)}if(m){var C,M;const k=w==="y"?"width":"height",$=["top","left"].includes(Wi(s)),G=o.reference[v]-o.floating[k]+($&&((C=c.offset)==null?void 0:C[v])||0)+($?0:x.crossAxis),Y=o.reference[v]+o.reference[k]+($?0:((M=c.offset)==null?void 0:M[v])||0)-($?x.crossAxis:0);A<G?A=G:A>Y&&(A=Y)}return{[w]:b,[v]:A}}}},c3=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:o,platform:c,elements:d}=e,{apply:f=()=>{},...m}=Qi(n,e),y=await vd(e,m),v=Wi(s),w=bc(s),b=aa(s)==="y",{width:A,height:I}=o.floating;let x,C;v==="top"||v==="bottom"?(x=v,C=w===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(C=v,x=w==="end"?"top":"bottom");const M=I-y.top-y.bottom,k=A-y.left-y.right,$=sa(I-y[x],M),G=sa(A-y[C],k),Y=!e.middlewareData.shift;let V=$,P=G;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(V=M),Y&&!w){const U=Hn(y.left,0),B=Hn(y.right,0),z=Hn(y.top,0),L=Hn(y.bottom,0);b?P=A-2*(U!==0||B!==0?U+B:Hn(y.left,y.right)):V=I-2*(z!==0||L!==0?z+L:Hn(y.top,y.bottom))}await f({...e,availableWidth:P,availableHeight:V});const D=await c.getDimensions(d.floating);return A!==D.width||I!==D.height?{reset:{rects:!0}}:{}}}};function _p(){return typeof window<"u"}function Tc(n){return CN(n)?(n.nodeName||"").toLowerCase():"#document"}function Kn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function fi(n){var e;return(e=(CN(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function CN(n){return _p()?n instanceof Node||n instanceof Kn(n).Node:!1}function Mr(n){return _p()?n instanceof Element||n instanceof Kn(n).Element:!1}function di(n){return _p()?n instanceof HTMLElement||n instanceof Kn(n).HTMLElement:!1}function YA(n){return!_p()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Kn(n).ShadowRoot}function jd(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Vr(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function u3(n){return["table","td","th"].includes(Tc(n))}function wp(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Zw(n){const e=Jw(),t=Mr(n)?Vr(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function d3(n){let e=oa(n);for(;di(e)&&!cc(e);){if(Zw(e))return e;if(wp(e))return null;e=oa(e)}return null}function Jw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function cc(n){return["html","body","#document"].includes(Tc(n))}function Vr(n){return Kn(n).getComputedStyle(n)}function Ep(n){return Mr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function oa(n){if(Tc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||YA(n)&&n.host||fi(n);return YA(e)?e.host:e}function NN(n){const e=oa(n);return cc(e)?n.ownerDocument?n.ownerDocument.body:n.body:di(e)&&jd(e)?e:NN(e)}function _d(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=NN(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),c=Kn(s);if(o){const d=r_(c);return e.concat(c,c.visualViewport||[],jd(s)?s:[],d&&t?_d(d):[])}return e.concat(s,_d(s,[],t))}function r_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function DN(n){const e=Vr(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=di(n),o=s?n.offsetWidth:t,c=s?n.offsetHeight:r,d=Tm(t)!==o||Tm(r)!==c;return d&&(t=o,r=c),{width:t,height:r,$:d}}function eE(n){return Mr(n)?n:n.contextElement}function Kl(n){const e=eE(n);if(!di(e))return ai(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=DN(e);let c=(o?Tm(t.width):t.width)/r,d=(o?Tm(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const f3=ai(0);function PN(n){const e=Kn(n);return!Jw()||!e.visualViewport?f3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function h3(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Kn(n)?!1:e}function xo(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=eE(n);let c=ai(1);e&&(r?Mr(r)&&(c=Kl(r)):c=Kl(n));const d=h3(o,t,r)?PN(o):ai(0);let f=(s.left+d.x)/c.x,m=(s.top+d.y)/c.y,y=s.width/c.x,v=s.height/c.y;if(o){const w=Kn(o),b=r&&Mr(r)?Kn(r):r;let A=w,I=r_(A);for(;I&&r&&b!==A;){const x=Kl(I),C=I.getBoundingClientRect(),M=Vr(I),k=C.left+(I.clientLeft+parseFloat(M.paddingLeft))*x.x,$=C.top+(I.clientTop+parseFloat(M.paddingTop))*x.y;f*=x.x,m*=x.y,y*=x.x,v*=x.y,f+=k,m+=$,A=Kn(I),I=r_(A)}}return Am({width:y,height:v,x:f,y:m})}function tE(n,e){const t=Ep(n).scrollLeft;return e?e.left+t:xo(fi(n)).left+t}function ON(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:tE(n,r)),o=r.top+e.scrollTop;return{x:s,y:o}}function m3(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",c=fi(r),d=e?wp(e.floating):!1;if(r===c||d&&o)return t;let f={scrollLeft:0,scrollTop:0},m=ai(1);const y=ai(0),v=di(r);if((v||!v&&!o)&&((Tc(r)!=="body"||jd(c))&&(f=Ep(r)),di(r))){const b=xo(r);m=Kl(r),y.x=b.x+r.clientLeft,y.y=b.y+r.clientTop}const w=c&&!v&&!o?ON(c,f,!0):ai(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-f.scrollLeft*m.x+y.x+w.x,y:t.y*m.y-f.scrollTop*m.y+y.y+w.y}}function p3(n){return Array.from(n.getClientRects())}function g3(n){const e=fi(n),t=Ep(n),r=n.ownerDocument.body,s=Hn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Hn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+tE(n);const d=-t.scrollTop;return Vr(r).direction==="rtl"&&(c+=Hn(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:c,y:d}}function y3(n,e){const t=Kn(n),r=fi(n),s=t.visualViewport;let o=r.clientWidth,c=r.clientHeight,d=0,f=0;if(s){o=s.width,c=s.height;const m=Jw();(!m||m&&e==="fixed")&&(d=s.offsetLeft,f=s.offsetTop)}return{width:o,height:c,x:d,y:f}}function v3(n,e){const t=xo(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=di(n)?Kl(n):ai(1),c=n.clientWidth*o.x,d=n.clientHeight*o.y,f=s*o.x,m=r*o.y;return{width:c,height:d,x:f,y:m}}function QA(n,e,t){let r;if(e==="viewport")r=y3(n,t);else if(e==="document")r=g3(fi(n));else if(Mr(e))r=v3(e,t);else{const s=PN(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Am(r)}function MN(n,e){const t=oa(n);return t===e||!Mr(t)||cc(t)?!1:Vr(t).position==="fixed"||MN(t,e)}function _3(n,e){const t=e.get(n);if(t)return t;let r=_d(n,[],!1).filter(d=>Mr(d)&&Tc(d)!=="body"),s=null;const o=Vr(n).position==="fixed";let c=o?oa(n):n;for(;Mr(c)&&!cc(c);){const d=Vr(c),f=Zw(c);!f&&d.position==="fixed"&&(s=null),(o?!f&&!s:!f&&d.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||jd(c)&&!f&&MN(n,c))?r=r.filter(y=>y!==c):s=d,c=oa(c)}return e.set(n,r),r}function w3(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const c=[...t==="clippingAncestors"?wp(e)?[]:_3(e,this._c):[].concat(t),r],d=c[0],f=c.reduce((m,y)=>{const v=QA(e,y,s);return m.top=Hn(v.top,m.top),m.right=sa(v.right,m.right),m.bottom=sa(v.bottom,m.bottom),m.left=Hn(v.left,m.left),m},QA(e,d,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function E3(n){const{width:e,height:t}=DN(n);return{width:e,height:t}}function b3(n,e,t){const r=di(e),s=fi(e),o=t==="fixed",c=xo(n,!0,o,e);let d={scrollLeft:0,scrollTop:0};const f=ai(0);if(r||!r&&!o)if((Tc(e)!=="body"||jd(s))&&(d=Ep(e)),r){const w=xo(e,!0,o,e);f.x=w.x+e.clientLeft,f.y=w.y+e.clientTop}else s&&(f.x=tE(s));const m=s&&!r&&!o?ON(s,d):ai(0),y=c.left+d.scrollLeft-f.x-m.x,v=c.top+d.scrollTop-f.y-m.y;return{x:y,y:v,width:c.width,height:c.height}}function tv(n){return Vr(n).position==="static"}function WA(n,e){if(!di(n)||Vr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return fi(n)===t&&(t=t.ownerDocument.body),t}function VN(n,e){const t=Kn(n);if(wp(n))return t;if(!di(n)){let s=oa(n);for(;s&&!cc(s);){if(Mr(s)&&!tv(s))return s;s=oa(s)}return t}let r=WA(n,e);for(;r&&u3(r)&&tv(r);)r=WA(r,e);return r&&cc(r)&&tv(r)&&!Zw(r)?t:r||d3(n)||t}const T3=async function(n){const e=this.getOffsetParent||VN,t=this.getDimensions,r=await t(n.floating);return{reference:b3(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function S3(n){return Vr(n).direction==="rtl"}const A3={convertOffsetParentRelativeRectToViewportRelativeRect:m3,getDocumentElement:fi,getClippingRect:w3,getOffsetParent:VN,getElementRects:T3,getClientRects:p3,getDimensions:E3,getScale:Kl,isElement:Mr,isRTL:S3};function kN(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function I3(n,e){let t=null,r;const s=fi(n);function o(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function c(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),o();const m=n.getBoundingClientRect(),{left:y,top:v,width:w,height:b}=m;if(d||e(),!w||!b)return;const A=bh(v),I=bh(s.clientWidth-(y+w)),x=bh(s.clientHeight-(v+b)),C=bh(y),k={rootMargin:-A+"px "+-I+"px "+-x+"px "+-C+"px",threshold:Hn(0,sa(1,f))||1};let $=!0;function G(Y){const V=Y[0].intersectionRatio;if(V!==f){if(!$)return c();V?c(!1,V):r=setTimeout(()=>{c(!1,1e-7)},1e3)}V===1&&!kN(m,n.getBoundingClientRect())&&c(),$=!1}try{t=new IntersectionObserver(G,{...k,root:s.ownerDocument})}catch{t=new IntersectionObserver(G,k)}t.observe(n)}return c(!0),o}function R3(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=eE(n),y=s||o?[...m?_d(m):[],..._d(e)]:[];y.forEach(C=>{s&&C.addEventListener("scroll",t,{passive:!0}),o&&C.addEventListener("resize",t)});const v=m&&d?I3(m,t):null;let w=-1,b=null;c&&(b=new ResizeObserver(C=>{let[M]=C;M&&M.target===m&&b&&(b.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var k;(k=b)==null||k.observe(e)})),t()}),m&&!f&&b.observe(m),b.observe(e));let A,I=f?xo(n):null;f&&x();function x(){const C=xo(n);I&&!kN(I,C)&&t(),I=C,A=requestAnimationFrame(x)}return t(),()=>{var C;y.forEach(M=>{s&&M.removeEventListener("scroll",t),o&&M.removeEventListener("resize",t)}),v==null||v(),(C=b)==null||C.disconnect(),b=null,f&&cancelAnimationFrame(A)}}const x3=a3,C3=o3,N3=r3,D3=c3,P3=i3,XA=n3,O3=l3,M3=(n,e,t)=>{const r=new Map,s={platform:A3,...t},o={...s.platform,_c:r};return t3(n,e,{...s,platform:o})};var Gh=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Im(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Im(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!Im(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function LN(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function ZA(n,e){const t=LN(n);return Math.round(e*t)/t}function nv(n){const e=E.useRef(n);return Gh(()=>{e.current=n}),e}function V3(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:c}={},transform:d=!0,whileElementsMounted:f,open:m}=n,[y,v]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[w,b]=E.useState(r);Im(w,r)||b(r);const[A,I]=E.useState(null),[x,C]=E.useState(null),M=E.useCallback(se=>{se!==Y.current&&(Y.current=se,I(se))},[]),k=E.useCallback(se=>{se!==V.current&&(V.current=se,C(se))},[]),$=o||A,G=c||x,Y=E.useRef(null),V=E.useRef(null),P=E.useRef(y),D=f!=null,U=nv(f),B=nv(s),z=nv(m),L=E.useCallback(()=>{if(!Y.current||!V.current)return;const se={placement:e,strategy:t,middleware:w};B.current&&(se.platform=B.current),M3(Y.current,V.current,se).then(ye=>{const F={...ye,isPositioned:z.current!==!1};le.current&&!Im(P.current,F)&&(P.current=F,hc.flushSync(()=>{v(F)}))})},[w,e,t,B,z]);Gh(()=>{m===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,v(se=>({...se,isPositioned:!1})))},[m]);const le=E.useRef(!1);Gh(()=>(le.current=!0,()=>{le.current=!1}),[]),Gh(()=>{if($&&(Y.current=$),G&&(V.current=G),$&&G){if(U.current)return U.current($,G,L);L()}},[$,G,L,U,D]);const Ee=E.useMemo(()=>({reference:Y,floating:V,setReference:M,setFloating:k}),[M,k]),Z=E.useMemo(()=>({reference:$,floating:G}),[$,G]),de=E.useMemo(()=>{const se={position:t,left:0,top:0};if(!Z.floating)return se;const ye=ZA(Z.floating,y.x),F=ZA(Z.floating,y.y);return d?{...se,transform:"translate("+ye+"px, "+F+"px)",...LN(Z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ye,top:F}},[t,d,Z.floating,y.x,y.y]);return E.useMemo(()=>({...y,update:L,refs:Ee,elements:Z,floatingStyles:de}),[y,L,Ee,Z,de])}const k3=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?XA({element:r.current,padding:s}).fn(t):{}:r?XA({element:r,padding:s}).fn(t):{}}}},L3=(n,e)=>({...x3(n),options:[n,e]}),U3=(n,e)=>({...C3(n),options:[n,e]}),j3=(n,e)=>({...O3(n),options:[n,e]}),B3=(n,e)=>({...N3(n),options:[n,e]}),F3=(n,e)=>({...D3(n),options:[n,e]}),z3=(n,e)=>({...P3(n),options:[n,e]}),q3=(n,e)=>({...k3(n),options:[n,e]});var H3="Arrow",UN=E.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...o}=n;return R.jsx(et.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:R.jsx("polygon",{points:"0,0 30,0 15,10"})})});UN.displayName=H3;var G3=UN,nE="Popper",[jN,BN]=pa(nE),[$3,FN]=jN(nE),zN=n=>{const{__scopePopper:e,children:t}=n,[r,s]=E.useState(null);return R.jsx($3,{scope:e,anchor:r,onAnchorChange:s,children:t})};zN.displayName=nE;var qN="PopperAnchor",HN=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,o=FN(qN,t),c=E.useRef(null),d=vt(e,c);return E.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:R.jsx(et.div,{...s,ref:d})});HN.displayName=qN;var rE="PopperContent",[K3,Y3]=jN(rE),GN=E.forwardRef((n,e)=>{var pe,be,Be,Ce,Ve,qe;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:f=!0,collisionBoundary:m=[],collisionPadding:y=0,sticky:v="partial",hideWhenDetached:w=!1,updatePositionStrategy:b="optimized",onPlaced:A,...I}=n,x=FN(rE,t),[C,M]=E.useState(null),k=vt(e,ft=>M(ft)),[$,G]=E.useState(null),Y=zw($),V=(Y==null?void 0:Y.width)??0,P=(Y==null?void 0:Y.height)??0,D=r+(o!=="center"?"-"+o:""),U=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},B=Array.isArray(m)?m:[m],z=B.length>0,L={padding:U,boundary:B.filter(W3),altBoundary:z},{refs:le,floatingStyles:Ee,placement:Z,isPositioned:de,middlewareData:se}=V3({strategy:"fixed",placement:D,whileElementsMounted:(...ft)=>R3(...ft,{animationFrame:b==="always"}),elements:{reference:x.anchor},middleware:[L3({mainAxis:s+P,alignmentAxis:c}),f&&U3({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?j3():void 0,...L}),f&&B3({...L}),F3({...L,apply:({elements:ft,rects:Ut,availableWidth:xn,availableHeight:vn})=>{const{width:vr,height:es}=Ut.reference,_r=ft.floating.style;_r.setProperty("--radix-popper-available-width",`${xn}px`),_r.setProperty("--radix-popper-available-height",`${vn}px`),_r.setProperty("--radix-popper-anchor-width",`${vr}px`),_r.setProperty("--radix-popper-anchor-height",`${es}px`)}}),$&&q3({element:$,padding:d}),X3({arrowWidth:V,arrowHeight:P}),w&&z3({strategy:"referenceHidden",...L})]}),[ye,F]=YN(Z),ae=Vn(A);yn(()=>{de&&(ae==null||ae())},[de,ae]);const ve=(pe=se.arrow)==null?void 0:pe.x,he=(be=se.arrow)==null?void 0:be.y,ee=((Be=se.arrow)==null?void 0:Be.centerOffset)!==0,[fe,we]=E.useState();return yn(()=>{C&&we(window.getComputedStyle(C).zIndex)},[C]),R.jsx("div",{ref:le.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ee,transform:de?Ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(Ce=se.transformOrigin)==null?void 0:Ce.x,(Ve=se.transformOrigin)==null?void 0:Ve.y].join(" "),...((qe=se.hide)==null?void 0:qe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:R.jsx(K3,{scope:t,placedSide:ye,onArrowChange:G,arrowX:ve,arrowY:he,shouldHideArrow:ee,children:R.jsx(et.div,{"data-side":ye,"data-align":F,...I,ref:k,style:{...I.style,animation:de?void 0:"none"}})})})});GN.displayName=rE;var $N="PopperArrow",Q3={top:"bottom",right:"left",bottom:"top",left:"right"},KN=E.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,o=Y3($N,r),c=Q3[o.placedSide];return R.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:R.jsx(G3,{...s,ref:t,style:{...s.style,display:"block"}})})});KN.displayName=$N;function W3(n){return n!==null}var X3=n=>({name:"transformOrigin",options:n,fn(e){var x,C,M;const{placement:t,rects:r,middlewareData:s}=e,c=((x=s.arrow)==null?void 0:x.centerOffset)!==0,d=c?0:n.arrowWidth,f=c?0:n.arrowHeight,[m,y]=YN(t),v={start:"0%",center:"50%",end:"100%"}[y],w=(((C=s.arrow)==null?void 0:C.x)??0)+d/2,b=(((M=s.arrow)==null?void 0:M.y)??0)+f/2;let A="",I="";return m==="bottom"?(A=c?v:`${w}px`,I=`${-f}px`):m==="top"?(A=c?v:`${w}px`,I=`${r.floating.height+f}px`):m==="right"?(A=`${-f}px`,I=c?v:`${b}px`):m==="left"&&(A=`${r.floating.width+f}px`,I=c?v:`${b}px`),{data:{x:A,y:I}}}});function YN(n){const[e,t="center"]=n.split("-");return[e,t]}var Z3=zN,J3=HN,e5=GN,t5=KN,n5=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Pl=new WeakMap,Th=new WeakMap,Sh={},rv=0,QN=function(n){return n&&(n.host||QN(n.parentNode))},r5=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=QN(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},i5=function(n,e,t,r){var s=r5(e,Array.isArray(n)?n:[n]);Sh[t]||(Sh[t]=new WeakMap);var o=Sh[t],c=[],d=new Set,f=new Set(s),m=function(v){!v||d.has(v)||(d.add(v),m(v.parentNode))};s.forEach(m);var y=function(v){!v||f.has(v)||Array.prototype.forEach.call(v.children,function(w){if(d.has(w))y(w);else try{var b=w.getAttribute(r),A=b!==null&&b!=="false",I=(Pl.get(w)||0)+1,x=(o.get(w)||0)+1;Pl.set(w,I),o.set(w,x),c.push(w),I===1&&A&&Th.set(w,!0),x===1&&w.setAttribute(t,"true"),A||w.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",w,C)}})};return y(e),d.clear(),rv++,function(){c.forEach(function(v){var w=Pl.get(v)-1,b=o.get(v)-1;Pl.set(v,w),o.set(v,b),w||(Th.has(v)||v.removeAttribute(r),Th.delete(v)),b||v.removeAttribute(t)}),rv--,rv||(Pl=new WeakMap,Pl=new WeakMap,Th=new WeakMap,Sh={})}},s5=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=n5(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),i5(r,s,t,"aria-hidden")):function(){return null}},$h="right-scroll-bar-position",Kh="width-before-scroll-bar",a5="with-scroll-bars-hidden",o5="--removed-body-scroll-bar-size";function iv(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function l5(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var c5=typeof window<"u"?E.useLayoutEffect:E.useEffect,JA=new WeakMap;function u5(n,e){var t=l5(null,function(r){return n.forEach(function(s){return iv(s,r)})});return c5(function(){var r=JA.get(t);if(r){var s=new Set(r),o=new Set(n),c=t.current;s.forEach(function(d){o.has(d)||iv(d,null)}),o.forEach(function(d){s.has(d)||iv(d,c)})}JA.set(t,n)},[n]),t}function d5(n){return n}function f5(n,e){e===void 0&&(e=d5);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var c=e(o,r);return t.push(c),function(){t=t.filter(function(d){return d!==c})}},assignSyncMedium:function(o){for(r=!0;t.length;){var c=t;t=[],c.forEach(o)}t={push:function(d){return o(d)},filter:function(){return t}}},assignMedium:function(o){r=!0;var c=[];if(t.length){var d=t;t=[],d.forEach(o),c=t}var f=function(){var y=c;c=[],y.forEach(o)},m=function(){return Promise.resolve().then(f)};m(),t={push:function(y){c.push(y),m()},filter:function(y){return c=c.filter(y),t}}}};return s}function h5(n){n===void 0&&(n={});var e=f5(null);return e.options=ti({async:!0,ssr:!1},n),e}var WN=function(n){var e=n.sideCar,t=Td(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,ti({},t))};WN.isSideCarExport=!0;function m5(n,e){return n.useMedium(e),WN}var XN=h5(),sv=function(){},bp=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:sv,onWheelCapture:sv,onTouchMoveCapture:sv}),s=r[0],o=r[1],c=n.forwardProps,d=n.children,f=n.className,m=n.removeScrollBar,y=n.enabled,v=n.shards,w=n.sideCar,b=n.noIsolation,A=n.inert,I=n.allowPinchZoom,x=n.as,C=x===void 0?"div":x,M=n.gapMode,k=Td(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),$=w,G=u5([t,e]),Y=ti(ti({},k),s);return E.createElement(E.Fragment,null,y&&E.createElement($,{sideCar:XN,removeScrollBar:m,shards:v,noIsolation:b,inert:A,setCallbacks:o,allowPinchZoom:!!I,lockRef:t,gapMode:M}),c?E.cloneElement(E.Children.only(d),ti(ti({},Y),{ref:G})):E.createElement(C,ti({},Y,{className:f,ref:G}),d))});bp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bp.classNames={fullWidth:Kh,zeroRight:$h};var p5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function g5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=p5();return e&&n.setAttribute("nonce",e),n}function y5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function v5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var _5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=g5())&&(y5(e,t),v5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},w5=function(){var n=_5();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},ZN=function(){var n=w5(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},E5={left:0,top:0,right:0,gap:0},av=function(n){return parseInt(n||"",10)||0},b5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[av(t),av(r),av(s)]},T5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return E5;var e=b5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},S5=ZN(),Yl="data-scroll-locked",A5=function(n,e,t,r){var s=n.left,o=n.top,c=n.right,d=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(a5,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(d,"px ").concat(r,`;
  }
  body[`).concat(Yl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(d,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($h,` {
    right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(Kh,` {
    margin-right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat($h," .").concat($h,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Kh," .").concat(Kh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Yl,`] {
    `).concat(o5,": ").concat(d,`px;
  }
`)},eI=function(){var n=parseInt(document.body.getAttribute(Yl)||"0",10);return isFinite(n)?n:0},I5=function(){E.useEffect(function(){return document.body.setAttribute(Yl,(eI()+1).toString()),function(){var n=eI()-1;n<=0?document.body.removeAttribute(Yl):document.body.setAttribute(Yl,n.toString())}},[])},R5=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;I5();var o=E.useMemo(function(){return T5(s)},[s]);return E.createElement(S5,{styles:A5(o,!e,s,t?"":"!important")})},i_=!1;if(typeof window<"u")try{var Ah=Object.defineProperty({},"passive",{get:function(){return i_=!0,!0}});window.addEventListener("test",Ah,Ah),window.removeEventListener("test",Ah,Ah)}catch{i_=!1}var Ol=i_?{passive:!1}:!1,x5=function(n){return n.tagName==="TEXTAREA"},JN=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!x5(n)&&t[e]==="visible")},C5=function(n){return JN(n,"overflowY")},N5=function(n){return JN(n,"overflowX")},tI=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=eD(n,r);if(s){var o=tD(n,r),c=o[1],d=o[2];if(c>d)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},D5=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},P5=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},eD=function(n,e){return n==="v"?C5(e):N5(e)},tD=function(n,e){return n==="v"?D5(e):P5(e)},O5=function(n,e){return n==="h"&&e==="rtl"?-1:1},M5=function(n,e,t,r,s){var o=O5(n,window.getComputedStyle(e).direction),c=o*r,d=t.target,f=e.contains(d),m=!1,y=c>0,v=0,w=0;do{var b=tD(n,d),A=b[0],I=b[1],x=b[2],C=I-x-o*A;(A||C)&&eD(n,d)&&(v+=C,w+=A),d instanceof ShadowRoot?d=d.host:d=d.parentNode}while(!f&&d!==document.body||f&&(e.contains(d)||e===d));return(y&&Math.abs(v)<1||!y&&Math.abs(w)<1)&&(m=!0),m},Ih=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},nI=function(n){return[n.deltaX,n.deltaY]},rI=function(n){return n&&"current"in n?n.current:n},V5=function(n,e){return n[0]===e[0]&&n[1]===e[1]},k5=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},L5=0,Ml=[];function U5(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),s=E.useState(L5++)[0],o=E.useState(ZN)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var I=kV([n.lockRef.current],(n.shards||[]).map(rI),!0).filter(Boolean);return I.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),I.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var d=E.useCallback(function(I,x){if("touches"in I&&I.touches.length===2||I.type==="wheel"&&I.ctrlKey)return!c.current.allowPinchZoom;var C=Ih(I),M=t.current,k="deltaX"in I?I.deltaX:M[0]-C[0],$="deltaY"in I?I.deltaY:M[1]-C[1],G,Y=I.target,V=Math.abs(k)>Math.abs($)?"h":"v";if("touches"in I&&V==="h"&&Y.type==="range")return!1;var P=tI(V,Y);if(!P)return!0;if(P?G=V:(G=V==="v"?"h":"v",P=tI(V,Y)),!P)return!1;if(!r.current&&"changedTouches"in I&&(k||$)&&(r.current=G),!G)return!0;var D=r.current||G;return M5(D,x,I,D==="h"?k:$)},[]),f=E.useCallback(function(I){var x=I;if(!(!Ml.length||Ml[Ml.length-1]!==o)){var C="deltaY"in x?nI(x):Ih(x),M=e.current.filter(function(G){return G.name===x.type&&(G.target===x.target||x.target===G.shadowParent)&&V5(G.delta,C)})[0];if(M&&M.should){x.cancelable&&x.preventDefault();return}if(!M){var k=(c.current.shards||[]).map(rI).filter(Boolean).filter(function(G){return G.contains(x.target)}),$=k.length>0?d(x,k[0]):!c.current.noIsolation;$&&x.cancelable&&x.preventDefault()}}},[]),m=E.useCallback(function(I,x,C,M){var k={name:I,delta:x,target:C,should:M,shadowParent:j5(C)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function($){return $!==k})},1)},[]),y=E.useCallback(function(I){t.current=Ih(I),r.current=void 0},[]),v=E.useCallback(function(I){m(I.type,nI(I),I.target,d(I,n.lockRef.current))},[]),w=E.useCallback(function(I){m(I.type,Ih(I),I.target,d(I,n.lockRef.current))},[]);E.useEffect(function(){return Ml.push(o),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:w}),document.addEventListener("wheel",f,Ol),document.addEventListener("touchmove",f,Ol),document.addEventListener("touchstart",y,Ol),function(){Ml=Ml.filter(function(I){return I!==o}),document.removeEventListener("wheel",f,Ol),document.removeEventListener("touchmove",f,Ol),document.removeEventListener("touchstart",y,Ol)}},[]);var b=n.removeScrollBar,A=n.inert;return E.createElement(E.Fragment,null,A?E.createElement(o,{styles:k5(s)}):null,b?E.createElement(R5,{gapMode:n.gapMode}):null)}function j5(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const B5=m5(XN,U5);var nD=E.forwardRef(function(n,e){return E.createElement(bp,ti({},n,{ref:e,sideCar:B5}))});nD.classNames=bp.classNames;var F5=[" ","Enter","ArrowUp","ArrowDown"],z5=[" ","Enter"],Bd="Select",[Tp,Sp,q5]=Nw(Bd),[Sc,x7]=pa(Bd,[q5,BN]),Ap=BN(),[H5,ga]=Sc(Bd),[G5,$5]=Sc(Bd),rD=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:o,value:c,defaultValue:d,onValueChange:f,dir:m,name:y,autoComplete:v,disabled:w,required:b,form:A}=n,I=Ap(e),[x,C]=E.useState(null),[M,k]=E.useState(null),[$,G]=E.useState(!1),Y=$w(m),[V=!1,P]=lc({prop:r,defaultProp:s,onChange:o}),[D,U]=lc({prop:c,defaultProp:d,onChange:f}),B=E.useRef(null),z=x?A||!!x.closest("form"):!0,[L,le]=E.useState(new Set),Ee=Array.from(L).map(Z=>Z.props.value).join(";");return R.jsx(Z3,{...I,children:R.jsxs(H5,{required:b,scope:e,trigger:x,onTriggerChange:C,valueNode:M,onValueNodeChange:k,valueNodeHasChildren:$,onValueNodeHasChildrenChange:G,contentId:yp(),value:D,onValueChange:U,open:V,onOpenChange:P,dir:Y,triggerPointerDownPosRef:B,disabled:w,children:[R.jsx(Tp.Provider,{scope:e,children:R.jsx(G5,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(Z=>{le(de=>new Set(de).add(Z))},[]),onNativeOptionRemove:E.useCallback(Z=>{le(de=>{const se=new Set(de);return se.delete(Z),se})},[]),children:t})}),z?R.jsxs(AD,{"aria-hidden":!0,required:b,tabIndex:-1,name:y,autoComplete:v,value:D,onChange:Z=>U(Z.target.value),disabled:w,form:A,children:[D===void 0?R.jsx("option",{value:""}):null,Array.from(L)]},Ee):null]})})};rD.displayName=Bd;var iD="SelectTrigger",sD=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,o=Ap(t),c=ga(iD,t),d=c.disabled||r,f=vt(e,c.onTriggerChange),m=Sp(t),y=E.useRef("touch"),[v,w,b]=ID(I=>{const x=m().filter(k=>!k.disabled),C=x.find(k=>k.value===c.value),M=RD(x,I,C);M!==void 0&&c.onValueChange(M.value)}),A=I=>{d||(c.onOpenChange(!0),b()),I&&(c.triggerPointerDownPosRef.current={x:Math.round(I.pageX),y:Math.round(I.pageY)})};return R.jsx(J3,{asChild:!0,...o,children:R.jsx(et.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":SD(c.value)?"":void 0,...s,ref:f,onClick:je(s.onClick,I=>{I.currentTarget.focus(),y.current!=="mouse"&&A(I)}),onPointerDown:je(s.onPointerDown,I=>{y.current=I.pointerType;const x=I.target;x.hasPointerCapture(I.pointerId)&&x.releasePointerCapture(I.pointerId),I.button===0&&I.ctrlKey===!1&&I.pointerType==="mouse"&&(A(I),I.preventDefault())}),onKeyDown:je(s.onKeyDown,I=>{const x=v.current!=="";!(I.ctrlKey||I.altKey||I.metaKey)&&I.key.length===1&&w(I.key),!(x&&I.key===" ")&&F5.includes(I.key)&&(A(),I.preventDefault())})})})});sD.displayName=iD;var aD="SelectValue",oD=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:o,placeholder:c="",...d}=n,f=ga(aD,t),{onValueNodeHasChildrenChange:m}=f,y=o!==void 0,v=vt(e,f.onValueNodeChange);return yn(()=>{m(y)},[m,y]),R.jsx(et.span,{...d,ref:v,style:{pointerEvents:"none"},children:SD(f.value)?R.jsx(R.Fragment,{children:c}):o})});oD.displayName=aD;var K5="SelectIcon",lD=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return R.jsx(et.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});lD.displayName=K5;var Y5="SelectPortal",cD=n=>R.jsx(Pw,{asChild:!0,...n});cD.displayName=Y5;var Co="SelectContent",uD=E.forwardRef((n,e)=>{const t=ga(Co,n.__scopeSelect),[r,s]=E.useState();if(yn(()=>{s(new DocumentFragment)},[]),!t.open){const o=r;return o?hc.createPortal(R.jsx(dD,{scope:n.__scopeSelect,children:R.jsx(Tp.Slot,{scope:n.__scopeSelect,children:R.jsx("div",{children:n.children})})}),o):null}return R.jsx(fD,{...n,ref:e})});uD.displayName=Co;var Ir=10,[dD,ya]=Sc(Co),Q5="SelectContentImpl",fD=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:c,side:d,sideOffset:f,align:m,alignOffset:y,arrowPadding:v,collisionBoundary:w,collisionPadding:b,sticky:A,hideWhenDetached:I,avoidCollisions:x,...C}=n,M=ga(Co,t),[k,$]=E.useState(null),[G,Y]=E.useState(null),V=vt(e,pe=>$(pe)),[P,D]=E.useState(null),[U,B]=E.useState(null),z=Sp(t),[L,le]=E.useState(!1),Ee=E.useRef(!1);E.useEffect(()=>{if(k)return s5(k)},[k]),jz();const Z=E.useCallback(pe=>{const[be,...Be]=z().map(qe=>qe.ref.current),[Ce]=Be.slice(-1),Ve=document.activeElement;for(const qe of pe)if(qe===Ve||(qe==null||qe.scrollIntoView({block:"nearest"}),qe===be&&G&&(G.scrollTop=0),qe===Ce&&G&&(G.scrollTop=G.scrollHeight),qe==null||qe.focus(),document.activeElement!==Ve))return},[z,G]),de=E.useCallback(()=>Z([P,k]),[Z,P,k]);E.useEffect(()=>{L&&de()},[L,de]);const{onOpenChange:se,triggerPointerDownPosRef:ye}=M;E.useEffect(()=>{if(k){let pe={x:0,y:0};const be=Ce=>{var Ve,qe;pe={x:Math.abs(Math.round(Ce.pageX)-(((Ve=ye.current)==null?void 0:Ve.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((qe=ye.current)==null?void 0:qe.y)??0))}},Be=Ce=>{pe.x<=10&&pe.y<=10?Ce.preventDefault():k.contains(Ce.target)||se(!1),document.removeEventListener("pointermove",be),ye.current=null};return ye.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",Be,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",Be,{capture:!0})}}},[k,se,ye]),E.useEffect(()=>{const pe=()=>se(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[se]);const[F,ae]=ID(pe=>{const be=z().filter(Ve=>!Ve.disabled),Be=be.find(Ve=>Ve.ref.current===document.activeElement),Ce=RD(be,pe,Be);Ce&&setTimeout(()=>Ce.ref.current.focus())}),ve=E.useCallback((pe,be,Be)=>{const Ce=!Ee.current&&!Be;(M.value!==void 0&&M.value===be||Ce)&&(D(pe),Ce&&(Ee.current=!0))},[M.value]),he=E.useCallback(()=>k==null?void 0:k.focus(),[k]),ee=E.useCallback((pe,be,Be)=>{const Ce=!Ee.current&&!Be;(M.value!==void 0&&M.value===be||Ce)&&B(pe)},[M.value]),fe=r==="popper"?s_:hD,we=fe===s_?{side:d,sideOffset:f,align:m,alignOffset:y,arrowPadding:v,collisionBoundary:w,collisionPadding:b,sticky:A,hideWhenDetached:I,avoidCollisions:x}:{};return R.jsx(dD,{scope:t,content:k,viewport:G,onViewportChange:Y,itemRefCallback:ve,selectedItem:P,onItemLeave:he,itemTextRefCallback:ee,focusSelectedItem:de,selectedItemText:U,position:r,isPositioned:L,searchRef:F,children:R.jsx(nD,{as:oc,allowPinchZoom:!0,children:R.jsx(IN,{asChild:!0,trapped:M.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:je(s,pe=>{var be;(be=M.trigger)==null||be.focus({preventScroll:!0}),pe.preventDefault()}),children:R.jsx(Dw,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:R.jsx(fe,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:pe=>pe.preventDefault(),...C,...we,onPlaced:()=>le(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:je(C.onKeyDown,pe=>{const be=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!be&&pe.key.length===1&&ae(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let Ce=z().filter(Ve=>!Ve.disabled).map(Ve=>Ve.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const Ve=pe.target,qe=Ce.indexOf(Ve);Ce=Ce.slice(qe+1)}setTimeout(()=>Z(Ce)),pe.preventDefault()}})})})})})})});fD.displayName=Q5;var W5="SelectItemAlignedPosition",hD=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,o=ga(Co,t),c=ya(Co,t),[d,f]=E.useState(null),[m,y]=E.useState(null),v=vt(e,V=>y(V)),w=Sp(t),b=E.useRef(!1),A=E.useRef(!0),{viewport:I,selectedItem:x,selectedItemText:C,focusSelectedItem:M}=c,k=E.useCallback(()=>{if(o.trigger&&o.valueNode&&d&&m&&I&&x&&C){const V=o.trigger.getBoundingClientRect(),P=m.getBoundingClientRect(),D=o.valueNode.getBoundingClientRect(),U=C.getBoundingClientRect();if(o.dir!=="rtl"){const Ve=U.left-P.left,qe=D.left-Ve,ft=V.left-qe,Ut=V.width+ft,xn=Math.max(Ut,P.width),vn=window.innerWidth-Ir,vr=jA(qe,[Ir,Math.max(Ir,vn-xn)]);d.style.minWidth=Ut+"px",d.style.left=vr+"px"}else{const Ve=P.right-U.right,qe=window.innerWidth-D.right-Ve,ft=window.innerWidth-V.right-qe,Ut=V.width+ft,xn=Math.max(Ut,P.width),vn=window.innerWidth-Ir,vr=jA(qe,[Ir,Math.max(Ir,vn-xn)]);d.style.minWidth=Ut+"px",d.style.right=vr+"px"}const B=w(),z=window.innerHeight-Ir*2,L=I.scrollHeight,le=window.getComputedStyle(m),Ee=parseInt(le.borderTopWidth,10),Z=parseInt(le.paddingTop,10),de=parseInt(le.borderBottomWidth,10),se=parseInt(le.paddingBottom,10),ye=Ee+Z+L+se+de,F=Math.min(x.offsetHeight*5,ye),ae=window.getComputedStyle(I),ve=parseInt(ae.paddingTop,10),he=parseInt(ae.paddingBottom,10),ee=V.top+V.height/2-Ir,fe=z-ee,we=x.offsetHeight/2,pe=x.offsetTop+we,be=Ee+Z+pe,Be=ye-be;if(be<=ee){const Ve=B.length>0&&x===B[B.length-1].ref.current;d.style.bottom="0px";const qe=m.clientHeight-I.offsetTop-I.offsetHeight,ft=Math.max(fe,we+(Ve?he:0)+qe+de),Ut=be+ft;d.style.height=Ut+"px"}else{const Ve=B.length>0&&x===B[0].ref.current;d.style.top="0px";const ft=Math.max(ee,Ee+I.offsetTop+(Ve?ve:0)+we)+Be;d.style.height=ft+"px",I.scrollTop=be-ee+I.offsetTop}d.style.margin=`${Ir}px 0`,d.style.minHeight=F+"px",d.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[w,o.trigger,o.valueNode,d,m,I,x,C,o.dir,r]);yn(()=>k(),[k]);const[$,G]=E.useState();yn(()=>{m&&G(window.getComputedStyle(m).zIndex)},[m]);const Y=E.useCallback(V=>{V&&A.current===!0&&(k(),M==null||M(),A.current=!1)},[k,M]);return R.jsx(Z5,{scope:t,contentWrapper:d,shouldExpandOnScrollRef:b,onScrollButtonChange:Y,children:R.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$},children:R.jsx(et.div,{...s,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});hD.displayName=W5;var X5="SelectPopperPosition",s_=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Ir,...o}=n,c=Ap(t);return R.jsx(e5,{...c,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});s_.displayName=X5;var[Z5,iE]=Sc(Co,{}),a_="SelectViewport",mD=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,o=ya(a_,t),c=iE(a_,t),d=vt(e,o.onViewportChange),f=E.useRef(0);return R.jsxs(R.Fragment,{children:[R.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),R.jsx(Tp.Slot,{scope:t,children:R.jsx(et.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:je(s.onScroll,m=>{const y=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:w}=c;if(w!=null&&w.current&&v){const b=Math.abs(f.current-y.scrollTop);if(b>0){const A=window.innerHeight-Ir*2,I=parseFloat(v.style.minHeight),x=parseFloat(v.style.height),C=Math.max(I,x);if(C<A){const M=C+b,k=Math.min(A,M),$=M-k;v.style.height=k+"px",v.style.bottom==="0px"&&(y.scrollTop=$>0?$:0,v.style.justifyContent="flex-end")}}}f.current=y.scrollTop})})})]})});mD.displayName=a_;var pD="SelectGroup",[J5,e7]=Sc(pD),t7=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=yp();return R.jsx(J5,{scope:t,id:s,children:R.jsx(et.div,{role:"group","aria-labelledby":s,...r,ref:e})})});t7.displayName=pD;var gD="SelectLabel",yD=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=e7(gD,t);return R.jsx(et.div,{id:s.id,...r,ref:e})});yD.displayName=gD;var Rm="SelectItem",[n7,vD]=Sc(Rm),_D=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:o,...c}=n,d=ga(Rm,t),f=ya(Rm,t),m=d.value===r,[y,v]=E.useState(o??""),[w,b]=E.useState(!1),A=vt(e,M=>{var k;return(k=f.itemRefCallback)==null?void 0:k.call(f,M,r,s)}),I=yp(),x=E.useRef("touch"),C=()=>{s||(d.onValueChange(r),d.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return R.jsx(n7,{scope:t,value:r,disabled:s,textId:I,isSelected:m,onItemTextChange:E.useCallback(M=>{v(k=>k||((M==null?void 0:M.textContent)??"").trim())},[]),children:R.jsx(Tp.ItemSlot,{scope:t,value:r,disabled:s,textValue:y,children:R.jsx(et.div,{role:"option","aria-labelledby":I,"data-highlighted":w?"":void 0,"aria-selected":m&&w,"data-state":m?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:A,onFocus:je(c.onFocus,()=>b(!0)),onBlur:je(c.onBlur,()=>b(!1)),onClick:je(c.onClick,()=>{x.current!=="mouse"&&C()}),onPointerUp:je(c.onPointerUp,()=>{x.current==="mouse"&&C()}),onPointerDown:je(c.onPointerDown,M=>{x.current=M.pointerType}),onPointerMove:je(c.onPointerMove,M=>{var k;x.current=M.pointerType,s?(k=f.onItemLeave)==null||k.call(f):x.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:je(c.onPointerLeave,M=>{var k;M.currentTarget===document.activeElement&&((k=f.onItemLeave)==null||k.call(f))}),onKeyDown:je(c.onKeyDown,M=>{var $;(($=f.searchRef)==null?void 0:$.current)!==""&&M.key===" "||(z5.includes(M.key)&&C(),M.key===" "&&M.preventDefault())})})})})});_D.displayName=Rm;var Hu="SelectItemText",wD=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...o}=n,c=ga(Hu,t),d=ya(Hu,t),f=vD(Hu,t),m=$5(Hu,t),[y,v]=E.useState(null),w=vt(e,C=>v(C),f.onItemTextChange,C=>{var M;return(M=d.itemTextRefCallback)==null?void 0:M.call(d,C,f.value,f.disabled)}),b=y==null?void 0:y.textContent,A=E.useMemo(()=>R.jsx("option",{value:f.value,disabled:f.disabled,children:b},f.value),[f.disabled,f.value,b]),{onNativeOptionAdd:I,onNativeOptionRemove:x}=m;return yn(()=>(I(A),()=>x(A)),[I,x,A]),R.jsxs(R.Fragment,{children:[R.jsx(et.span,{id:f.textId,...o,ref:w}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?hc.createPortal(o.children,c.valueNode):null]})});wD.displayName=Hu;var ED="SelectItemIndicator",bD=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return vD(ED,t).isSelected?R.jsx(et.span,{"aria-hidden":!0,...r,ref:e}):null});bD.displayName=ED;var o_="SelectScrollUpButton",r7=E.forwardRef((n,e)=>{const t=ya(o_,n.__scopeSelect),r=iE(o_,n.__scopeSelect),[s,o]=E.useState(!1),c=vt(e,r.onScrollButtonChange);return yn(()=>{if(t.viewport&&t.isPositioned){let d=function(){const m=f.scrollTop>0;o(m)};const f=t.viewport;return d(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),s?R.jsx(TD,{...n,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:f}=t;d&&f&&(d.scrollTop=d.scrollTop-f.offsetHeight)}}):null});r7.displayName=o_;var l_="SelectScrollDownButton",i7=E.forwardRef((n,e)=>{const t=ya(l_,n.__scopeSelect),r=iE(l_,n.__scopeSelect),[s,o]=E.useState(!1),c=vt(e,r.onScrollButtonChange);return yn(()=>{if(t.viewport&&t.isPositioned){let d=function(){const m=f.scrollHeight-f.clientHeight,y=Math.ceil(f.scrollTop)<m;o(y)};const f=t.viewport;return d(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),s?R.jsx(TD,{...n,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:f}=t;d&&f&&(d.scrollTop=d.scrollTop+f.offsetHeight)}}):null});i7.displayName=l_;var TD=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,o=ya("SelectScrollButton",t),c=E.useRef(null),d=Sp(t),f=E.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return E.useEffect(()=>()=>f(),[f]),yn(()=>{var y;const m=d().find(v=>v.ref.current===document.activeElement);(y=m==null?void 0:m.ref.current)==null||y.scrollIntoView({block:"nearest"})},[d]),R.jsx(et.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:je(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:je(s.onPointerMove,()=>{var m;(m=o.onItemLeave)==null||m.call(o),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:je(s.onPointerLeave,()=>{f()})})}),s7="SelectSeparator",a7=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return R.jsx(et.div,{"aria-hidden":!0,...r,ref:e})});a7.displayName=s7;var c_="SelectArrow",o7=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Ap(t),o=ga(c_,t),c=ya(c_,t);return o.open&&c.position==="popper"?R.jsx(t5,{...s,...r,ref:e}):null});o7.displayName=c_;function SD(n){return n===""||n===void 0}var AD=E.forwardRef((n,e)=>{const{value:t,...r}=n,s=E.useRef(null),o=vt(e,s),c=Fw(t);return E.useEffect(()=>{const d=s.current,f=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&y){const v=new Event("change",{bubbles:!0});y.call(d,t),d.dispatchEvent(v)}},[c,t]),R.jsx(up,{asChild:!0,children:R.jsx("select",{...r,ref:o,defaultValue:t})})});AD.displayName="BubbleSelect";function ID(n){const e=Vn(n),t=E.useRef(""),r=E.useRef(0),s=E.useCallback(c=>{const d=t.current+c;e(d),function f(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>f(""),1e3))}(d)},[e]),o=E.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,o]}function RD(n,e,t){const s=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let c=l7(n,Math.max(o,0));s.length===1&&(c=c.filter(m=>m!==t));const f=c.find(m=>m.textValue.toLowerCase().startsWith(s.toLowerCase()));return f!==t?f:void 0}function l7(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var c7=rD,xD=sD,u7=oD,d7=lD,f7=cD,CD=uD,h7=mD,ND=yD,DD=_D,m7=wD,p7=bD;const iI=c7,sI=u7,u_=E.forwardRef(({className:n,children:e,...t},r)=>R.jsxs(xD,{ref:r,className:_t("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...t,children:[e,R.jsx(d7,{asChild:!0,children:R.jsx(XB,{className:"h-4 w-4 opacity-50"})})]}));u_.displayName=xD.displayName;const d_=E.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>R.jsx(f7,{children:R.jsx(CD,{ref:s,className:_t("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:R.jsx(h7,{className:_t("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));d_.displayName=CD.displayName;const g7=E.forwardRef(({className:n,...e},t)=>R.jsx(ND,{ref:t,className:_t("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));g7.displayName=ND.displayName;const ro=E.forwardRef(({className:n,children:e,...t},r)=>R.jsxs(DD,{ref:r,className:_t("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[R.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:R.jsx(p7,{children:R.jsx(QB,{className:"h-4 w-4"})})}),R.jsx(m7,{children:e})]}));ro.displayName=DD.displayName;function PD({groupId:n,expenseToEdit:e,onSuccess:t,onCancel:r}){var he;const{user:s}=ma(),{createExpense:o,updateExpense:c,loading:d}=Bw(),{getAllUsers:f}=cp(),{getUserGroups:m}=Ud(),{toast:y}=W1(),[v,w]=E.useState((e==null?void 0:e.description)||""),[b,A]=E.useState((e==null?void 0:e.amount.toString())||""),[I,x]=E.useState((e==null?void 0:e.splitType)||"equal"),[C,M]=E.useState([]),[k,$]=E.useState([]),[G,Y]=E.useState([]),[V,P]=E.useState(n||(e==null?void 0:e.groupId)||"none"),[D,U]=E.useState((e==null?void 0:e.payerId)||""),[B,z]=E.useState((e==null?void 0:e.participants)||[]),[L,le]=E.useState((e==null?void 0:e.splits.reduce((ee,fe)=>({...ee,[fe.userId]:fe.amount}),{}))||{}),[Ee,Z]=E.useState(!0);E.useEffect(()=>{(async()=>{try{Z(!0);const[fe,we]=await Promise.all([f(),m()]);$(fe.filter(pe=>pe.id!==(s==null?void 0:s.uid))),Y(we)}catch(fe){console.error("Failed to load data:",fe),y({title:"Error",description:"Failed to load users and groups",variant:"destructive"})}finally{Z(!1)}})()},[f,m,s==null?void 0:s.uid,y]),E.useEffect(()=>{!e&&(s!=null&&s.uid)&&U(s.uid)},[s==null?void 0:s.uid,e]),E.useEffect(()=>{if(V&&V!=="none"){const ee=G.find(fe=>fe.id===V);ee&&(M(ee.members),e||(z(ee.members),le({})))}else M([]),e||z([])},[V,G,e]);const de=()=>{if(!v.trim())return"Please enter a description";const ee=parseFloat(b);if(isNaN(ee)||ee<=0)return"Please enter a valid amount";if(B.length===0)return"Please select at least one participant";if(I==="custom"&&Object.values(L).reduce((we,pe)=>we+pe,0)===0)return"Total shares must be greater than 0"},se=()=>{const ee=parseFloat(b);if(I==="equal"){const fe=B.length;if(fe===0)return[];const we=ee/fe;return B.map(pe=>({userId:pe,amount:we}))}else{const fe=Object.values(L).reduce((pe,be)=>pe+be,0);if(fe===0)return[];const we=ee/fe;return Object.entries(L).map(([pe,be])=>({userId:pe,amount:be*we}))}},ye=async ee=>{if(ee.preventDefault(),!!s)try{const fe=de();if(fe){y({title:"Validation Error",description:fe,variant:"destructive"});return}const we=parseFloat(b),pe=se(),be={description:v.trim(),amount:we,splitType:I,splits:pe,participants:B,groupId:V==="none"?void 0:V,payerId:D};e?await c(e.id,be):await o(be),y({title:"Success",description:`Expense ${e?"updated":"created"} successfully`}),t==null||t(),e||(w(""),A(""),x("equal"),M([]),z([]),le({}),P("none"),s!=null&&s.uid&&U(s.uid))}catch(fe){console.error(`Failed to ${e?"update":"create"} expense:`,fe);const we=Gw(fe);y({title:"Error",description:we.message,variant:"destructive"})}};if(Ee)return R.jsx("div",{className:"flex justify-center items-center p-8",children:R.jsx("div",{className:"text-muted-foreground",children:"Loading users..."})});const F=ee=>{if(ee===(s==null?void 0:s.uid))return s.displayName+" - "+s.email+" (You)";const fe=k.find(we=>we.id===ee);return fe?fe.displayName+" - "+fe.email:"Unknown User"},ae=Object.values(L).reduce((ee,fe)=>ee+fe,0),ve=ae>0?parseFloat(b)/ae:0;return R.jsxs(ui,{children:[R.jsx(mp,{children:R.jsx(pp,{children:e?"Edit Expense":"Create New Expense"})}),R.jsx(gp,{children:R.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[R.jsx("div",{className:"space-y-2",children:!n&&R.jsxs(R.Fragment,{children:[R.jsx("label",{className:"text-sm font-medium",children:"Group"}),R.jsxs(iI,{value:V,onValueChange:P,children:[R.jsx(u_,{children:R.jsx(sI,{placeholder:"Select a group"})}),R.jsxs(d_,{children:[R.jsx(ro,{value:"none",children:"No group"}),G.map(ee=>R.jsx(ro,{value:ee.id,children:ee.name},ee.id))]})]})]})}),R.jsx("div",{className:"space-y-2",children:R.jsx(Nr,{type:"text",placeholder:"Description",value:v,onChange:ee=>w(ee.target.value),required:!0})}),R.jsx("div",{className:"space-y-2",children:R.jsx(Nr,{type:"number",placeholder:"Amount",value:b,onChange:ee=>A(ee.target.value),min:"0",step:"0.01",required:!0})}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"text-sm font-medium",children:"Payer"}),R.jsxs(iI,{value:D,onValueChange:U,children:[R.jsx(u_,{children:R.jsx(sI,{placeholder:"Select payer"})}),R.jsx(d_,{children:V==="none"?R.jsxs(R.Fragment,{children:[R.jsxs(ro,{value:(s==null?void 0:s.uid)||"",children:[(s==null?void 0:s.displayName)+" - "+(s==null?void 0:s.email)," (You)"]}),k.map(ee=>R.jsx(ro,{value:ee.id,children:(ee==null?void 0:ee.displayName)+" - "+ee.email},ee.id))]}):R.jsxs(R.Fragment,{children:[s&&((he=G.find(ee=>ee.id===V))==null?void 0:he.members.includes(s.uid))&&R.jsxs(ro,{value:s.uid,children:[s.displayName+" - "+s.email," (You)"]}),k.filter(ee=>{var fe;return(fe=G.find(we=>we.id===V))==null?void 0:fe.members.includes(ee.id)}).map(ee=>R.jsx(ro,{value:ee.id,children:(ee==null?void 0:ee.displayName)+" - "+ee.email},ee.id))]})})]})]}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("div",{className:"text-sm font-medium mb-2",children:"Split Type"}),R.jsxs(AN,{value:I,onValueChange:ee=>{x(ee),le({})},className:"flex gap-4",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx(e_,{value:"equal",id:"equal"}),R.jsx("label",{htmlFor:"equal",className:"text-sm",children:"Split Equally"})]}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx(e_,{value:"custom",id:"custom"}),R.jsx("label",{htmlFor:"custom",className:"text-sm",children:"Custom Split"})]})]})]}),R.jsxs("div",{className:"space-y-4",children:[R.jsx("div",{className:"text-sm font-medium",children:I==="equal"?"Participating Members":"Custom Split Shares"}),C.map(ee=>R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("span",{className:"text-sm w-50 truncate",children:F(ee)}),I==="equal"?R.jsx("input",{type:"checkbox",checked:B.includes(ee),onChange:fe=>{fe.target.checked?z([...B,ee]):z(B.filter(we=>we!==ee))},className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}):R.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[R.jsx(Nr,{type:"number",placeholder:"Shares",value:L[ee]||"",onChange:fe=>{const we=parseInt(fe.target.value)||0;le({...L,[ee]:we})},min:"0",step:"1",className:"w-24"}),ve>0&&L[ee]>0&&R.jsxs("span",{className:"text-sm text-muted-foreground",children:["($",(ve*(L[ee]||0)).toFixed(2),")"]})]})]},ee)),I==="custom"&&R.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total shares: ",ae," ($",ve.toFixed(2)," per share)"]})]}),R.jsxs("div",{className:"flex justify-end space-x-2",children:[r&&R.jsxs(mn,{type:"button",variant:"outline",onClick:r,className:"gap-2",children:[R.jsx(uz,{className:"h-4 w-4"}),R.jsx("span",{children:"Cancel"})]}),R.jsx(mn,{type:"submit",disabled:d,className:"gap-2",children:e?R.jsxs(R.Fragment,{children:[R.jsx(lz,{className:"h-4 w-4"}),R.jsx("span",{children:d?"Updating...":"Update Expense"})]}):R.jsxs(R.Fragment,{children:[R.jsx(fz,{className:"h-4 w-4"}),R.jsx("span",{children:d?"Creating...":"Create Expense"})]})})]})]})})]})}function y7({expenses:n,groupId:e}){const{user:t}=ma(),{getUserProfile:r}=cp(),[s,o]=E.useState(!1),[c,d]=E.useState(null),[f,m]=E.useState({});E.useEffect(()=>{(async()=>{const b=new Set;n.forEach(I=>{b.add(I.payerId),I.splits.forEach(x=>b.add(x.userId))});const A={};await Promise.all(Array.from(b).map(async I=>{const x=await r(I);x&&(A[I]=x.displayName||x.email)})),m(A)})()},[n,r]);const y=E.useMemo(()=>{const b=[...s?n.filter(I=>I.payerId===(t==null?void 0:t.uid)||I.splits.some(x=>x.userId===(t==null?void 0:t.uid))):n].sort((I,x)=>x.createdAt.getTime()-I.createdAt.getTime()),A=new Map;return b.forEach(I=>{var C;const x=I.createdAt.toLocaleString("default",{month:"long",year:"numeric"});A.has(x)||A.set(x,[]),(C=A.get(x))==null||C.push(I)}),Array.from(A.entries())},[n,s,t==null?void 0:t.uid]),v=w=>{var b;return w.payerId===(t==null?void 0:t.uid)?w.splits.filter(A=>A.userId!==t.uid).reduce((A,I)=>A+I.amount,0):((b=w.splits.find(A=>A.userId===(t==null?void 0:t.uid)))==null?void 0:b.amount)||0};return R.jsxs(ui,{children:[R.jsxs(mp,{className:"flex flex-row items-center justify-between",children:[R.jsx(pp,{children:"Expenses"}),R.jsx("div",{className:"flex items-center space-x-2",children:R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(sN,{id:"show-involved",checked:s,onCheckedChange:o,"aria-label":"Toggle show involved expenses only"}),R.jsx(J1,{htmlFor:"show-involved",children:"Show involved only"})]})})]}),R.jsx(gp,{children:R.jsxs("div",{className:"space-y-8",children:[y.map(([w,b])=>R.jsxs("div",{className:"space-y-4",children:[R.jsx("h3",{className:"text-sm font-medium text-muted-foreground px-4",children:w}),b.map(A=>{const I=A.payerId===(t==null?void 0:t.uid)||A.splits.some(M=>M.userId===(t==null?void 0:t.uid)),x=v(A),C=A.payerId===(t==null?void 0:t.uid);return R.jsxs("div",{onClick:()=>d(A),className:`flex flex-col p-4 rounded-lg border ${I?"bg-blue-50/50 border-blue-100":"bg-card"} text-card-foreground shadow-sm cursor-pointer transition-colors hover:bg-blue-50/80`,role:"button",tabIndex:0,onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&d(A)},"aria-label":`Edit expense: ${A.description}`,children:[R.jsxs("div",{className:"flex justify-between items-start",children:[R.jsxs("div",{className:"space-y-1",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("p",{className:"font-medium",children:A.description}),I&&R.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded-full",children:"Involved"})]}),R.jsx("div",{className:"text-sm text-muted-foreground",children:A.createdAt.toLocaleString("default",{dateStyle:"medium",timeStyle:"short"})})]}),R.jsxs("div",{className:"text-right",children:[R.jsxs("p",{className:"font-medium",children:["Total: $",A.amount.toFixed(2)]}),I&&R.jsxs("p",{className:`text-sm ${C?"text-green-600":"text-red-600"}`,children:[C?"You lent":"You borrowed",": $",x.toFixed(2)]})]})]}),R.jsxs("div",{className:"mt-2 text-sm",children:[R.jsx("span",{className:"font-medium",children:"Paid by:"})," ",C?R.jsx("span",{className:"text-green-600",children:"You"}):f[A.payerId]||"Unknown"]}),R.jsxs("div",{className:"mt-1 text-sm",children:[R.jsx("span",{className:"font-medium",children:"Split with: "}),A.splits.map((M,k)=>R.jsxs(E.Fragment,{children:[k>0&&", ",M.userId===(t==null?void 0:t.uid)?R.jsxs("span",{className:"text-blue-600",children:["You ($",M.amount.toFixed(2),")"]}):R.jsxs("span",{children:[f[M.userId]||"Unknown"," ($",M.amount.toFixed(2),")"]})]},M.userId))]})]},A.id)})]},w)),y.length===0&&R.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No expenses found"})]})}),c&&R.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>d(null),children:R.jsx("div",{className:"bg-background rounded-lg w-full max-w-2xl",onClick:w=>w.stopPropagation(),children:R.jsx(PD,{groupId:e,expenseToEdit:c,onSuccess:()=>{d(null)},onCancel:()=>d(null)})})})]})}function v7(){const{groupId:n}=vI(),e=No(),{getGroupById:t}=Ud(),{getExpenses:r,calculateBalances:s}=Bw(),[o,c]=E.useState(null),[d,f]=E.useState([]),[m,y]=E.useState([]),[v,w]=E.useState(!0),[b,A]=E.useState(null),I=E.useCallback(async()=>{if(n)try{w(!0),A(null);const[C,M,k]=await Promise.all([t(n),r(n),s(n)]);if(!C)throw new Error("Group not found");c(C),f(M),y(k)}catch(C){console.error("Error loading group data:",C),A("Failed to load group data")}finally{w(!1)}},[n,t,r,s]);if(E.useEffect(()=>{I()},[I]),v)return R.jsx("div",{className:"container px-4 py-8",children:R.jsxs("div",{className:"animate-pulse space-y-4",children:[R.jsx("div",{className:"h-8 w-64 bg-muted rounded"}),R.jsx("div",{className:"h-32 bg-muted rounded"})]})});if(b||!o)return R.jsx("div",{className:"container px-4 py-8",children:R.jsxs("div",{className:"text-center text-destructive",children:[R.jsx("p",{children:b||"Group not found"}),R.jsx(mn,{variant:"outline",onClick:()=>e("/dashboard"),className:"mt-4",children:"Back to Dashboard"})]})});const x=d.reduce((C,M)=>C+M.amount,0);return R.jsxs("div",{className:"min-h-screen bg-background",children:[R.jsx("header",{className:"border-b",children:R.jsxs("div",{className:"container flex h-16 items-center px-4",children:[R.jsx(mn,{variant:"ghost",onClick:()=>e("/dashboard"),className:"mr-4",children:"← Back"}),R.jsx("h1",{className:"text-lg font-semibold",children:o.name}),R.jsx("div",{className:"ml-auto flex items-center space-x-4",children:R.jsx(mn,{onClick:()=>e(`/groups/${n}/expense/new`),className:"bg-green-600 hover:bg-green-700",children:"Add Expense"})})]})}),R.jsx("main",{className:"container px-4 py-8",children:R.jsxs("div",{className:"grid gap-8 md:grid-cols-[2fr_1fr]",children:[R.jsxs("div",{className:"space-y-6",children:[R.jsxs(ui,{className:"p-6",children:[R.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Group Summary"}),R.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Expenses"}),R.jsxs("p",{className:"text-2xl font-bold",children:["$",x.toFixed(2)]})]}),R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-muted-foreground",children:"Members"}),R.jsx("p",{className:"text-2xl font-bold",children:o.members.length})]})]})]}),R.jsx(y7,{expenses:d})]}),R.jsx("div",{children:R.jsxs(ui,{className:"p-6",children:[R.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Balances"}),R.jsx("div",{className:"space-y-3",children:m.map(C=>R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsx("span",{className:"text-sm",children:C.displayName||C.email}),R.jsx("span",{className:`font-medium ${C.balance>0?"text-green-600":C.balance<0?"text-red-600":""}`,children:C.balance>0?`Owes $${C.balance.toFixed(2)}`:C.balance<0?`Owed $${Math.abs(C.balance).toFixed(2)}`:"Settled"})]},C.userId))})]})})]})})]})}function _7(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[s,o]=E.useState(!1),[c,d]=E.useState(""),{signIn:f,user:m}=ma(),y=No(),v=async w=>{if(w.preventDefault(),d(""),!n.trim()){d("Please enter your email");return}if(!t){d("Please enter your password");return}try{o(!0),await f(n,t)}catch(b){console.error("Login error:",b);const A=Gw(b);d(A.message)}finally{o(!1)}};return E.useEffect(()=>{m&&y("/dashboard")},[m,y]),R.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-4",children:R.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[R.jsxs("div",{className:"space-y-2 text-center",children:[R.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Welcome back"}),R.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your credentials to sign in"})]}),R.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c&&R.jsx("div",{className:"text-sm text-destructive text-center",children:c}),R.jsx("div",{className:"space-y-2",children:R.jsx(Nr,{type:"email",placeholder:"Email",value:n,onChange:w=>e(w.target.value),required:!0})}),R.jsx("div",{className:"space-y-2",children:R.jsx(Nr,{type:"password",placeholder:"Password",value:t,onChange:w=>r(w.target.value),required:!0})}),R.jsx(mn,{type:"submit",className:"w-full",disabled:s,children:s?"Signing in...":"Sign in"})]}),R.jsxs("div",{className:"text-center text-sm",children:["Don't have an account?"," ",R.jsx(Nm,{to:"/register",className:"underline underline-offset-4 hover:text-primary",children:"Register"})]})]})})}function w7(){const{groupId:n}=vI(),e=No(),t=()=>{e(`/groups/${n}`)},r=()=>{e(`/groups/${n}`)};return R.jsxs("div",{className:"min-h-screen bg-background",children:[R.jsx("header",{className:"border-b",children:R.jsxs("div",{className:"container flex h-16 items-center px-4",children:[R.jsx(mn,{variant:"ghost",onClick:t,className:"mr-4",children:"← Back"}),R.jsx("h1",{className:"text-lg font-semibold",children:"New Expense"})]})}),R.jsx("div",{className:"container max-w-2xl mx-auto p-4",children:R.jsx(ui,{className:"p-4",children:R.jsx(PD,{groupId:n,onSuccess:r,onCancel:t})})})]})}function E7(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[s,o]=E.useState(""),[c,d]=E.useState(""),[f,m]=E.useState(!1),[y,v]=E.useState(""),{signUp:w}=ma(),b=No(),A=async I=>{if(I.preventDefault(),v(""),!n.trim()){v("Please enter your name");return}if(!t.trim()){v("Please enter your email");return}if(!s){v("Please enter a password");return}if(s.length<6){v("Password must be at least 6 characters long");return}if(s!==c){v("Passwords do not match");return}try{m(!0),await w(t,s,n),b("/dashboard")}catch(x){console.error("Registration error:",x);const C=Gw(x);v(C.message)}finally{m(!1)}};return R.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-4",children:R.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[R.jsxs("div",{className:"space-y-2 text-center",children:[R.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Create an account"}),R.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your details to get started"})]}),R.jsxs("form",{onSubmit:A,className:"space-y-4",children:[y&&R.jsx("div",{className:"text-sm text-destructive text-center",children:y}),R.jsx("div",{className:"space-y-2",children:R.jsx(Nr,{type:"text",placeholder:"Full Name",value:n,onChange:I=>e(I.target.value),required:!0})}),R.jsx("div",{className:"space-y-2",children:R.jsx(Nr,{type:"email",placeholder:"Email",value:t,onChange:I=>r(I.target.value),required:!0})}),R.jsx("div",{className:"space-y-2",children:R.jsx(Nr,{type:"password",placeholder:"Password",value:s,onChange:I=>o(I.target.value),required:!0})}),R.jsx("div",{className:"space-y-2",children:R.jsx(Nr,{type:"password",placeholder:"Confirm Password",value:c,onChange:I=>d(I.target.value),required:!0})}),R.jsx(mn,{type:"submit",className:"w-full",disabled:f,children:f?"Creating account...":"Create account"})]}),R.jsxs("div",{className:"text-center text-sm",children:["Already have an account?"," ",R.jsx(Nm,{to:"/login",className:"underline underline-offset-4 hover:text-primary",children:"Sign in"})]})]})})}function b7(){return R.jsx(G2,{children:R.jsx(KF,{children:R.jsx(sB,{children:R.jsxs(b2,{children:[R.jsx(Ja,{path:"/login",element:R.jsx(_7,{})}),R.jsx(Ja,{path:"/register",element:R.jsx(E7,{})}),R.jsx(Ja,{path:"/dashboard",element:R.jsx(EI,{to:"/",replace:!0})}),R.jsx(Ja,{path:"/groups/:groupId",element:R.jsx(Yy,{children:R.jsx(v7,{})})}),R.jsx(Ja,{path:"/groups/:groupId/expense/new",element:R.jsx(Yy,{children:R.jsx(w7,{})})}),R.jsx(Ja,{path:"/",element:R.jsx(Yy,{children:R.jsx(JF,{})})})]})})})})}PO.createRoot(document.getElementById("root")).render(R.jsxs(E.StrictMode,{children:[R.jsx(IO,{}),R.jsx(yO,{}),R.jsx(b7,{})]}));
